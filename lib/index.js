/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},2858:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},3646:(e,t,n)=>{var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},1506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},8926:e=>{function t(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(o,i){var a=e.apply(n,r);function l(e){t(a,o,i,l,s,"next",e)}function s(e){t(a,o,i,l,s,"throw",e)}l(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},4575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},3913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},9713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},6525:(e,t,n)=>{var r=n(8331);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},e.exports.default=e.exports,e.exports.__esModule=!0),o(t,n,i||t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},9754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},2205:(e,t,n)=>{var r=n(9489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},3884:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}},e.exports.default=e.exports,e.exports.__esModule=!0},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},8585:(e,t,n)=>{var r=n(8).default,o=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},9489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},3038:(e,t,n)=>{var r=n(2858),o=n(3884),i=n(379),a=n(521);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},8331:(e,t,n)=>{var r=n(9754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},319:(e,t,n)=>{var r=n(3646),o=n(6860),i=n(379),a=n(8206);e.exports=function(e){return r(e)||o(e)||i(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},379:(e,t,n)=>{var r=n(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},1553:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),a=new R(r||[]);return i._invoke=function(e,t,n){var r=p;return function(o,i){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var l=k(a,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===p)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?h:d,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",f="executing",h="completed",v={};function y(){}function m(){}function g(){}var b={};s(b,i,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(P([])));E&&E!==n&&r.call(E,i)&&(b=E);var _=g.prototype=y.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(o,i,a,l){var s=c(e[o],e,i);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(p).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=c(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=g,s(_,"constructor",g),s(g,"constructor",m),m.displayName=s(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(O.prototype),s(O.prototype,a,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),s(_,l,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return l.type="throw",l.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},7757:(e,t,n)=>{e.exports=n(1553)},1209:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(7757)),i=r(n(319)),a=r(n(9713)),l=r(n(8926)),s=r(n(8)),u=r(n(4575)),c=r(n(3913)),p=r(n(3754));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return e.cardTypes?e.cardTypes.default={id:"default",name:"Default"}:e.cardTypes={default:{id:"default",name:"Default"}},e}var v=function(){function e(t,n){var r=this;(0,u.default)(this,e),this.validate=function(e){if(!r.data||"object"!=(0,s.default)(r.data))throw new TypeError("Invalid json data");return r.newValidate(e)},this.newValidate=function(){var e=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var o=[];r.inplaceErrorMessage=!!t;var i=new p.default(r.data);i.init([],r.entities),i.validate(o,t),o.length>0?n({type:"ValidationException",errors:r.convertErrors(o)}):e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getViewIds=function(e){var t,n,o;return e?null===(t=Object.keys((null===(n=r.data)||void 0===n?void 0:n.views)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name})):Object.keys((null===(o=r.data)||void 0===o?void 0:o.views)||{})},this.getPageIds=function(e){var t,n,o;return e?null===(t=Object.values((null===(n=r.data)||void 0===n?void 0:n.views)||{}).filter((function(e){return"page"===e.type})))||void 0===t?void 0:t.map((function(e){var t;return(null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)||""})):Object.values((null===(o=r.data)||void 0===o?void 0:o.views)||{}).filter((function(e){return"page"===e.type})).map((function(e){return e.id}))},this.getActions=function(e){var t,n,o;return e?null===(t=Object.values((null===(n=r.data)||void 0===n?void 0:n.actionGroups)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.name})):Object.keys((null===(o=r.data)||void 0===o?void 0:o.actionGroups)||{})},this.getCardTypes=function(e){var t,n,o;return e?null===(t=Object.values((null===(n=r.data)||void 0===n?void 0:n.cardTypes)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null===(o=r.data)||void 0===o?void 0:o.cardTypes)||{})},this.getOneOfMessage=function(e,t){return"".concat((null==t?void 0:t.label)||(null==t?void 0:t.path)," one of ").concat(null==e?void 0:e.join(", "))},this.getFormIds=function(e){var t,n,o,i,a;return e?null===(t=Object.values((null===(n=r.data)||void 0===n||null===(o=n.integrations)||void 0===o?void 0:o.incoming)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null===(i=r.data)||void 0===i||null===(a=i.integrations)||void 0===a?void 0:a.incoming)||{})},this.getRoles=function(e){var t,n,o;return e?null===(t=Object.values((null==r||null===(n=r.data)||void 0===n?void 0:n.roles)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null==r||null===(o=r.data)||void 0===o?void 0:o.roles)||{})},this.getFieldDefinitions=function(e){var t,n,o,i,a;return e?null===(t=Object.values((null==r||null===(n=r.data)||void 0===n||null===(o=n.fieldDefinitions)||void 0===o?void 0:o.hippoFields)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.label})):Object.keys((null==r||null===(i=r.data)||void 0===i||null===(a=i.fieldDefinitions)||void 0===a?void 0:a.hippoFields)||{})},this.getEnvironments=function(){var e;return Object.keys(null==r||null===(e=r.data)||void 0===e?void 0:e.environments)},this.getComponents=function(e){var t,n;return e?Object.values((null==r||null===(t=r.data)||void 0===t?void 0:t.components)||{}).map((function(e){return null==e?void 0:e.type})):Object.keys((null==r||null===(n=r.data)||void 0===n?void 0:n.components)||{})},this.errorFlat=function(e){return e.reduce((function(e,t){return null!=e&&e.some((function(e){return(null==e?void 0:e.code)===(null==t?void 0:t.code)&&(null==e?void 0:e.path)===(null==t?void 0:t.path)}))||e.push(t),e}),[])},this.getInvalidValueErrorTitle=function(e,t){switch(e){case"oneOf":case"enumValue":return"'".concat(r.camelCaseToNormal(t),"' value is deleted");case"required":return"'".concat(r.camelCaseToNormal(t),"' value is required");default:return""}},this.errorHumanize=function(e){return null==e?void 0:e.map((function(e){var t,n,o=(null==e?void 0:e.message)||"";return o.includes(null==e?void 0:e.path)&&(o=o.replace(null==e?void 0:e.path,r.getLabel(null==e?void 0:e.path,null==e||null===(t=e.params)||void 0===t?void 0:t.label))),o.includes(null==e?void 0:e.relativePath)&&(o=o.replace(null==e?void 0:e.relativePath,r.getLabel(null==e?void 0:e.relativePath,null==e||null===(n=e.params)||void 0===n?void 0:n.label))),f(f({},e),{},{message:o,errorTitle:null!=e&&e.fieldLabel?r.getInvalidValueErrorTitle(null==e?void 0:e.code,null==e?void 0:e.fieldLabel):r.camelCaseToNormal("".concat(null==e?void 0:e.code,"Error"))})}))},this.convertErrors=function(t){return t=t.map((function(t){return{code:r.convertErrorCode(t.type),message:r.convertMessage(t),path:e.normalizePath(t.path),fieldLabel:r.searchForLabelRegex(null==t?void 0:t.message),relativePath:null==t?void 0:t.relativePath,params:{value:null==t?void 0:t.actual,originalValue:null==t?void 0:t.actual,label:t.field,path:e.normalizePath(t.path),values:r.convertActualValues(t),resolved:r.convertActualResolved(t)}}})),t=r.errorFlat(t),r.errorHumanize(t)},this.convertErrorCode=function(e){return"enumValue"===e?"oneOf":e},this.convertActualValues=function(e){var t,n,o,a,l,u,c,p,d,f,h,v,y,m,g,b,x,E,_,w,O,k,A,S,R,P,T,j,L,I,C,M,D=function(e,t){return{id:e,label:t}},N=null===(t=Object.values((null===(n=r.data)||void 0===n||null===(o=n.app)||void 0===o?void 0:o.cardCollections)||{}))||void 0===t?void 0:t.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),V=null===(a=Object.values((null===(l=r.data)||void 0===l||null===(u=l.app)||void 0===u?void 0:u.roles)||{}))||void 0===a?void 0:a.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),F=null===(c=Object.values((null===(p=r.data)||void 0===p||null===(d=p.app)||void 0===d?void 0:d.views)||{}))||void 0===c?void 0:c.map((function(e){var t;return D(null==e?void 0:e.id,null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)})),B=null===(f=Object.values((null===(h=r.data)||void 0===h||null===(v=h.app)||void 0===v||null===(y=v.integrations)||void 0===y?void 0:y.incoming)||{}))||void 0===f?void 0:f.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),J=null===(m=Object.values((null===(g=r.data)||void 0===g||null===(b=g.app)||void 0===b||null===(x=b.fieldDefinitions)||void 0===x?void 0:x.hippoFields)||{}))||void 0===m?void 0:m.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.label)})),U=null===(E=Object.values((null===(_=r.data)||void 0===_||null===(w=_.app)||void 0===w||null===(O=w.fieldDefinitions)||void 0===O?void 0:O.appVariableFields)||{}))||void 0===E?void 0:E.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.label)})),Y=null===(k=Object.values((null===(A=r.data)||void 0===A||null===(S=A.app)||void 0===S?void 0:S.automations)||{}))||void 0===k?void 0:k.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),q=null===(R=(null===(P=r.entities)||void 0===P?void 0:P.trelloLists)||[])||void 0===R?void 0:R.map((function(e){return D(null==e?void 0:e.hippoId,null==e?void 0:e.name)})),z=null===(T=(null===(j=r.entities)||void 0===j?void 0:j.trelloLabels)||[])||void 0===T?void 0:T.map((function(e){return D(null==e?void 0:e.hippoId,(null==e?void 0:e.name)||(null==e?void 0:e.color)||!1)})),$=null===(L=(null===(I=r.entities)||void 0===I?void 0:I.members)||[])||void 0===L?void 0:L.map((function(e){return D((null==e?void 0:e.hippoId)||(null==e?void 0:e.id),null==e?void 0:e.name)})),H=null===(C=(null===(M=r.entities)||void 0===M?void 0:M.apps)||[])||void 0===C?void 0:C.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),G=[].concat((0,i.default)(V||[]),(0,i.default)(H||[]),(0,i.default)(N||[]),(0,i.default)(F||[]),(0,i.default)(B||[]),(0,i.default)(J||[]),(0,i.default)(U||[]),(0,i.default)(Y||[]),(0,i.default)(q||[]),(0,i.default)(z||[]),(0,i.default)($||[])).filter(Boolean),W=null==e?void 0:e.expected,X=(0,s.default)(W);if(Array.isArray(W)||"string"===X){var K=null!=W&&W.includes(", ")?null==W?void 0:W.split(", "):null==e?void 0:e.expected;if(Array.isArray(K)){var Z;K=(K=null===(Z=K)||void 0===Z?void 0:Z.map((function(e){var t;return(null==G||null===(t=G.find((function(t){return(null==t?void 0:t.id)===e})))||void 0===t?void 0:t.label)||e}))).join(", ")}else{var Q,ee=(K||"").trim();K=(null==G||null===(Q=G.find((function(e){return(null==e?void 0:e.id)===ee})))||void 0===Q?void 0:Q.label)||K}return K}return W},this.convertActualResolved=function(e){var t=e.expected;return t&&"string"==typeof t&&(t=t.split(",")),t},this.searchForLabelRegex=function(e){var t=new RegExp(/{{{label\:(.*)\}\}\}/gm).exec(e||"");return(null==t?void 0:t[1])||!1},this.labelOneOfMultipleSelect=function(e){return["label","member"].includes(e)},this.convertMessage=function(e){var t=r.searchForLabelRegex(null==e?void 0:e.message);if(t)switch(e.type){case"oneOf":case"enumValue":return r.labelOneOfMultipleSelect(t)?"Remove the deleted ".concat(t):"Choose another ".concat(t);case"notOneOf":return'"'.concat((null==e?void 0:e.label)||e.field,'" must not be one of ').concat(r.convertActualValues(e));case"notExists":return"The value used in '".concat(null==e?void 0:e.path,"' could not be found");case"required":return"Select a ".concat(t);default:return e.message}else switch(e.type){case"oneOf":case"enumValue":return'"'.concat((null==e?void 0:e.label)||e.field,'" must be one of ').concat(r.convertActualValues(e));case"notOneOf":return'"'.concat((null==e?void 0:e.label)||e.field,'" must not be one of ').concat(r.convertActualValues(e));case"notExists":return"The value used in '".concat(null==e?void 0:e.path,"' could not be found");case"uniqueValue":return'"'.concat((null==e?void 0:e.label)||e.field,'" must be unique.');default:return e.message}},this.data=this.jsonTraverse(t),this.data.appJson?this.data.appJson={app:h(this.data.appJson)}:this.data={app:h(this.data)},this.entities=n,this.inplaceErrorMessage=!1}return(0,c.default)(e,[{key:"jsonTraverse",value:function(t){for(var n in t){var r=t[n];e.isEmpty(r)?delete t[n]:"object"===(0,s.default)(r)&&this.jsonTraverse(r)}return t}},{key:"getLabel",value:function(e){var t=new RegExp(/\.?([a-zA-Z0-9]+)[\W\d]*?$/gm).exec(e||""),n=(null==t?void 0:t[1])||e||"";return this.camelCaseToNormal(n)}},{key:"camelCaseToNormal",value:function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))}}],[{key:"isEmpty",value:function(e){return void 0===e||"function"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e&&"[object Date]"!==Object.prototype.toString.call(e)&&(null==e||0===e.length||"object"==(0,s.default)(e)&&0===Object.keys(e).length)}},{key:"jsonPatchPathToQueryPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=e.split(t);n=n.filter(Boolean);for(var r="",o=/^\d+$/,i=0;i<n.length;i++){var a=n[i],l=null;"["===(l=o.test(a)?"["+a+"]":a).charAt(0)?r+=l:r+=0===r.length?l:"."+l}return r}},{key:"queryPathToJsonPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";if(!e)return null;var n=(e||"").split(t);n=n.filter(Boolean);for(var r="",o=0;o<n.length;o++){var i=n[o];r+="/"+i.replace(/\[(\d*)\]/g,(function(e,t){return"/"+t}))}return r}}]),e}();t.default=v,v.normalizePath=function(e){var t=e;return t=v.queryPathToJsonPath(t),v.jsonPatchPathToQueryPath(t)}},4752:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(7361)),l=function(){function e(){(0,o.default)(this,e)}return(0,i.default)(e,null,[{key:"query",value:function(e,t){return null==t?e:(0,a.default)(e,t)}}]),e}();t.default=l},4770:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionValueCheckFunc=function(e,t,n,r,i,a,l){if(!["empty","notempty"].includes(null==l?void 0:l.operator))if("[[[nullValue]]]"===n&&"value"===(null==l?void 0:l.valueType))r.push({type:"required"});else if("value"===(null==l?void 0:l.valueType)&&n){var s=(null==l?void 0:l.field).replace(/\.(hippoId|id)$/g,""),u=new o.default(e,"",s);u.init(null,t);var c=u.getRightValues();null!=c&&(Array.isArray(n)?!n.every((function(e){return c.includes(e)})):!c.includes(n))&&r.push({type:"enumValue",label:u.createMustacheLabel(u.getRightValueEntityName()),value:n,expected:c})}return n};var o=r(n(7041))},3598:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionsWithOr=void 0;var o=r(n(7799)),i=n(4770),a=n(8061);t.conditionsWithOr=function(e,t){return new o.default({useNewCustomCheckerFunction:!0}).compile({conditions:{type:"array",optional:!0,items:{type:"array",items:{type:"object",props:{field:"string|empty:false",operator:{type:"enum",values:a.OPERATORS},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:i.conditionValueCheckFunc.bind(void 0,e,t)},valueType:{type:"enum",values:["variable","value"]}}}}}})}},3282:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionsWithAnd=void 0;var o=r(n(7799)),i=n(4770),a=n(8061);t.conditionsWithAnd=function(e,t){return new o.default({useNewCustomCheckerFunction:!0}).compile({conditions:{type:"array",optional:!0,items:{type:"array",items:{type:"object",props:{field:"string|empty:false",operator:{type:"enum",values:a.OPERATORS},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:i.conditionValueCheckFunc.bind(void 0,e,t)},valueType:{type:"enum",values:["variable","value"]}}}}}})}},7076:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.formConditionsWithAnd=t.formConditionRule=void 0;var o=r(n(7799)),i=r(n(1209)),a=(new o.default).compile({conjunction:{type:"enum",values:["AND","OR","NOR"]},rules:{type:"array",optional:!0}});t.formConditionsWithAnd=a;var l=new o.default({useNewCustomCheckerFunction:!0}).compile({field:"string|empty:false",operator:{type:"enum",values:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","select_equals","select_not_equals","select_not_any_in","any_in","not_any_in","multiselect_equals","multiselect_not_equals","is_empty","is_not_empty","select_any_in"]},value:{type:"custom",default:"[[[nullValue]]]",custom:function(e,t,n,r,o,a){var l=(null==a?void 0:a.data)||{},s=l.operator,u=l.value,c=i.default.isEmpty(u);return["is_empty","is_not_empty"].includes(s)||("[[[nullValue]]]"===u||c)&&t.push({type:"required"}),u}}});t.formConditionRule=l},6009:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORM_INPUT_NAMES=void 0,t.FORM_INPUT_NAMES={TRELLO_LABEL_SELECTOR:"TrelloLabelSelector",USER_SELECTOR:"UserSelector",SHORT_TEXT:"EditText",LONG_TEXT:"LongText",EMAIL:"Email",NUMBER:"Number",WEBSITE:"Website",PHONE:"Phone",BUTTON:"Button",ATTACHMENT:"Attachment",DATE_PICKER_ITEM:"Date",DATE_TIME_PICKER_ITEM:"DateTime",TIME_PICKER:"Time",RADIO_BUTTON:"RadioButton",SELECT_BOX:"SelectBox",CAPTCHA:"Captcha",HORIZONTAL_LINE:"HorizontalLine",PARAGRAPH:"Paragraph",TITLE:"Title",RATING_ITEM:"Rating",CHECKBOX:"Checkbox",MULTISELECTBOX:"MultiSelectBox",RICH_TEXT_INPUT:"RichTextInput",BOOLEAN:"Boolean"}},8061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VARIABLE_TYPES=t.SUBDOMAIN_BLACKLIST=t.RESOLVE_TYPES=t.PAGE_SLUG_BLACKLIST=t.OPERATORS=t.LATEST_APP_SCHEMA_VERSION=t.APP_SLUG_BLACKLIST=void 0,t.SUBDOMAIN_BLACKLIST=["playground","console","hippo","admin"],t.PAGE_SLUG_BLACKLIST=["forms","form","page","signin","signup","forgot"],t.APP_SLUG_BLACKLIST=["hippo","trello","hipporello","onboarding"],t.LATEST_APP_SCHEMA_VERSION=4,t.VARIABLE_TYPES=["string","double","long","boolean","attachment","date","datetime","time"],t.RESOLVE_TYPES={RESOLVE_LIST_BY_HIPPO_ID:"RESOLVE_LIST_BY_HIPPO_ID",RESOLVE_LABEL_BY_HIPPO_ID:"RESOLVE_LABEL_BY_HIPPO_ID",RESOLVE_MEMBER_BY_TRELLO_ID:"RESOLVE_MEMBER_BY_TRELLO_ID",RESOLVE_USER_BY_USER_ID:"RESOLVE_USER_BY_USER_ID",RESOLVE_BOARD_BY_TRELLO_BOARD_ID:"RESOLVE_BOARD_BY_TRELLO_BOARD_ID",RESOLVE_CARD_BY_CARD_ID:"RESOLVE_CARD_BY_CARD_ID",RESOLVE_APP_BY_APP_ID:"RESOLVE_APP_BY_APP_ID"},t.OPERATORS=["equals","notequals","contains","notcontains","startswith","notstartswith","endswith","notendswith","lessthan","lessthanequals","greaterthan","greaterthanequals","in","allin","anyin","notin","empty","notempty","has","hasall","hasany","hasnone","doesnthave"]},5584:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9713)),i=r(n(4575)),a=r(n(3913)),l=r(n(319)),s=r(n(4752));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Array.prototype.pushArray=function(e){return Array.isArray(e)?(this.splice.apply(this,[this.length,0].concat((0,l.default)(e))),this):this};var d=function(){function e(t,n){var r=this;(0,i.default)(this,e),this.childNodes=[],this.deleted=!1,this.initialValidate=!0,this.checkedPaths={},this.lists=[],this.members=[],this.getViewIds=function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1?arguments[1]:void 0,i=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.views)||{}).filter((function(e){return!e.deleted}));return"function"==typeof o&&(i=i.filter(o)),n?i.map((function(e){return null==e?void 0:e.id})):i},this.getPageIds=function(e){var t,n,o,i,a;return e?null===(t=Object.values((null===(n=r.appJson)||void 0===n||null===(o=n.app)||void 0===o?void 0:o.views)||{}).filter((function(e){return"page"===e.type&&!e.deleted})))||void 0===t?void 0:t.map((function(e){var t;return(null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)||""})):Object.values((null===(i=r.appJson)||void 0===i||null===(a=i.app)||void 0===a?void 0:a.views)||{}).filter((function(e){return"page"===e.type&&!e.deleted})).map((function(e){return e.id}))},this.getActions=function(e){var t,n,o,i,a;return e?null===(t=Object.values((null===(n=r.appJson)||void 0===n||null===(o=n.app)||void 0===o?void 0:o.actionGroups)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.name})):Object.keys((null===(i=r.appJson)||void 0===i||null===(a=i.app)||void 0===a?void 0:a.actionGroups)||{})},this.getCollections=function(){var e,t,n,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0,a=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.cardCollections)||{}).filter((function(e){return!e.deleted}));return i&&(a=a.filter(i)),o?null===(n=a)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):a},this.getAutomations=function(){var e,t,n,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,a=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.automations)||{}).filter((function(e){return!e.deleted}));return i&&(a=a.filter(i)),o?null===(n=a)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):a},this.getOneOfMessage=function(e,t){return"".concat((null==t?void 0:t.label)||(null==t?void 0:t.path)," one of ").concat(null==e?void 0:e.join(", "))},this.getFormIds=function(e,t){var n,o,i,a,l=Object.values((null===(n=r.appJson)||void 0===n||null===(o=n.app)||void 0===o||null===(i=o.integrations)||void 0===i?void 0:i.incoming)||{}).filter((function(e){return!e.deleted}));return t&&(l=l.filter(t)),e?l:null===(a=l)||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.id}))},this.getRoles=function(e){var t,n,o=Object.values((null===(t=r.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.roles)||{}).filter((function(e){return!(null!=e&&e.deleted)}));return e?null==o?void 0:o.map((function(e){return null==e?void 0:e.id})):o},this.getAppParameters=function(e,t,n){var o,i,a,l,s=Object.values((null===(o=r.appJson)||void 0===o||null===(i=o.app)||void 0===i||null===(a=i.fieldDefinitions)||void 0===a?void 0:a.appVariableFields)||{});return n||(s=s.filter((function(e){return!(null!=e&&e.deleted)}))),t&&(s=s.filter(t)),e?null===(l=s)||void 0===l?void 0:l.map((function(e){return null==e?void 0:e.id})):s},this.getHippoFields=function(e,t,n){var o,i,a,l,s=Object.values((null===(o=r.appJson)||void 0===o||null===(i=o.app)||void 0===i||null===(a=i.fieldDefinitions)||void 0===a?void 0:a.hippoFields)||{});return n||(s=s.filter((function(e){return!(null!=e&&e.deleted)}))),t&&(s=s.filter(t)),e?null===(l=s)||void 0===l?void 0:l.map((function(e){return null==e?void 0:e.id})):s},this.getStaticFields=function(){return[{id:"member",label:"Members",type:e.RESOLVE_MEMBER_BY_TRELLO_ID},{id:"card",label:"Cards",type:e.RESOLVE_CARD_BY_CARD_ID},{id:"user",label:"User Fields",type:e.RESOLVE_USER_BY_USER_ID},{id:"triggeringUser",label:"Triggering User Fields",type:e.RESOLVE_USER_BY_USER_ID,resolveBy:e.RESOLVE_USER_BY_USER_ID},{id:"portal",label:"Workspace Fields",type:e.RESOLVE_PORTAL},{id:"role",label:"Roles & Groups",type:e.RESOLVE_ROLE_BY_ROLE_BY_ID},{id:"list",label:"List",type:e.RESOLVE_LIST_BY_HIPPO_ID},{id:"label",label:"Label",type:e.RESOLVE_LABEL_BY_HIPPO_ID},{id:"board",label:"Board",type:e.RESOLVE_BOARD_BY_TRELLO_BOARD_ID},{id:"system",label:"System",type:e.RESOLVE_SYSTEM},{id:"app",label:"Power-Up",type:e.RESOLVE_SYSTEM},{id:"appVariables",label:"App Variables",type:e.RESOLVE_APP_VARS},{id:"appVariables",label:"App Variables",type:e.RESOLVE_PORTAL},{id:"card.c_boardOrder",label:"Trello Board Order",type:"long",multiple:!1,sortable:!0,onlySortable:!0},{id:"card.c_userId",label:"Owner",type:"string",resolveBy:e.RESOLVE_USER_BY_USER_ID,multiple:!1,sortable:!0},{id:"card.c_parentCardId",label:"Parent Card",type:"string",resolveBy:e.RESOLVE_CARD_BY_CARD_ID,multiple:!1,sortable:!0},{id:"card.c_id",label:"Id",type:"string",multiple:!1,sortable:!0},{id:"card.c_boardId",label:"Board Id",type:"string",multiple:!1,sortable:!0},{id:"card.c_shortId",label:"Short Id",type:"string",multiple:!1,sortable:!0},{id:"card.tc_closed",label:"Is Archived",type:"boolean",multiple:!1,sortable:!0},{id:"card.c_insertedAt",label:"Creation Time",type:"datetime",multiple:!1,sortable:!0},{id:"card.c_updatedAt",label:"Last Update Time",type:"datetime",multiple:!1,sortable:!0},{id:"card.c_attachments",label:"All Trello Attachments",type:"attachment",multiple:!0,sortable:!1},{id:"card.c_parentCardId",label:"Parent Card",type:"string",resolveBy:e.RESOLVE_CARD_BY_CARD_ID,multiple:!1,sortable:!0,disabledDisplay:!0},{id:"card.c_coverAttachment",label:"Trello Card Cover",type:"attachment",multiple:!1,sortable:!1},{id:"card.c_ticketId",label:"Card Ticket Id",type:"string",multiple:!1,sortable:!0},{id:"card.tc_desc",label:"Card Description",type:"string",multiple:!1,sortable:!0},{id:"card.tc_name",label:"Card Name",type:"string",multiple:!1,sortable:!0},{id:"card.label",label:"Label",type:"string",resolveBy:e.RESOLVE_LABEL_BY_HIPPO_ID,multiple:!0,sortable:!1,disabledDisplay:!0},{id:"card.name",label:"Card Name",type:"string",multiple:!1,sortable:!1,disabledDisplay:!0},{id:"card.description",label:"Card Description",type:"string",multiple:!1,sortable:!1,disabledDisplay:!0},{id:"card.tc_labelHippoIds",label:"Labels",type:"string",multiple:!0,sortable:!1},{id:"card.tc_labelHippoIds",label:"Labels",type:"string",resolveBy:e.RESOLVE_LABEL_BY_HIPPO_ID,multiple:!0,sortable:!1},{id:"card.tc_idMembers",label:"Members",type:"string",multiple:!0,sortable:!1},{id:"card.tc_idMembers",label:"Members",type:"string",resolveBy:e.RESOLVE_MEMBER_BY_TRELLO_ID,multiple:!0,sortable:!1},{id:"card.tc_listHippoId",label:"Trello List",type:"string",multiple:!1,sortable:!0},{id:"card.tc_listHippoId",label:"Trello List",type:"string",resolveBy:e.RESOLVE_LIST_BY_HIPPO_ID,multiple:!1,sortable:!0},{id:"card.tc_startDate",label:"Start Date",type:"date",multiple:!1,sortable:!0},{id:"card.tc_dueDate",label:"Due Date",type:"datetime",multiple:!1,sortable:!0},{id:"card.tc_dueDateReminder",label:"Due Reminder (Minutes)",type:"double",multiple:!1,sortable:!0},{id:"card.tc_dueComplete",label:"Due Complete",type:"boolean",multiple:!1,sortable:!0},{id:"card.tc_shortUrl",label:"Card Short URL",type:"string",multiple:!1,sortable:!0},{id:"card.tc_url",label:"Card URL",type:"string",multiple:!1,sortable:!0},{id:"label.name",label:"Label Name",type:"string",multiple:!1,sortable:!1},{id:"label.hippoId",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"label.color",label:"Color",type:"string",multiple:!1,sortable:!1},{id:"list.name",label:"List Name",type:"string",multiple:!1,sortable:!1},{id:"list.hippoId",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"member.id",label:"Member ID",type:"string",multiple:!1,sortable:!1},{id:"member.fullName",label:"Full Name",type:"string",multiple:!1,sortable:!1},{id:"user.id",label:"User ID",type:"string",multiple:!1,sortable:!1},{id:"user.name",label:"Full Name",type:"string",multiple:!1,sortable:!1},{id:"member.username",label:"Username",type:"string",multiple:!1,sortable:!1},{id:"user.firstName",label:"First Name",type:"string",multiple:!1,sortable:!1},{id:"user.roleIds",label:"Roles & Groups",type:"string",resolveBy:e.RESOLVE_ROLE_BY_ROLE_BY_ID,multiple:!0,sortable:!0},{id:"user.lastName",label:"Last Name",type:"string",multiple:!1,sortable:!1},{id:"user.email",label:"Email",type:"string",multiple:!1,sortable:!1},{id:"user.emailDomain",label:"Email Domain",type:"string",multiple:!1,sortable:!1},{id:"user.tags",label:"Segments",type:"string",multiple:!0,sortable:!1},{id:"user.loggedIn",label:"Logged in",type:"boolean",multiple:!1,sortable:!1},{id:"system.currentTimeMillis",label:"Current Time",type:"datetime",multiple:!1,sortable:!1},{id:"system.environment",label:"Environment",type:"string",multiple:!1,sortable:!1},{id:"portal.name",label:"Workspace Name",type:"string",multiple:!1,sortable:!1},{id:"portal.url",label:"Portal URL",type:"string",multiple:!1,sortable:!1},{id:"portal.consoleUrl",label:"Hipporello Console URL",type:"string",multiple:!1,sortable:!1},{id:"board.name",label:"Board Name",type:"string",multiple:!1,sortable:!1},{id:"board.desc",label:"Board Description",type:"string",multiple:!1,sortable:!1},{id:"portal.name",label:"Workspace Name",type:"string",multiple:!1,sortable:!1},{id:"role.name",label:"Name",type:"string",multiple:!1,sortable:!1},{id:"role.id",label:"Role Id",type:"string",multiple:!1,sortable:!1},{id:"app.name",label:"Power-Up Name",type:"string",multiple:!1,sortable:!1},{id:"app.url",label:"Power-Up URL",type:"string",multiple:!1,sortable:!1}]},this.getObjectKey=function(e){var t=e.id;return null!=e&&e.resolveBy&&(t+="Object",e.multiple),t},this.getAccessibleFieldTypes=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=r.getHippoFields(!1,null,t),o=r.getStaticFields(),i=r.getAppParameters(!1,null,t),a={};o.forEach((function(e){a[e.id]=e})),n.forEach((function(t){a["card."+t.id]={id:"card."+t.id,type:t.type,label:t.label,resolveBy:e.FIELD_RESOLVE_BY_TO_VALIDATOR[t.resolveBy],multiple:t.multiple}})),i.forEach((function(t){a["appVariables."+t.id]={id:"appVariables."+t.id,type:t.type,label:t.label,resolveBy:e.FIELD_RESOLVE_BY_TO_VALIDATOR[t.resolveBy],multiple:t.multiple}}));var l={};return Object.values(a).forEach((function(e){if(l[null==e?void 0:e.id]=e,null!=e&&e.resolveBy){var t=r.getObjectKey(e);l[t]=p(p({},e),{},{id:t})}})),l},this.getCardFieldsWithContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["parentCard","card"],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=r.getHippoFields(!1),i=r.getStaticFields(),a=r.getAppParameters().map((function(e){return p(p({},e),{},{id:"appVariables."+(null==e?void 0:e.id)})})),s=[].concat((0,l.default)(o),(0,l.default)(i),(0,l.default)(a));n&&(s=s.filter(n));var u={};return s.forEach((function(t){t.id.startsWith("tc_")||t.id.startsWith("hf_")||t.id.startsWith("c_")?e.forEach((function(e){var n=e+"."+(null==t?void 0:t.id);u[n]=p(p({},t),{},{field:n})})):u[null==t?void 0:t.id]=t})),t?Object.keys(u):u},this.getAllHippoAttachmentFields=function(){return r.getCardFieldsWithContext(["card","parentCard"],!0,(function(e){return"attachment"===(null==e?void 0:e.type)}))},this.getEnvironments=function(){var e,t;return Object.keys(null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.environments)},this.getComponents=function(e){var t,n,o;return e?Object.values((null===(t=r.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.components)||{}).map((function(e){return null==e?void 0:e.type})):Object.keys((null==r||null===(o=r.data)||void 0===o?void 0:o.components)||{})},this.getCollectionValidateJson=function(){return{collections:{type:"array",optional:!0,items:{type:"enum",values:r.getCollections()}},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]}}},this.createMustacheLabel=function(e){return"".concat("{{{label:"+e+"}}}")},t.appJson?(this.appJson=t.appJson,this.lists=t.lists||[],this.members=t.members||[]):this.appJson=t,this.path=n,this.validatorPath=n,this.exists=!0,this.jsonPatchPath=n?"/"+n.replace(/"/g,"").replace(/]/g,"").replace(/\[/g,".").replace(/\./g,"/"):null,e.counter||(e.counter=0)}return(0,a.default)(e,[{key:"init",value:function(e,t){var n,r,o,i,a,l=this;this.actions=e,this.entities=t,this.entitiesIds={trelloLists:null===(n=(null===(r=this.entities)||void 0===r?void 0:r.trelloLists)||[])||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})),trelloLabels:null===(o=(null===(i=this.entities)||void 0===i?void 0:i.trelloLabels)||[])||void 0===o?void 0:o.map((function(e){return null==e?void 0:e.hippoId}))},this.childNodes=[],this.nodeJson=s.default.query(this.appJson,this.path),this.nodeJson?(this.id=this.generateNodeId(this.nodeJson),this.deleted=!(null===(a=this.nodeJson)||void 0===a||!a.deleted),this.process(this.appJson,this.path,this.nodeJson),this.childNodes.forEach((function(e){e.init(l.actions,l.entities)}))):this.exists=!1}},{key:"generateNodeId",value:function(e){return e.id}},{key:"addChildNode",value:function(e){e.parentNode=this,this.childNodes.push(e)}},{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return function(e){}}},{key:"findNodeWithPath",value:function(e){var t=null;if(e===this.path)t=this;else{var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.childNodes);try{for(r.s();!(n=r.n()).done&&!(t=n.value.findNodeWithPath(e)););}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"validate",value:function(t,n){var r=this;if(n){var o=this.findNodeWithPath(n);return!!o&&o.validate(t)}if(!this.checkedPaths[this.path]&&!this.deleted)if(this.checkedPaths[this.path]=!0,this.exists||!this.initialValidate){var i=this.getValidatorFunction();if(null!=i){e.counter+=1;var a=i,l="function"==typeof a?a(this.nodeJson):a;l&&Array.isArray(l)&&l.length>0&&(l.forEach((function(e){e.path=e.path?e.path:"".concat(r.validatorPath,".").concat(e.field),e.relativePath=null==e?void 0:e.field})),t.pushArray(l))}this.exists&&this.childNodes.forEach((function(e){return e.validate(t)}))}else this.isMandatory()&&t.push({path:null==this?void 0:this.path,type:"notExists"})}},{key:"isMandatory",value:function(){return!0}},{key:"getApps",value:function(e,t){var n,r=(null===(n=this.entities)||void 0===n?void 0:n.apps)||[];return t&&(r=r.filter(t)),e?r.map((function(e){return null==e?void 0:e.id})):r}},{key:"getTrelloList",value:function(){var e,t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=(null===(e=this.entities)||void 0===e?void 0:e.trelloLists)||[];return i&&(a=null===(t=a||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.closed)}))),o&&(a=[].concat((0,l.default)(a),[{hippoId:"{{{card.c_parentCardIdObject.tc_listHippoIdObject.hippoId}}}",value:"{{{card.c_parentCardIdObject.tc_listHippoIdObject.hippoId}}}"}])),r?null===(n=a)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})):a}},{key:"getTrelloLabels",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(null===(e=this.entities)||void 0===e?void 0:e.trelloLabels)||[];return o&&(i=null===(t=i||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.deleted)}))),r?null===(n=i)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})):i}},{key:"getTrelloMembers",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=arguments.length>1?arguments[1]:void 0,i=(null===(e=this.entities)||void 0===e?void 0:e.members)||[];return console.log(i,this.entities),o&&(i=null===(t=i||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.deleted)}))),r?null===(n=i)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):i.map((function(e){return p(p({},e),{},{label:null==e?void 0:e.fullName})}))}},{key:"getPageNames",value:function(){var e,t,n,r;return this.viewNames||(this.viewNames=null===(e=Object.values(null===(n=this.appJson)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.views)||[])||void 0===e||null===(t=e.filter((function(e){return"page"===e.type})))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name}))),this.viewNames}},{key:"createValidationError",value:function(e,t,n,r,o,i){return{type:e,message:i,field:t,actual:n,expectedMeaningful:o||r,expected:r}}}]),e}();t.default=d,d.RESOLVE_LIST_BY_HIPPO_ID="list",d.RESOLVE_LABEL_BY_HIPPO_ID="label",d.RESOLVE_MEMBER_BY_TRELLO_ID="member",d.RESOLVE_USER_BY_USER_ID="user",d.RESOLVE_BOARD_BY_TRELLO_BOARD_ID="board",d.RESOLVE_CARD_BY_CARD_ID="card",d.RESOLVE_ROLE_BY_ROLE_BY_ID="role",d.RESOLVE_APP_BY_APP_ID="app",d.RESOLVE_APP_VARS="appVariables",d.RESOLVE_SYSTEM="system",d.RESOLVE_PORTAL="portal",d.RESOLVE_FORM="form",d.FIELD_RESOLVE_BY_TO_VALIDATOR={RESOLVE_LIST_BY_HIPPO_ID:d.RESOLVE_LIST_BY_HIPPO_ID,RESOLVE_LABEL_BY_HIPPO_ID:d.RESOLVE_LABEL_BY_HIPPO_ID,RESOLVE_MEMBER_BY_TRELLO_ID:d.RESOLVE_MEMBER_BY_TRELLO_ID,RESOLVE_USER_BY_USER_ID:d.RESOLVE_USER_BY_USER_ID,RESOLVE_BOARD_BY_TRELLO_BOARD_ID:d.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,RESOLVE_CARD_BY_CARD_ID:d.RESOLVE_CARD_BY_CARD_ID,RESOLVE_ROLE_BY_ROLE_BY_ID:d.RESOLVE_ROLE_BY_ROLE_BY_ID,RESOLVE_APP_BY_APP_ID:d.RESOLVE_APP_BY_APP_ID}},6423:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7799));var p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){var n;return(0,o.default)(this,u),(n=r.call(this,e,t)).initialValidate=!1,n}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e=[],t=this.getCollectionValidateJson();t.collections.optional=!1;var n=(new c.default).compile(t);return e.pushArray(n((null==this?void 0:this.nodeJson)||{})),e}}]),u}(u.default);t.default=p},775:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=n(3598),p=n(3282);var d=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e,t,n,r,o=[];return(null==this||null===(e=this.nodeJson)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.length)>1?o.pushArray((0,c.conditionsWithOr)(this.appJson,this.entities)(null==this?void 0:this.nodeJson)):null!=this&&null!==(n=this.nodeJson)&&void 0!==n&&null!==(r=n.conditions)&&void 0!==r&&r.length&&o.pushArray((0,p.conditionsWithAnd)(this.appJson,this.entities)(null==this?void 0:this.nodeJson)),o}}]),u}(u.default);t.default=d},2746:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(4504)),p=r(n(7799));var d=(new p.default).compile({id:{type:"string"},shared:{type:"boolean"},title:{type:"string",optional:!0},name:{type:"string",optional:!0},actions:{type:"object"}}),f=(new p.default).compile({name:"string|min:1"}),h=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r=this;this.shared=n.shared,n.actions&&Object.keys(n.actions).length>0&&Object.keys(n.actions).forEach((function(t){r.addChildNode(new c.default(e,"app.actionGroups.".concat(n.id,".actions.").concat(t)))}))}},{key:"getValidatorFunction",value:function(){var e=[],t=d(this.nodeJson);if(Array.isArray(t)&&e.pushArray(t),this.nodeJson.shared){var n=f(this.nodeJson);Array.isArray(n)&&e.pushArray(n)}return e}}]),u}(u.default);t.default=h},4504:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9713)),i=r(n(319)),a=r(n(4575)),l=r(n(3913)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),p=r(n(5584)),d=r(n(7799)),f=(n(6550),n(3598)),h=n(3282);function v(e){var t,n,r,o=(e||{}).query,i=this.getCollectionValidateJson(),a=new d.default({useNewCustomCheckerFunction:!0}).compile({query:{type:"object",props:i}})(e);return null!=a&&a.length?a:(null==o||null===(t=o.conditions)||void 0===t?void 0:t.length)>1?(0,f.conditionsWithOr)(this.appJson,this.entities)(o):null!=o&&null!==(n=o.conditions)&&void 0!==n&&null!==(r=n.conditions)&&void 0!==r&&r.length?(0,h.conditionsWithAnd)(this.appJson,this.entities)(o):[]}var y=(new d.default).compile({id:"string|optional",type:{type:"enum",values:["send-conversation-message","update-hipporello-card","update-trello-card","add-comment","open-form","open-page","open-url","navigate-to-card","find-to-card","update-card-members","update-card-labels","move-card","archive-card","send-card-to-board","conversation-get-board-members","conversation-get-contacts","conversation-get-roles","conversation-reply","conversation-delete-message","conversation-delete-thread","conversation-update-members","conversation-get-card-fields","conversation-new-thread","conversation-reply","UpdateAppVariable","UpdateHippoField","user-management-add-user","user-management-update-user","user-management-check-user"]},props:{type:"object",optional:!0,props:{onSuccess:{type:"object",optional:!0,props:{id:"string",required:"string"}},params:{type:"object",optional:!0,props:{context:{type:"enum",values:["parent","self","children"]}}}}}}),m=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,g=(new d.default).compile({id:"string",order:"number",type:{type:"enum",values:["send-conversation-message","update-hipporello-card","update-trello-card","add-comment","open-form","open-page","open-url","navigate-to-card","find-to-card","update-card-members","update-card-labels","move-card","archive-card","send-card-to-board","copy-to-clipboard","feedback-message","confirmation-box"]},props:{type:"object",optional:!0,props:{onSuccess:{type:"object",optional:!0,props:{id:"string",required:"string"}},params:{type:"object",optional:!0,props:{context:{type:"enum",values:["parent","self","children"]}}}}}}),b=["nextListOnBoard","previousListOnBoard"],x=(new d.default).compile({target:{type:"object",props:{type:{type:"enum",values:["_self","_blank"]}}},url:"string|empty:false"}),E=(new d.default).compile({url:"string|empty:false"}),_=(new d.default).compile({params:{type:"object",props:{context:{type:"enum",values:["parent","self","children"]}}},cardUpdateFields:{type:"object"}}),w=(new d.default).compile({title:"string|optional",size:{optional:!0,type:"enum",values:["small","medium","large","fullscreen"]}}),O=(new d.default).compile({dataToBeCopied:{type:"string",messages:{required:"Source can not be empty."}}}),k=(new d.default).compile({title:{type:"string",messages:{required:"Title can not be empty."}},type:{type:"enum",values:["info","error","warning","success"]},icon:{type:"enum",values:["check-circle","exclamation-circle","exclamation-triangle","info-circle"]},message:{type:"string",optional:!0},duration:{type:"number",min:0,max:20},position:{type:"enum",values:["top-left","top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"]}}),A=function(e){(0,s.default)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var o=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function p(e,t,n){var o;return(0,a.default)(this,p),(o=r.call(this,e,t)).external=n,o}return(0,l.default)(p,[{key:"process",value:function(e,t,n){var r;this.formId=null===(r=n.props)||void 0===r?void 0:r.formId}},{key:"getValidatorFunction",value:function(){var e,t,n,r,a,l,s,u,c,p,f=this.getTrelloList(!0,!0,!1),h=null===(e=this.entitiesIds)||void 0===e?void 0:e.trelloLabels,A=b.concat(f),S=this.getHippoFields(!0),R=Object.values((null===(t=this.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.roles)||{}).map((function(e){return null==e?void 0:e.id})),P=this.getCardFieldsWithContext(["card","parentCard"],!0,(function(e){return"string"===(null==e?void 0:e.type)})),T=new d.default({useNewCustomCheckerFunction:!0}).compile({listHippoId:{type:"string",label:"List",custom:function(e,t){/\{\{\{.*}}}/gi.test(String(e))||A.includes(e)||t.push({type:"enum",expected:A,actual:e,message:"Choose another List"})},messages:{required:this.createMustacheLabel("list")}}}),j=(new d.default).compile({updateLabelActionType:{type:"enum",values:["remove-all-labels","remove-labels","set-labels","add-labels"]},labels:{type:"array",optional:"remove-all-labels"===(null===(r=this.nodeJson.props)||void 0===r?void 0:r.updateLabelActionType),items:{type:"enum",values:h||[],messages:{enumValue:this.createMustacheLabel("label"),required:this.createMustacheLabel("label")}}}}),L=(new d.default).compile({updateMemberActionType:{type:"enum",values:["add-members","set-members","remove-members","remove-all-members"]},members:{type:"array",items:{type:"object",props:{type:{type:"enum",values:["trelloMember","trelloRole"]},value:{type:"enum",values:[].concat((0,i.default)(null===(a=(null===(l=this.entities)||void 0===l?void 0:l.members)||[])||void 0===a?void 0:a.map((function(e){return null==e?void 0:e.id}))),["all","allTrelloCardMembers","allTrelloBoardMembers","allTrelloBoardAdminMembers","allTrelloNormalMembers","allTrelloObserverMembers"]),messages:{enumValue:this.createMustacheLabel("member"),required:this.createMustacheLabel("member")}}}}}}),I=new d.default({useNewCustomCheckerFunction:!0}).compile({message:"string",subject:"string",conversationMembers:{type:"array",items:{type:"custom",check:function(e,t,n){var r,o,i,a,l,s;if(((null==n||null===(r=n.props)||void 0===r||null===(o=r.type)||void 0===o?void 0:o.values)||[]).includes(null==e?void 0:e.type)||t.push({type:"enumValue",actual:null==e?void 0:e.type,field:"type",expected:(null==n||null===(i=n.props)||void 0===i||null===(a=i.type)||void 0===a?void 0:a.values)||[]}),"email"===(null==e?void 0:e.type))m.test(null==e?void 0:e.id)||t.push({type:"email",actual:null==e?void 0:e.id,field:"id"});else if("cardField"===(null==e?void 0:e.type));else if(!((null==n||null===(l=n.props)||void 0===l||null===(s=l.id)||void 0===s?void 0:s.values)||[]).includes(null==e?void 0:e.id)){var u,c;t.push({type:"enumValue",actual:null==e?void 0:e.id,field:"id",expected:(null==n||null===(u=n.props)||void 0===u||null===(c=u.id)||void 0===c?void 0:c.values)||[]})}return e},props:{type:{type:"enum",values:["trelloMember","cardField","trelloRoles","submissionOwner","hipporelloMember","hipporelloRole","email"]},id:{type:"enum",values:[].concat((0,i.default)(null===(s=(null===(u=this.entities)||void 0===u?void 0:u.members)||[])||void 0===s?void 0:s.map((function(e){return null==e?void 0:e.id}))),(0,i.default)(R||[]),(0,i.default)(P||[]),["allTrelloCardMembers","allTrelloBoardMembers","allTrelloBoardAdminMembers","allTrelloNormalMembers","allTrelloObserverMembers","submissionOwner"])},isContributor:"boolean|optional"}}}}),C=(new d.default).compile({viewId:{type:"enum",values:this.getPageIds(),messages:{enumValue:this.createMustacheLabel("page"),required:this.createMustacheLabel("page")}},target:{type:"object",props:{type:{type:"enum",values:["_self","_blank","_modal"]}}},type:{type:"enum",values:["internal","external"]}}),M=(new d.default).compile({formId:{type:"enum",values:this.getFormIds(!1,(function(e){var t;return null===(t=["form","updateform"])||void 0===t?void 0:t.includes(null==e?void 0:e.type)})),messages:{enumValue:this.createMustacheLabel("form"),required:this.createMustacheLabel("form")}},target:{type:"object",props:{type:{type:"enum",values:["_modal","_blank","_self"]}}}}),D=[];if(this.external?D.pushArray(y(this.nodeJson)):D.pushArray(g(this.nodeJson)),this.validatorPath="".concat(this.path,".props"),"move-card"===this.nodeJson.type)D.pushArray(T(this.nodeJson.props||{}));else if("find-to-card"===this.nodeJson.type)D.pushArray(v.call(this,this.nodeJson.props||{}));else if("update-card-labels"===this.nodeJson.type)D.pushArray(j(this.nodeJson.props||{}));else if("update-card-members"===this.nodeJson.type)D.pushArray(L(this.nodeJson.props||{}));else if("send-conversation-message"===this.nodeJson.type)D.pushArray(I(this.nodeJson.props||{}));else if("update-hipporello-card"===this.nodeJson.type||"update-trello-card"===this.nodeJson.type){var N,V,F=null===(N=Object.keys((null===(V=this.nodeJson.props)||void 0===V?void 0:V.cardUpdateFields)||{}))||void 0===N?void 0:N[0];S.includes(F)?(this.validatorPath="".concat(this.path,".props.cardUpdateFields.").concat(F),D.pushArray((c=F,p=new d.default({useNewCustomCheckerFunction:!0}).compile({cardUpdateFields:{type:"object",props:(0,o.default)({},c,{type:"object",optional:!0,props:{type:{type:"enum",optional:!0,values:["replacement","minus","plus","multiply","remove"]},valueType:{type:"enum",optional:!0,values:["value","variable"]},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:function(e,t,n,r,o){return"[[[nullValue]]]"===e&&"variable"===(null==o?void 0:o.valueType)&&t.push({type:"required",field:"value"}),!!Array.isArray(e)&&Object.values(e).length!==e.length&&"value"===(null==o?void 0:o.valueType)&&t.push({type:"required",field:"value",message:"Any of the added items must not be empty"}),e}}}})},params:{type:"object",props:{context:{type:"enum",values:["parent","self","children"]}}}}),p)(this.nodeJson.props||{}))):(this.validatorPath="".concat(this.path,".props.cardUpdateFields"),D.pushArray(_(this.nodeJson.props||{})))}else if("open-page"===this.nodeJson.type)D.pushArray(C(this.nodeJson.props||{})),"external"===this.nodeJson.props.type&&D.pushArray(E(this.nodeJson.props||{}));else if("open-url"===this.nodeJson.type)D.pushArray(x(this.nodeJson.props||{}));else if("open-form"===this.nodeJson.type){var B,J;D.pushArray(M(this.nodeJson.props||{})),"_modal"===(null===(B=this.nodeJson.props)||void 0===B||null===(J=B.target)||void 0===J?void 0:J.type)&&(this.validatorPath="".concat(this.path,".props.target"),D.pushArray(w(this.nodeJson.props.target)))}else"copy-to-clipboard"===this.nodeJson.type?D.pushArray(O(this.nodeJson.props||{})):"feedback-message"===this.nodeJson.type&&D.pushArray(k(this.nodeJson.props||{}));return D}}]),p}(p.default);t.default=A},3754:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(3038)),i=r(n(319)),a=r(n(4575)),l=r(n(3913)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),p=r(n(5584)),d=r(n(6474)),f=r(n(702)),h=r(n(6550)),v=r(n(2241)),y=r(n(4050)),m=r(n(8417)),g=r(n(9379)),b=r(n(887)),x=r(n(6946)),E=r(n(8536)),_=r(n(4752)),w=r(n(825)),O=r(n(7799)),k=n(8061),A=r(n(7041)),S=r(n(466));var R=function(e){(0,s.default)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var o=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function p(e){return(0,a.default)(this,p),r.call(this,e,"app")}return(0,l.default)(p,[{key:"getValidatorFunction",value:function(){var e=new O.default({useNewCustomCheckerFunction:!0}).compile({id:"string",schemaVersion:{type:"number",equal:k.LATEST_APP_SCHEMA_VERSION},name:"string|empty:false|trim",slug:{type:"custom",check:function(e,t){return k.APP_SLUG_BLACKLIST.includes(e)&&t.push({type:"notOneOf",label:"App Slug",expected:k.APP_SLUG_BLACKLIST}),e}},description:"string|optional|empty:false|trim",type:{type:"enum",values:["defaultApp","homeApp"]},boards:"array|optional"})(this.appJson.app),t=Array.isArray(e)?e:[];return this.variableNodes.forEach((function(e){var n=e.getValidatorFunction();n&&n.length>0&&(console.log(),t.splice.apply(t,[t.length,0].concat((0,i.default)(n))))})),t}},{key:"process",value:function(e,t,n){var r,o,i,a=this;this.addChildNode(new d.default(e,"app.environments.webView")),this.addChildNode(new f.default(e,"app.environments.trelloCardBack")),null!=e&&null!==(r=e.app)&&void 0!==r&&null!==(o=r.environments)&&void 0!==o&&null!==(i=o.trelloBoardView)&&void 0!==i&&i.enabled&&this.addChildNode(new w.default(e,"app.environments.trelloBoardView")),this.addChildNode(new g.default(e,"app.cardCollections")),this.addChildNode(new b.default(e,"app.roles")),this.addChildNode(new y.default(e,"app.viewSettings")),_.default.query(e,"app.fieldDefinitions.appVariableFields")&&this.addChildNode(new m.default(e,"app.fieldDefinitions.appVariableFields"));var l=this.getAutomations(!0);null!=l&&l.length&&l.forEach((function(t){a.addChildNode(new h.default(e,"app.automations."+t))}));var s=this.getHippoFields(!0);null!=s&&s.length&&s.forEach((function(t){a.addChildNode(new v.default(e,"app.fieldDefinitions.hippoFields."+t))}));var u=this.getFormIds(!0);null!=u&&u.length&&u.forEach((function(t){["form","updateform"].includes(t.type)?a.addChildNode(new x.default(e,"app.integrations.incoming."+t.id)):"email"===t.type&&a.addChildNode(new E.default(e,"app.integrations.incoming."+t.id))})),this.generateVariableNodes(n)}},{key:"generateVariableNodes",value:function(e){this.variableNodes=[],this._generateVariableNodes("app",e,this.variableNodes)}},{key:"_generateVariableNodes",value:function(e,t,n){var r=this;if(null!=t&&t.deleted||!1===(null==t?void 0:t.enabled))return!1;if(Array.isArray(t))t.forEach((function(t,o){r._generateVariableNodes(e+"."+o,t,n)}));else if("string"==typeof t){if(t.indexOf("{{")>=0)try{S.default.parse(t||"").forEach((function(t){if("name"===t[0]||"&"===t[0]){var o=t[1];n.push(new A.default(r.appJson,e,o))}}))}catch(e){}}else t instanceof Object&&Object.entries(t).forEach((function(t){var i=(0,o.default)(t,2),a=i[0],l=i[1];r._generateVariableNodes(e+"."+a,l,n)}))}}]),p}(p.default);t.default=R,R.INSTANCE=null},6550:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9713)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(301)),d=r(n(7799));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){(0,l.default)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function o(e,t){return(0,i.default)(this,o),r.call(this,e,t)}return(0,a.default)(o,[{key:"process",value:function(e,t,n){var r=this,o=Object.values((null==n?void 0:n.rules)||{});null!=o&&o.length&&null!=n&&n.enabled&&o.forEach((function(t){r.addChildNode(new p.default(e,"app.automations.".concat(null==n?void 0:n.id,".rules.").concat(null==t?void 0:t.id)))}))}},{key:"getValidatorFunction",value:function(){var e,t,n,r=this.getTrelloList(!0),o={type:"enum",values:r,optional:!0},i={type:"array",items:{type:"enum",values:r},optional:!0},a={type:{type:"enum",values:["card-created","moved","commented","archived"]}};switch(null===(e=this.nodeJson)||void 0===e||null===(t=e.trigger)||void 0===t?void 0:t.type){case"card-created":a.lists=i;break;case"moved":a.fromList=o,a.toList=o;break;case"commented":a.list=o}var l=(new d.default).compile({id:"string|empty:false",name:"string|empty:false",order:"number",trigger:{type:"object",props:h({},a)}}),s=[];return s.pushArray(l(this.nodeJson)),null!==(n=this.nodeJson)&&void 0!==n&&n.enabled?s:[]}}]),o}(c.default);t.default=v},301:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(5266)),p=r(n(7799)),d=n(3598),f=n(3282);var h=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r=this,o=null==n?void 0:n.events;if(o){var i=t+".events";Object.entries(o).forEach((function(t){r.addChildNode(new c.default(e,i+"."+t[0]))}))}}},{key:"getValidatorFunction",value:function(){var e,t,n,r,o,i,a,l=[],s=(new p.default).compile({id:"string",order:"number",enabled:"boolean|optional",filter:{type:"object",optional:!0,props:this.getCollectionValidateJson()}});if(l.pushArray(s(this.nodeJson)),(null===(e=this.nodeJson)||void 0===e||null===(t=e.filter)||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.length)>1)l.pushArray((0,d.conditionsWithOr)(this.appJson,this.entities)(null===(a=this.nodeJson)||void 0===a?void 0:a.filter));else if(null!==(r=this.nodeJson)&&void 0!==r&&null!==(o=r.filter)&&void 0!==o&&null!==(i=o.conditions)&&void 0!==i&&i.length){var u;l.pushArray((0,f.conditionsWithAnd)(this.appJson,this.entities)(null===(u=this.nodeJson)||void 0===u?void 0:u.filter))}return l}}]),u}(u.default);t.default=h},5150:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584));var c=(new(r(n(7799)).default)).compile({id:"string",name:"string",collections:{type:"array",optional:!0,items:{type:"string"}},conditions:{type:"array",optional:!0}}),p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return c}}]),u}(u.default);t.default=p},9379:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(8)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(5150));r(n(4752));var d=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,i.default)(this,c),r.call(this,e,t)}return(0,a.default)(c,[{key:"process",value:function(e,t,n){var r=this,o=this.getCollections();o&&o.forEach((function(t){r.addChildNode(new p.default(e,"app.cardCollections."+t))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,o.default)(this.nodeJson))return[this.createValidationError("object","cardCollections",(0,o.default)(this.nodeJson))]}},{key:"isMandatory",value:function(){return!1}}]),c}(c.default);t.default=d},4244:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(5266)),p=r(n(103)),d=r(n(7799)),f=r(n(775));var h={id:"string|empty:false",type:{type:"enum",values:["header","paragraph","list","icon","appList","formList","sidebar","hyperlink","image","video","hippoFields","appVariables","label","button","TrelloCardSharing","table","date","dropdown","row","Image","AppVariables","Header","horizontalline","html","dropdownItem","attachmentList","menuItem","cardMenuItem","tableColumn","menu","HippoFields","Conversation","column","columns","userManagement","shareButton"]},viewProps:{type:"object",optional:!0,props:{name:"string|optional",gap:"number|optional",align:{type:"enum",values:["left","right","center"],optional:!0}}},accessRight:"object|optional"},v=(new d.default).compile(h);function y(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.type),r=this.getFormIds();return(new d.default).compile({viewType:{type:"enum",values:["grid","list"]},type:{type:"enum",values:["all","selected","allCreatingForms","allUpdatingForms"]},showDescription:"boolean|optional",selectedForms:{type:"array",optional:!n,items:{type:"enum",values:r}}})}function m(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.type),r=this.getApps(!0);return(new d.default).compile({viewType:{type:"enum",values:["grid","list"]},type:{type:"enum",values:["all","selected"]},showDescription:"boolean|optional",selectedApps:{type:"array",optional:!n,label:"Selected Power-Ups",items:{type:"enum",values:r}}})}function g(){var e,t,n=null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.displayedTextLimit,r=n?1:null;return(new d.default).compile({text:"string",alignment:{type:"enum",values:["left","right","center","justify"],optional:!0},displayedTextLimit:{type:"enum",values:[!0,!1],optional:!0},maxCharacter:{optional:!n,type:"number",min:r,label:"Maximum Character"}})}var b=(new d.default).compile({text:"string",heading:{type:"enum",values:["h1","h2","h3","h4","h5","h6"]},alignment:{type:"enum",values:["left","right","center","justify"],optional:!0}}),x=((new d.default).compile({text:"string",alignment:{type:"enum",values:["left","right","center","justify"],optional:!0}}),(new d.default).compile({text:"string",url:"string|optional"})),E=(new d.default).compile({pageSize:"number|optional",query:{type:"object",optional:!0,props:{collections:{type:"array",items:{type:"string"},optional:!0},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]},type:{type:"enum",optional:!0,values:["basic"]}}},showExport:"boolean|optional",showSearch:"boolean|optional"}),_=(new d.default).compile({columns:{optional:!0,type:"array",items:{type:"object",props:{header:"string",view:{type:"object",props:h}}}}}),w=(new d.default).compile({text:"string",format:"string"}),O=(new d.default).compile({text:"string"}),k=(new d.default).compile({text:"string",query:{type:"object",optional:!0,props:{collections:{type:"array",optional:!0,items:{type:"string"}},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]},type:{optional:!0,type:"enum",values:["basic"]}}}}),A=(new d.default).compile({name:"string|empty:false",family:"string|optional",size:"number|optional"}),S=(new d.default).compile({allowDeleteMessage:"boolean|optional",allowDeleteThread:"boolean|optional",allowGetBoardMembers:"boolean|optional",allowGetContacts:"boolean|optional",allowGetRoles:"boolean|optional",allowMembersUpdate:"boolean|optional",allowNewThread:"boolean|optional",allowQuickText:"boolean|optional",allowReply:"boolean|optional",canAddQuickText:"boolean|optional",canDeleteQuickText:"boolean|optional",canEditQuickText:"boolean|optional",canReply:"boolean|optional",canUploadAttachment:"boolean|optional",canUseQuickText:"boolean|optional",showMeta:"boolean|optional",showMetaDetail:"boolean|optional"}),R=(new d.default).compile({field:"string|optional",header:"string|optional",sortable:"boolean|optional"}),P=(new d.default).compile({css:"string|optional",html:"string",name:"string|empty:false"});function T(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.source);return(new d.default).compile({downloadCsvFile:"boolean",hideEmptyFields:"boolean",excerptContent:"boolean|optional",allowEdit:"boolean|optional",allowCopy:"boolean|optional",selectedFields:{type:"array",optional:!n,items:{type:"enum",values:this.getHippoFields(!0)}},showHippoFieldIcon:"boolean",showSearch:"boolean",showUpdateWith:"boolean",source:{type:"enum",values:["all","selected"]}})}function j(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.source);return(new d.default).compile({downloadCsvFile:"boolean|optional",hideEmptyFields:"boolean|optional",excerptContent:"boolean|optional",allowEdit:"boolean|optional",selectedFields:{type:"array",optional:!n,items:{type:"enum",values:this.getAppParameters(!0)}},showIcon:"boolean|optional",showSearch:"boolean|optional",source:{type:"enum",values:["all","selected"]}})}var L=(new d.default).compile({text:"string"});function I(){return(new d.default).compile({field:{type:"string"}})}function C(){var e,t,n,r;return(new d.default).compile({attachmentListId:{type:"string",label:"Source",optional:"attachment"!==(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.sourceType)},src:{type:"string",label:"Source",optional:"url"!==(null===(n=this.nodeJson)||void 0===n||null===(r=n.viewProps)||void 0===r?void 0:r.sourceType)}})}function M(){var e;return new d.default({useNewCustomCheckerFunction:!0}).compile({urlSource:{type:"enum",values:["current","custom"]},customUrl:{type:"string",optional:"current"===(null===(e=this.nodeJson.viewProps)||void 0===e?void 0:e.urlSource)},align:{type:"enum",values:["left","center","right"]},viewType:{type:"enum",values:["horizontal","floating"]},style:{type:"enum",values:["circle","square"]},size:{type:"enum",values:["small","medium","large"]},color:"string",message:{type:"string",messages:{required:"'Share Message' field is required."}},services:{type:"array",items:{type:"custom",props:{id:"string",message:"string|optional",media:{type:"custom",default:"[[[nullValue]]]"}},custom:function(e,t,n,r,o,i){if("pinterest"===(null==e?void 0:e.id)&&(null==e||!e.media)){var a=(Object.values(null==o?void 0:o.services)||[]).findIndex((function(e){return"pinterest"===(null==e?void 0:e.id)}));t.push({type:"required",field:"services[".concat(a,"].media"),message:"Media field required on Pinterest service."})}return e}}},title:"string|optional"})}var D=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"getValidatorFunction",value:function(){var e=[];switch(e.pushArray(v(this.nodeJson)),this.validatorPath="".concat(this.path,".viewProps"),this.nodeJson.type){case"attachmentList":e.pushArray(I.call(this)(this.nodeJson.viewProps||{}));break;case"image":e.pushArray(C.call(this)(this.nodeJson.viewProps||{}));break;case"formList":e.pushArray(y.call(this)(this.nodeJson.viewProps||{}));break;case"appList":e.pushArray(m.call(this)(this.nodeJson.viewProps||{}));break;case"header":e.pushArray(b(this.nodeJson.viewProps||{}));break;case"paragraph":e.pushArray(g.call(this)(this.nodeJson.viewProps||{}));break;case"hyperLink":e.pushArray(x(this.nodeJson.viewProps||{}));break;case"TrelloCardSharing":e.pushArray(E(this.nodeJson.viewProps||{}));break;case"table":e.pushArray(_(this.nodeJson.viewProps||{}));break;case"date":e.pushArray(w(this.nodeJson.viewProps||{}));break;case"menuItem":e.pushArray(O(this.nodeJson.viewProps||{}));break;case"cardMenuItem":e.pushArray(k(this.nodeJson.viewProps||{}));break;case"icon":e.pushArray(A(this.nodeJson.viewProps||{}));break;case"Conversation":e.pushArray(S(this.nodeJson.viewProps||{}));break;case"tableColumn":e.pushArray(R(this.nodeJson.viewProps||{}));break;case"snippet":e.pushArray(P(this.nodeJson.viewProps||{}));break;case"hippoFields":e.pushArray(T.call(this)(this.nodeJson.viewProps||{}));break;case"appVariables":e.pushArray(j.call(this)(this.nodeJson.viewProps||{}));break;case"label":e.pushArray(L(this.nodeJson.viewProps||{}));case"shareButton":e.pushArray(M.call(this)(this.nodeJson.viewProps||{}))}return e}},{key:"process",value:function(e,t,n){var r,o,i,a,l=this;this.id=n.id,null!=n&&null!==(r=n.viewProps)&&void 0!==r&&r.children&&this.addChildNode(new p.default(e,t+".viewProps.children"));var s=null==n||null===(o=n.viewProps)||void 0===o?void 0:o.events;s&&Object.entries(s).forEach((function(n){l.addChildNode(new c.default(e,t+".viewProps.events."+n[0]))})),null!=n&&null!==(i=n.accessRight)&&void 0!==i&&null!==(a=i.dataRule)&&void 0!==a&&a.conditions&&this.addChildNode(new f.default(e,"".concat(t,".accessRight.dataRule")))}}]),u}(u.default);t.default=D},5266:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(2746)),p=r(n(7799)),d=r(n(4504));var f=(new p.default).compile({id:"string"}),h=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){n.actionGroupId?this.addChildNode(new c.default(e,"app.actionGroups."+n.actionGroupId)):"string"==typeof n.action?this.addChildNode(new c.default(e,"app.actionGroups."+n.action)):this.addChildNode(new d.default(e,"".concat(this.path,".action"),!0))}},{key:"getValidatorFunction",value:function(){return f}}]),u}(u.default);t.default=h},8536:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7632));var p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r,o=this;null!=n&&n.enabled&&(null==n||null===(r=n.body)||void 0===r||r.rows.forEach((function(t,r){var i;null!=t&&null!==(i=t.columns)&&void 0!==i&&i.length&&(null==t||t.columns.forEach((function(t,i){var a;o.addChildNode(new c.default(e,"".concat(o.path,".body.rows.").concat(r,".columns.").concat(i,".element"),null==t||null===(a=t.element)||void 0===a?void 0:a.id,n))})))})))}},{key:"getValidatorFunction",value:function(){var e,t,n=this,r=this.getFormIds(!0,(function(e){var t;return"email"===(null==e?void 0:e.type)&&(null==e?void 0:e.id)!==(null==n||null===(t=n.nodeJson)||void 0===t?void 0:t.id)})).map((function(e){return null==e?void 0:e.email})),o=[];return null!==(e=this.nodeJson)&&void 0!==e&&e.enabled?((r||[]).includes(null==this||null===(t=this.nodeJson)||void 0===t?void 0:t.email)&&o.push({type:"unique",message:"Email must be unique"}),o):[]}}]),u}(u.default);t.default=p},7632:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9713)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(2746)),d=r(n(7799)),f=n(6009),h=r(n(4876)),v=r(n(4908));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(new d.default).compile({input:"string",id:"string|empty:false",props:{type:"object",props:{value:"string|optional",label:"string|optional",name:"string",settings:"any|optional"}}}),b=function(e){(0,l.default)(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function o(e,t,n,a){var l;return(0,i.default)(this,o),(l=r.call(this,e,t)).id=n,l.formJson=a,l}return(0,a.default)(o,[{key:"process",value:function(e,t,n){var r,o,i,a;if("Button"===(null==n?void 0:n.input)&&null!=n&&null!==(r=n.props)&&void 0!==r&&r["optional-actionGroupId"]){var l,s=null==n||null===(l=n.props)||void 0===l?void 0:l["optional-actionGroupId"];this.addChildNode(new p.default(e,"app.actionGroups."+s))}null!==(o=n.props)&&void 0!==o&&null!==(i=o.visibilityRules)&&void 0!==i&&null!==(a=i.rules)&&void 0!==a&&a.length&&this.addChildNode(new h.default(e,"".concat(this.path,".props.visibilityRules")))}},{key:"getValidatorFunction",value:function(){var e,t,n,r,o,i,a,l,s,u,c,p,h,y,b,x,E,_,w,O,k,A,S,R,P,T,j,L,I,C,M,D,N,V,F,B,J,U,Y,q,z,$,H,G,W,X,K,Z,Q,ee,te,ne,re=this,oe="updateform"===(null==this||null===(e=this.parentNode)||void 0===e||null===(t=e.nodeJson)||void 0===t?void 0:t.type)||(null==this||null===(n=this.parentNode)||void 0===n||null===(r=n.nodeJson)||void 0===r?void 0:r.usesParent),ie=this.parentNode.nodeJson.body.fieldMapping||{};for(var ae in ie){var le,se;"c_parentCardId"===(null===(le=ie[ae])||void 0===le||null===(se=le.cardField)||void 0===se?void 0:se.targetField)&&(oe=!0)}var ue=this.getTrelloList(!0,oe),ce=!1,pe=null==this||null===(o=this.parentNode)||void 0===o||null===(i=o.nodeJson)||void 0===i||null===(a=i.body)||void 0===a?void 0:a.fieldMapping;Object.values(pe||{}).forEach((function(e){var t;null!=e&&e.trelloCardField&&"name"===(null===(t=e.trelloCardField)||void 0===t?void 0:t.targetField)&&(ce=!0)}));var de={type:"object",optional:!0,props:{required:{type:"boolean",optional:!0},minLength:{type:"number",optional:!0,nullable:!0,min:0,max:null===(l=this.nodeJson)||void 0===l||null===(s=l.props)||void 0===s||null===(u=s.validationRules)||void 0===u?void 0:u.maxLength,label:"Min Length"},maxLength:{type:"number",optional:!0,nullable:!0,min:null===(c=this.nodeJson)||void 0===c||null===(p=c.props)||void 0===p||null===(h=p.validationRules)||void 0===h?void 0:h.minLength,label:"Max Length"},minItems:{type:"number",optional:!0,nullable:!0,min:0,max:null===(y=this.nodeJson)||void 0===y||null===(b=y.props)||void 0===b||null===(x=b.validationRules)||void 0===x?void 0:x.maxItems,label:"Min Items"},maxItems:{type:"number",optional:!0,nullable:!0,min:null===(E=this.nodeJson)||void 0===E||null===(_=E.props)||void 0===_||null===(w=_.validationRules)||void 0===w?void 0:w.minItems,label:"Max Items"}}},fe={"mandatory-action":{type:"object",optional:"updateform"===(null==this||null===(O=this.parentNode)||void 0===O||null===(k=O.nodeJson)||void 0===k?void 0:k.type),nullable:"updateform"===(null==this||null===(A=this.parentNode)||void 0===A||null===(S=A.nodeJson)||void 0===S?void 0:S.type),props:{type:{type:"enum",values:["create-card","update-card"]},variables:{type:"object",props:{cardCollection:{type:"string",optional:!0,nullable:!0},name:{type:"string",empty:!1,optional:ce,messages:{required:"Card Name is a required field"}},listHippoId:{type:"enum",values:ue},description:"string|optional"}}}}},he={label:"string",name:"string",schema:"object",settings:"object",validationRules:de,elementData:{type:"object",props:{include:{type:"object",props:{type:{type:"enum",values:["selected","all","variable"]},variable:{type:"string",optional:"variable"!==(null===(R=this.nodeJson)||void 0===R||null===(P=R.props)||void 0===P||null===(T=P.elementData)||void 0===T||null===(j=T.include)||void 0===j?void 0:j.type),label:"Variable"},selected:{type:"array",nullable:"selected"!==(null===(L=this.nodeJson)||void 0===L||null===(I=L.props)||void 0===I||null===(C=I.elementData)||void 0===C||null===(M=C.include)||void 0===M?void 0:M.type),optional:"selected"!==(null===(D=this.nodeJson)||void 0===D||null===(N=D.props)||void 0===N||null===(V=N.elementData)||void 0===V||null===(F=V.include)||void 0===F?void 0:F.type),minItems:1,messages:{required:"No label selected for Trello Label Selector"}}}},fields:"array"}}},ve={label:"string",name:"string",schema:"object",settings:"object",validationRules:de,allowAddUser:"boolean|optional",elementData:{type:"object",props:{userGroups:{type:"array",minItems:1,items:{type:"object",props:{type:{type:"enum",values:["hipporelloRole","consoleRoles","trelloRoles"]},id:"string"},custom:function(e,t){var n,r=re.getRoles(!0);return"hipporelloRole"===(null==e?void 0:e.type)&&(r.includes(null==e?void 0:e.id)||t.push({type:"enumValue",expected:null===(n=re.getRoles())||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name}))})),e}},messages:{required:"At least 1 group must be selected",minItems:"At least 1 group must be selected"}},creatingGroups:{optional:!(null!==(B=this.nodeJson)&&void 0!==B&&null!==(J=B.props)&&void 0!==J&&J.allowAddUser),type:"array",minItems:1,items:{type:"enum",values:this.getRoles(!0)},messages:{required:"At least 1 role must be selected for the user to be created.",minItems:"At least 1 role must be selected for the user to be created."}}}}},ye={label:"string",description:"string|optional",name:"string",schema:"object",validationRules:de,settings:{type:"object",props:{inputType:"string",noText:{type:"string",optional:"selectBox"!==(null===(U=this.nodeJson)||void 0===U||null===(Y=U.props)||void 0===Y||null===(q=Y.settings)||void 0===q?void 0:q.inputType),messages:{required:"The 'No' field is required."}},yesText:{type:"string",optional:"selectBox"!==(null===(z=this.nodeJson)||void 0===z||null===($=z.props)||void 0===$||null===(H=$.settings)||void 0===H?void 0:H.inputType),messages:{required:"The 'Yes' field is required."}},placeholder:"string|optional",descriptionSwitch:"boolean",defaultValue:"boolean|optional"}}},me=[],ge=[];if(me.pushArray(g(this.nodeJson)),(null===(G=this.nodeJson)||void 0===G?void 0:G.input)===f.FORM_INPUT_NAMES.BUTTON){var be,xe=(new d.default).compile(fe);ge.pushArray(xe(null===(be=this.nodeJson)||void 0===be?void 0:be.props))}if((null===(W=this.nodeJson)||void 0===W?void 0:W.input)===f.FORM_INPUT_NAMES.RADIO_BUTTON||(null===(X=this.nodeJson)||void 0===X?void 0:X.input)===f.FORM_INPUT_NAMES.MULTISELECTBOX||(null===(K=this.nodeJson)||void 0===K?void 0:K.input)===f.FORM_INPUT_NAMES.CHECKBOX||(null===(Z=this.nodeJson)||void 0===Z?void 0:Z.input)===f.FORM_INPUT_NAMES.SELECT_BOX){var Ee=(new d.default).compile({label:"string|optional",description:"string|optional",name:"string",schema:"object",validationRules:"object",settings:"object",data:{type:"array",items:{type:"object",props:{value:{type:"string",optional:!1,minLength:1,messages:{required:"Option cannot be empty"}}}}}});ge.pushArray(Ee(this.nodeJson.props))}if((null===(Q=this.nodeJson)||void 0===Q?void 0:Q.input)===f.FORM_INPUT_NAMES.TRELLO_LABEL_SELECTOR){var _e=(new d.default).compile(he);ge.pushArray(_e(this.nodeJson.props))}if((null===(ee=this.nodeJson)||void 0===ee?void 0:ee.input)===f.FORM_INPUT_NAMES.USER_SELECTOR){var we=new d.default({useNewCustomCheckerFunction:!0}).compile(ve);ge.pushArray(we(this.nodeJson.props))}if((null===(te=this.nodeJson)||void 0===te?void 0:te.input)===f.FORM_INPUT_NAMES.BOOLEAN){var Oe=(new d.default).compile(ye);ge.pushArray(Oe(this.nodeJson.props))}if([f.FORM_INPUT_NAMES.RADIO_BUTTON,f.FORM_INPUT_NAMES.SELECT_BOX,f.FORM_INPUT_NAMES.MULTISELECTBOX,f.FORM_INPUT_NAMES.CHECKBOX].includes(null===(ne=this.nodeJson)||void 0===ne?void 0:ne.input)){var ke,Ae,Se,Re=(null==this||null===(ke=this.nodeJson)||void 0===ke||null===(Ae=ke.props)||void 0===Ae||null===(Se=Ae.data)||void 0===Se?void 0:Se.map((function(e){return e.value})))||[];Re.length!==(0,v.default)(Re).length&&me.push({type:"uniqueValue",label:"Option values",actual:JSON.stringify(Re),field:"props.data"})}return ge=ge.map((function(e){return m(m({},e),{},{field:"props.".concat(null==e?void 0:e.field)})})),me.pushArray(ge),me}}]),o}(c.default);t.default=b},4876:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=n(7076),p=r(n(8328));var d=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(){return(0,o.default)(this,u),r.apply(this,arguments)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r,o=this;null!=n&&null!==(r=n.rules)&&void 0!==r&&r.length&&n.rules.map((function(t,n){o.addChildNode(new p.default(e,"".concat(o.path,".rules.").concat(n)))}))}},{key:"getValidatorFunction",value:function(){var e=[];return e.pushArray((0,c.formConditionsWithAnd)(null==this?void 0:this.nodeJson)),e}}]),u}(u.default);t.default=d},6946:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(9713)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(2954)),d=r(n(7799)),f=r(n(7632)),h=r(n(775)),v=r(n(6423));var y=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,i.default)(this,c),r.call(this,e,t)}return(0,a.default)(c,[{key:"process",value:function(e,t,n){var r=this;if(null!=n&&n.enabled){var o,i,a,l,s,u,c,d=(null===(o=n.body)||void 0===o?void 0:o.successViews)||{},y=Object.values(d||{});if(y&&"view"===(null==y||null===(i=y[0])||void 0===i||null===(a=i.props)||void 0===a?void 0:a.type)||"view"===(null==y||null===(l=y[0])||void 0===l?void 0:l.type)){var m,g,b,x=null==y||null===(m=y[0])||void 0===m||null===(g=m.props)||void 0===g||null===(b=g.view)||void 0===b?void 0:b.id;this.addChildNode(new p.default(e,"app.views."+x))}null!=n&&null!==(s=n.accessRight)&&void 0!==s&&null!==(u=s.dataRule)&&void 0!==u&&u.conditions&&this.addChildNode(new h.default(e,"".concat(t,".accessRight.dataRule"))),("update"===(null==n?void 0:n.type)||null!=n&&n.usesParent)&&this.addChildNode(new v.default(e,"".concat(t,".accessRight.dataRule"))),null==n||null===(c=n.body)||void 0===c||c.rows.forEach((function(t,o){var i;null!=t&&null!==(i=t.columns)&&void 0!==i&&i.length&&(null==t||t.columns.forEach((function(t,i){var a;r.addChildNode(new f.default(e,"".concat(r.path,".body.rows.").concat(o,".columns.").concat(i,".element"),null==t||null===(a=t.element)||void 0===a?void 0:a.id,n))})))}))}}},{key:"getValidatorFunction",value:function(){var e,t,n,r,i,a,l,s,u,c,p,f,h,v,y=this,m=this.getHippoFields(!0),g=(this.getCollections(),this.getFormIds(!0,(function(e){var t;return(null==e?void 0:e.id)!==(null==y||null===(t=y.nodeJson)||void 0===t?void 0:t.id)}))),b=null==g?void 0:g.map((function(e){return null==e?void 0:e.slug})),x=null===(e=this.childNodes)||void 0===e||null===(t=e.find((function(e){var t;return"Button"===(null===(t=e.nodeJson)||void 0===t?void 0:t.input)})))||void 0===t?void 0:t.nodeJson,E=null===(n=this.childNodes)||void 0===n?void 0:n.reduce((function(e,t){var n,r,o,i,a,l,s;return null!==(n=t.nodeJson)&&void 0!==n&&null!==(r=n.props)&&void 0!==r&&null!==(o=r.schema)&&void 0!==o&&o.type&&"Captcha"!==(null===(i=t.nodeJson)||void 0===i||null===(a=i.props)||void 0===a?void 0:a.name)?(e[null==t?void 0:t.id]={type:"object",label:null==t||null===(l=t.nodeJson)||void 0===l||null===(s=l.props)||void 0===s?void 0:s.label,props:{hippoField:{type:"object",optional:!0,props:{targetField:{type:"enum",values:m},operation:{type:"enum",values:["set"]}}},trelloCardField:{type:"object",optional:!0,props:{targetField:{type:"enum",values:["userselector","label","name","description","startDate","dueDate"]},operation:{type:"enum",values:["set","keepexcluded"]}}},trelloCardCustomField:{type:"object",optional:!0}}},e):e}),{});v="page"===(null===(r=this.nodeJson)||void 0===r||null===(i=r.body)||void 0===i||null===(a=i.successViews)||void 0===a||null===(l=a[null==x?void 0:x.id])||void 0===l?void 0:l.type)?{page:{type:"object",props:{url:{type:"custom",check:function(e,t){return null!==/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/.exec(e)?e:(t.push({type:"not valid",message:"External URL is not valid"}),"")}},target:{type:"enum",optional:!0,values:["_self","_blank"]}}}}:{view:{type:"object",props:{id:"string",target:{type:"object",props:{type:"string"}}}}};var _=new d.default({useNewCustomCheckerFunction:!0}).compile({id:"string|empty:false",anonymous:"boolean|optional",enabled:"boolean|optional",formatVersion:"number",icon:"string|empty:false",name:"string|empty:false",type:{type:"enum",values:["form","updateform"]},aliases:"array|optional",usesParent:"boolean|optional",slug:{type:"custom",check:function(e,t,n,r,o){return b.includes(e)&&t.push({type:"unique",message:"Form slug must be unique"}),e}},boardId:"string|optional|empty:false",showInTrello:"boolean|optional",body:{type:"object",props:{formAutoIncrementId:"number",readOnly:"boolean|optional",rows:{type:"array",min:2,messages:{arrayMin:"At least 1 element required to create form"},items:{type:"object",props:{id:"string",columns:{type:"array",items:{type:"object",props:{id:"string",element:{type:"object",props:{id:"string"}}}}}}}},successViews:{type:"object",props:(0,o.default)({},null==x?void 0:x.id,{type:"object",props:{id:"string|optional",type:{type:"enum",values:["page","view"]},props:{type:"object",props:v}}})},fieldMapping:null!=Object&&null!==(s=Object.keys(E))&&void 0!==s&&s.length?{type:"object",props:E}:{type:"object",optional:!0}}},submitter:{type:"object",optional:!0,props:{type:"string"}}}),w=[],O=(new d.default).compile({submitter:{type:"object",props:{type:"string",field:"string"}}});return"specifiedEmail"!==(null===(u=this.nodeJson)||void 0===u||null===(c=u.submitter)||void 0===c?void 0:c.type)||null!=this&&null!==(p=this.nodeJson)&&void 0!==p&&null!==(f=p.submitter)&&void 0!==f&&f.field||w.pushArray(O(this.nodeJson)),null!==(h=this.nodeJson)&&void 0!==h&&h.enabled&&(this.nodeJson.body.fieldMapping||(this.nodeJson.body.fieldMapping={}),w.pushArray(_(this.nodeJson))),w}}]),c}(c.default);t.default=y},8328:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(319)),i=r(n(4575)),a=r(n(3913)),l=r(n(6525)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),p=r(n(5584)),d=n(7076);var f=function(e){(0,s.default)(p,e);var t,n,r=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var o=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function p(e,t){return(0,i.default)(this,p),r.call(this,e,t)}return(0,a.default)(p,[{key:"process",value:function(e,t,n){(0,l.default)((0,c.default)(p.prototype),"process",this).call(this,e,t,n)}},{key:"getValidatorFunction",value:function(){var e=this,t=[];if(t.pushArray((0,d.formConditionRule)(null==this?void 0:this.nodeJson)),"select"===this.nodeJson.valueType&&Array.isArray(this.nodeJson.value)){var n,r=this.getFormElements(),o=null==r?void 0:r.find((function(t){return t.id===e.nodeJson.field}));if(null==o||null===(n=o.props)||void 0===n||!n.elementData){var i,a,l,s,u=null==o||null===(i=o.props)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.map((function(e){return e.value}));null===(l=this.nodeJson)||void 0===l||null===(s=l.value)||void 0===s||s.forEach((function(n){null!=u&&u.includes(n)||t.push(e.createValidationError("oneOf","value",e.nodeJson.value,u,u))}))}}return t}},{key:"getFormElements",value:function(){var e,t,n,r,i,a=null===(e=this.parentNode)||void 0===e||null===(t=e.parentNode)||void 0===t||null===(n=t.parentNode)||void 0===n?void 0:n.nodeJson;return null===(r=(null==a||null===(i=a.body)||void 0===i?void 0:i.rows)||[])||void 0===r?void 0:r.reduce((function(e,t){var n;return[].concat((0,o.default)(e),(0,o.default)(null==t||null===(n=t.columns)||void 0===n?void 0:n.map((function(e){return e.element}))))}),[])}}]),p}(p.default);t.default=f},2241:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7799)),p=n(8061);var d=(new c.default).compile({id:"string|empty:false",label:"string|empty:false",multiple:"boolean",resolveBy:{type:"enum",optional:!0,values:[p.RESOLVE_TYPES.RESOLVE_LIST_BY_HIPPO_ID,p.RESOLVE_TYPES.RESOLVE_LABEL_BY_HIPPO_ID,p.RESOLVE_TYPES.RESOLVE_MEMBER_BY_TRELLO_ID,p.RESOLVE_TYPES.RESOLVE_USER_BY_USER_ID,p.RESOLVE_TYPES.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,p.RESOLVE_TYPES.RESOLVE_CARD_BY_CARD_ID,p.RESOLVE_TYPES.RESOLVE_APP_BY_APP_ID]},type:{type:"enum",values:p.VARIABLE_TYPES}}),f=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return d}}]),u}(u.default);t.default=f},9305:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584));var c=(new(r(n(7799)).default)).compile({id:"string",name:"string"}),p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return c}}]),u}(u.default);t.default=p},887:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(8)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(9305)),d=r(n(4752));var f=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,i.default)(this,c),r.call(this,e,t)}return(0,a.default)(c,[{key:"process",value:function(e,t,n){var r=this,o=d.default.query(e,"app.roles");o&&(o=Object.values(o)).forEach((function(t){r.addChildNode(new p.default(e,"app.roles."+t.id))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,o.default)(this.nodeJson))return[this.createValidationError("object",null,(0,o.default)(this.nodeJson))]}},{key:"isMandatory",value:function(){return!1}}]),c}(c.default);t.default=f},8417:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(8)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(9049));r(n(4752));var d=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,i.default)(this,c),r.call(this,e,t)}return(0,a.default)(c,[{key:"process",value:function(e,t,n){var r=this,o=this.getAppParameters(!0);o&&o.forEach((function(t){r.addChildNode(new p.default(e,"app.fieldDefinitions.appVariableFields."+t))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,o.default)(this.nodeJson))return[this.createValidationError("object",null,(0,o.default)(this.nodeJson))]}}]),c}(c.default);t.default=d},9049:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7799)),p=n(8061);var d={id:"string",label:"string",multiple:"boolean",resolveBy:{type:"enum",optional:!0,values:[p.RESOLVE_TYPES.RESOLVE_LIST_BY_HIPPO_ID,p.RESOLVE_TYPES.RESOLVE_LABEL_BY_HIPPO_ID,p.RESOLVE_TYPES.RESOLVE_MEMBER_BY_TRELLO_ID,p.RESOLVE_TYPES.RESOLVE_USER_BY_USER_ID,p.RESOLVE_TYPES.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,p.RESOLVE_TYPES.RESOLVE_CARD_BY_CARD_ID,p.RESOLVE_TYPES.RESOLVE_APP_BY_APP_ID]},type:{type:"enum",values:p.VARIABLE_TYPES}},f=(new c.default).compile(d),h=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return f}}]),u}(u.default);t.default=h},4050:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7799));var p=(new c.default).compile({appViewSettings:{type:"object",props:{icon:{type:"object",props:{name:"string|optional",url:"string|optional",background:"string",iconSet:{type:"enum",values:["fontAwesome"]},type:{type:"enum",values:["image","icon"]}}}}},portalViewSettingOverrides:{type:"object",optional:!0,nullable:!0,props:{type:{type:"enum",values:["custom"]},css:{type:"object",optional:!0,props:{simple:{type:"object",props:{"body-text-color":"string|optional","font-family":"string|optional","primary-color":"string|optional"}}}},images:{type:"object",optional:!0,props:{banner:"string|optional",logo:"string|optional",socialShareImage:"string|optional"}}}}}),d=(new c.default).compile({url:{type:"string",messages:{required:"The 'Image' is required."}}}),f=(new c.default).compile({name:"string"}),h=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e=[],t=p(this.nodeJson);if(Array.isArray(t)&&e.pushArray(t),"image"===this.nodeJson.appViewSettings.icon.type){var n=d(this.nodeJson.appViewSettings.icon);Array.isArray(n)&&(this.validatorPath="".concat(this.path,".appViewSettings.icon"),e.pushArray(n))}else if("icon"===this.nodeJson.appViewSettings.icon.type){var r=f(this.nodeJson.appViewSettings.icon);Array.isArray(r)&&(this.validatorPath="".concat(this.path,".appViewSettings.icon"),e.pushArray(r))}return e}}]),u}(u.default);t.default=h},825:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(2205)),a=r(n(8585)),l=r(n(9754)),s=r(n(7845));var u=(new(r(n(7799)).default)).compile({enabled:"boolean",id:"string",type:"string"}),c=function(e){(0,i.default)(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var o=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.default)(this,e)});function s(e,t){var n;return(0,o.default)(this,s),(n=r.call(this,e,t)).getValidatorFunction=function(){var e,t,r=[],o=u(n.nodeJson);Array.isArray(o)&&r.pushArray(o);var i=n.getViewIds(!1,(function(e){var t,r,o;return null==e||null===(t=e.viewProps)||void 0===t||null===(r=t.environments)||void 0===r?void 0:r.includes(null===(o=n.nodeJson)||void 0===o?void 0:o.type)}));return null!=i&&i.length||r.push(n.createValidationError("required","views",n.nodeJson.views,null,null,"You must create at least one page for the Board View.")),null!==(e=n.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[n.nodeJson.home]||r.push(n.createValidationError("required","home",n.nodeJson.home,null,null,"One of the Board View pages should be the home page.")),function(){return r}},n}return s}(s.default);t.default=c},702:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(7845));var c=(new(r(n(7799)).default)).compile({enabled:"boolean",id:"string",type:"string"}),p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"getValidatorFunction",value:function(){var e,t,n=[],r=c(this.nodeJson);return Array.isArray(r)&&n.pushArray(r),!this.nodeJson.appHeader||null!==(e=this.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[this.nodeJson.appHeader]||n.push(this.createValidationError("oneOf","appHeader",this.nodeJson.appHeader,"Error Message")),function(){return n}}}]),u}(u.default);t.default=p},7041:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(8998));var p=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t,n){var i;return(0,o.default)(this,u),(i=r.call(this,e,t)).expression=n,i}return(0,i.default)(u,[{key:"process",value:function(e,t,n){}},{key:"findFieldByPath",value:function(){var e=this.getAccessibleFieldTypes(!1),t=this.expression.replace("[]",[]),n=(t=t.replace("Object.",".")).split(".").filter(Boolean),r=null,o=(null==n?void 0:n[0])||"";return n.forEach((function(t){null!=r&&(o=r.resolveBy?r.resolveBy+"."+t:r.id+"."+t);var n=null==e?void 0:e[o];n&&(null!=r&&null==(null==n?void 0:n.resolveBy)||(r=n))})),this.activeContext=r,r}},{key:"getRightValueEntityName",value:function(){var e;return this.getAccessibleFieldTypes(!1),null===(e=this.activeContext)||void 0===e?void 0:e.label}},{key:"getRightValues",value:function(){var e=this.findFieldByPath();return e.resolveBy===u.RESOLVE_LABEL_BY_HIPPO_ID?this.getTrelloLabels(!0):e.resolveBy===u.RESOLVE_LIST_BY_HIPPO_ID?this.getTrelloList(!0):e.resolveBy===u.RESOLVE_MEMBER_BY_TRELLO_ID?this.getTrelloMembers(!0):null}},{key:"getValidatorFunction",value:function(){var e=u.createJsonataExpression(this.expression),t=[],n=this.getAccessibleFieldTypes(!0),r=this.getAccessibleFieldTypes(!1),o=this,i=null,a=new Proxy({},{get:function(e,l){var s=["createLinkEnc","createLink","form."].some((function(e){return o.expression.includes(e)}));if(0===t.length&&"sequence"!==l&&!s){var u=l;null!=i&&(u=i.resolveBy?i.resolveBy+"."+u:i.id+"."+u);var c=null==r?void 0:r[u],p=null==n?void 0:n[u],d=(null==p?void 0:p.label)||"";c?null!=i&&null==c.resolveBy||(i=c):p?t.push({path:o.validatorPath,type:"invalidVariable",message:'The variable named **"'.concat(d,'"** has been deleted and is currently unavailable.'),args:[d,o.expression]}):t.push({path:o.validatorPath,type:"invalidVariable",message:"The variable used cannot be found. Please remove or replace.",args:[d,o.expression]})}return a}});try{e.evaluate(a)}catch(e){}return null!=t&&t.length&&console.log(t),t}}],[{key:"createJsonataExpression",value:function(e){var t=this.ALL_JSONATA_EXPRESSIONS[e];return null==t&&((t=(0,c.default)(e)).registerFunction("createLinkEnc",(function(){}),"<ssssssa:s>"),t.registerFunction("createLink",(function(){}),"<ssssssa:s>"),t.registerFunction("toString",(function(){}),"<s-a:s>"),this.ALL_JSONATA_EXPRESSIONS[e]=t),t}}]),u}(u.default);t.default=p,p.firstLevel={system:!0,portal:!0,user:!0,board:!0,card:!0,parentCard:!0,appParameters:!0},p.ALL_JSONATA_EXPRESSIONS={}},6282:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(4244));var p=(new(r(n(7799)).default)).compile({id:"string",view:{type:"object",optional:!0,props:{id:"string",children:"array|optional"}}}),d=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t,n,i){var a;return(0,o.default)(this,u),(a=r.call(this,e,t)).index=i,a.rootNode=n,a}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r=this,o=n.id;this.rootNode.childNodeRegistry[o]=this;var i="app.components."+o;this.addChildNode(new c.default(e,i)),null!=n&&n.children?n.children.forEach((function(n,o){r.addChildNode(new u(e,t+".children["+o+"]",r.rootNode,o))})):null!=n&&n.view?this.addChildNode(new u(e,t+".view",this.rootNode,0)):null!=n&&n.columns&&n.columns.forEach((function(n,o){r.addChildNode(new u(e,t+".columns["+o+"]",r.rootNode,o))}))}},{key:"getValidatorFunction",value:function(){var e,t,n,r,o=[],i=p(this.nodeJson);Array.isArray(i)&&o.pushArray(i);var a=null==this||null===(e=this.nodeJson)||void 0===e?void 0:e.id;return null!==(t=this.appJson)&&void 0!==t&&null!==(n=t.app)&&void 0!==n&&null!==(r=n.components)&&void 0!==r&&r[a]||o.push(this.createValidationError("oneOf","id",this.nodeJson.id)),o}}]),u}(u.default);t.default=d},103:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(8)),i=r(n(4575)),a=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),p=r(n(6282));var d=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){var n;return(0,i.default)(this,c),(n=r.call(this,e,t)).childNodeRegistry={},n}return(0,a.default)(c,[{key:"process",value:function(e,t,n){var r=this;n.forEach((function(n,o){r.addChildNode(new p.default(e,t+"["+o+"]",r,o))}))}},{key:"getValidatorFunction",value:function(){return Array.isArray(this.nodeJson)?null:[this.createValidationError("array",null,(0,o.default)(this.nodeJson),"array")]}}]),c}(c.default);t.default=d},1190:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103));var p=(new(r(n(7799)).default)).compile({id:"string",viewProps:{type:"object",props:{login:"boolean|optional",menu:"boolean|optional",logo:"boolean|optional"}}}),d=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r,o;null!=n&&null!==(r=n.viewProps)&&void 0!==r&&null!==(o=r.children)&&void 0!==o&&o.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}},{key:"getValidatorFunction",value:function(){return p}}]),u}(u.default);t.default=d},2954:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103)),p=r(n(7799)),d=r(n(775)),f=r(n(6423)),h=n(8061);var v=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"getValidatorFunction",value:function(){var e,t,n,r,o,i,a,l=this,s=!(null!==(e=this.nodeJson)&&void 0!==e&&null!==(t=e.viewProps)&&void 0!==t&&null!==(n=t.environments)&&void 0!==n&&n.length),u=this.getViewIds(!1,(function(e){var t;return(null==e?void 0:e.id)!==(null==l||null===(t=l.nodeJson)||void 0===t?void 0:t.id)})).map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.slug})),c=(new p.default).compile({enabled:"boolean",id:"string",viewProps:{type:"object",props:{name:"string",align:{type:"enum",values:["left","center","right"],optional:!0},cardAware:"boolean|optional",children:"array|optional",title:s?"string|optional":"string"}}}),d=new p.default({useNewCustomCheckerFunction:!0}).compile({viewProps:{type:"object",props:{slug:{type:"custom",check:function(e,t,n){return h.PAGE_SLUG_BLACKLIST.includes(e)?t.push({type:"notOneOf",label:"Page Slug",expected:h.PAGE_SLUG_BLACKLIST}):u.includes(e)&&t.push({type:"unique",message:"Page slug must be unique"}),e}}}}}),f=[],v=c(this.nodeJson);if(Array.isArray(v)&&f.pushArray(v),null!==(r=this.nodeJson)&&void 0!==r&&null!==(o=r.viewProps)&&void 0!==o&&null!==(i=o.environments)&&void 0!==i&&i.some((function(e){return["webView","trelloBoardView"].includes(e)}))){var y=d(this.nodeJson);f.pushArray(y)}return null!==(a=this.nodeJson)&&void 0!==a&&a.enabled?function(){return f}:function(){return[]}}},{key:"process",value:function(e,t,n){var r,o,i,a,l,s,u,p,h;this.env=(null===(r=n.viewProps)||void 0===r||null===(o=r.environments)||void 0===o?void 0:o[0])||"webView",null!=n&&null!==(i=n.accessRight)&&void 0!==i&&null!==(a=i.dataRule)&&void 0!==a&&a.conditions&&this.addChildNode(new d.default(e,"".concat(t,".accessRight.dataRule"))),null!=n&&null!==(l=n.viewProps)&&void 0!==l&&l.cardAware&&null!=n&&null!==(s=n.viewProps)&&void 0!==s&&null!==(u=s.environments)&&void 0!==u&&u.length&&this.addChildNode(new f.default(e,"".concat(t,".accessRight.dataRule"))),null!=n&&null!==(p=n.viewProps)&&void 0!==p&&null!==(h=p.children)&&void 0!==h&&h.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}}]),u}(u.default);t.default=v},4754:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103));var p=(new(r(n(7799)).default)).compile({id:"string",viewProps:{type:"object",props:{login:"boolean|optional",menu:"boolean|optional",logo:"boolean|optional"}}}),d=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r,o;null!=n&&null!==(r=n.viewProps)&&void 0!==r&&null!==(o=r.children)&&void 0!==o&&o.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}},{key:"getValidatorFunction",value:function(){return p}}]),u}(u.default);t.default=d},7845:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(3913)),a=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(2954)),p=r(n(1190)),d=(r(n(4752)),r(n(4754)));var f=function(e){(0,a.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var o=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,o.default)(this,u),r.call(this,e,t)}return(0,i.default)(u,[{key:"process",value:function(e,t,n){var r=this,o=n.type,i=n.appHeader,a=n.sidebar,l=this.getViewIds(!1);null!=l&&l.length&&l.forEach((function(t){null==t||!t.enabled||null!=t&&t.deleted?t.id===i?r.addChildNode(new p.default(e,"app.views."+t.id)):t.id===a&&r.addChildNode(new d.default(e,"app.views."+t.id)):"page"===t.type&&null!=t.viewProps.environments&&t.viewProps.environments.indexOf(o)>=0&&r.addChildNode(new c.default(e,"app.views."+t.id))}))}}]),u}(u.default);t.default=f},6474:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(4575)),i=r(n(2205)),a=r(n(8585)),l=r(n(9754)),s=r(n(7845));var u=(new(r(n(7799)).default)).compile({enabled:"boolean",id:"string",type:"string"}),c=function(e){(0,i.default)(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var o=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.default)(this,e)});function s(e,t){var n;return(0,o.default)(this,s),(n=r.call(this,e,t)).getValidatorFunction=function(){var e,t,r,o,i=[],a=u(n.nodeJson);return Array.isArray(a)&&i.pushArray(a),null!==(e=n.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[n.nodeJson.appHeader]||i.push(n.createValidationError("oneOf","appHeader",n.nodeJson.appHeader,"Errore Message")),null!==(r=n.appJson)&&void 0!==r&&null!==(o=r.app)&&void 0!==o&&o.views[n.nodeJson.home]||i.push(n.createValidationError("oneOf","home",n.nodeJson.home,"Errore Message")),function(){return i}},n}return s}(s.default);t.default=c},7799:function(e,t,n){"use strict";var r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.ISOLATE_POLYFILLS=!1,r.FORCE_POLYFILL_PROMISE=!1,r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},r.global=r.getGlobal(this),r.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),r.TRUST_ES6_POLYFILLS=!r.ISOLATE_POLYFILLS||r.IS_SYMBOL_NATIVE,r.polyfills={},r.propertyToPolyfillSymbol={},r.POLYFILL_PREFIX="$jscp$",r.polyfill=function(e,t,n,o){t&&(r.ISOLATE_POLYFILLS?r.polyfillIsolated(e,t,n,o):r.polyfillUnisolated(e,t,n,o))},r.polyfillUnisolated=function(e,t){var n=r.global;e=e.split(".");for(var o=0;o<e.length-1;o++){var i=e[o];if(!(i in n))return;n=n[i]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},r.polyfillIsolated=function(e,t,n){var o=e.split(".");e=1===o.length;var i=o[0];i=!e&&i in r.polyfills?r.polyfills:r.global;for(var a=0;a<o.length-1;a++){var l=o[a];if(!(l in i))return;i=i[l]}o=o[o.length-1],null!=(t=t(n=r.IS_SYMBOL_NATIVE&&"es6"===n?i[o]:null))&&(e?r.defineProperty(r.polyfills,o,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===r.propertyToPolyfillSymbol[o]&&(e=1e9*Math.random()>>>0,r.propertyToPolyfillSymbol[o]=r.IS_SYMBOL_NATIVE?r.global.Symbol(o):r.POLYFILL_PREFIX+e+"$"+o),r.defineProperty(i,r.propertyToPolyfillSymbol[o],{configurable:!0,writable:!0,value:t})))},r.initSymbol=function(){},r.polyfill("Symbol",(function(e){function t(e,t){this.$jscomp$symbol$id_=e,r.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.$jscomp$symbol$id_};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",o=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+o++,r)}}),"es6","es3"),r.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var o=r.global[t[n]];"function"==typeof o&&"function"!=typeof o.prototype[e]&&r.defineProperty(o.prototype,e,{configurable:!0,writable:!0,value:function(){return r.iteratorPrototype(r.arrayIteratorImpl(this))}})}return e}),"es6","es3"),r.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},r.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o},r.polyfill("Array.prototype.keys",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),r.polyfill("Array.prototype.values",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),r.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var o=n.length,i=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<i&&t<o;)if(n[t++]!=e[a++])return!1;return a>=i}}),"es6","es3"),r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.assign=r.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(o)for(var i in o)r.owns(o,i)&&(e[i]=o[i])}return e},r.polyfill("Object.assign",(function(e){return e||r.assign}),"es6","es3"),r.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new r.global.Proxy(e,{get:function(n,r,o){return n==e&&"q"==r&&o==t}}));return!0===t.q}catch(e){return!1}},r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,r.ES6_CONFORMANCE=r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&r.checkEs6ConformanceViaProxy(),r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.polyfill("WeakMap",(function(e){function t(e){if(this.id_=(s+=Math.random()+1).toString(),e){e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function o(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function i(e){if(!r.owns(e,l)){var t=new n;r.defineProperty(e,l,{value:t})}}function a(e){if(!r.ISOLATE_POLYFILLS){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&i(e),t(e))})}}if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var l="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var s=0;return t.prototype.set=function(e,t){if(!o(e))throw Error("Invalid WeakMap key");if(i(e),!r.owns(e,l))throw Error("WeakMap key fail: "+e);return e[l][this.id_]=t,this},t.prototype.get=function(e){return o(e)&&r.owns(e,l)?e[l][this.id_]:void 0},t.prototype.has=function(e){return o(e)&&r.owns(e,l)&&r.owns(e[l],this.id_)},t.prototype.delete=function(e){return!!(o(e)&&r.owns(e,l)&&r.owns(e[l],this.id_))&&delete e[l][this.id_]},t}),"es6","es3"),r.MapEntry=function(){},r.polyfill("Map",(function(e){function t(){var e={};return e.previous=e.next=e.head=e}function n(e,t){var n=e.head_;return r.iteratorPrototype((function(){if(n){for(;n.head!=e.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function o(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++l,a.set(t,n)):n="p_"+t;var o=e.data_[n];if(o&&r.owns(e.data_,n))for(e=0;e<o.length;e++){var i=o[e];if(t!=t&&i.key!=i.key||t===i.key)return{id:n,list:o,index:e,entry:i}}return{id:n,list:o,index:-1,entry:void 0}}function i(e){if(this.data_={},this.head_=t(),this.size=0,e){e=r.makeIterator(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(r.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(r.makeIterator([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var o=n.entries(),i=o.next();return!i.done&&i.value[0]==t&&"s"==i.value[1]&&!((i=o.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!o.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;i.prototype.set=function(e,t){var n=o(this,e=0===e?0:e);return n.list||(n.list=this.data_[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},n.list.push(n.entry),this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++),this},i.prototype.delete=function(e){return!(!(e=o(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,0))},i.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=t(),this.size=0},i.prototype.has=function(e){return!!o(this,e).entry},i.prototype.get=function(e){return(e=o(this,e).entry)&&e.value},i.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},i.prototype.keys=function(){return n(this,(function(e){return e.key}))},i.prototype.values=function(){return n(this,(function(e){return e.value}))},i.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var l=0;return i}),"es6","es3"),r.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var o=e.length;0<o&&0<t;)if(n[--t]!=e[--o])return!1;return 0>=o}}),"es6","es3"),r.polyfill("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),"es6","es3"),r.polyfill("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)r.owns(e,t)&&n.push([t,e[t]]);return n}}),"es8","es3"),e.exports=function(){function e(e){if(this.opts={},this.defaults={},this.messages=Object.assign({},P),this.rules={any:O,array:w,boolean:_,class:E,custom:x,currency:b,date:g,email:m,enum:y,equal:v,forbidden:h,function:f,multi:d,number:p,object:c,objectID:u,record:s,string:l,tuple:a,url:i,uuid:o,mac:r,luhn:n},this.aliases={},this.cache=new Map,e){if(A(this.opts,e),e.defaults&&A(this.defaults,e.defaults),e.messages)for(var k in e.messages)this.addMessage(k,e.messages[k]);if(e.aliases)for(var S in e.aliases)this.alias(S,e.aliases[S]);if(e.customRules)for(var R in e.customRules)this.add(R,e.customRules[R]);if(e.plugins){if(e=e.plugins,!Array.isArray(e))throw Error("Plugins type must be array");e.forEach(this.plugin.bind(this))}this.opts.debug&&(e=function(e){return e},"undefined"==typeof window&&(e=t),this._formatter=e)}}function t(e){return T||(T=R(),j={parser:"babel",useTabs:!1,printWidth:120,trailingComma:"none",tabWidth:4,singleQuote:!1,semi:!0,bracketSpacing:!0},L=R(),I={language:"js",theme:L.fromJson({keyword:["white","bold"],built_in:"magenta",literal:"cyan",number:"magenta",regexp:"red",string:["yellow","bold"],symbol:"plain",class:"blue",attr:"plain",function:["white","bold"],title:"plain",params:"green",comment:"grey"})}),e=T.format(e,j),L.highlight(e,I)}function n(e){return e.schema,e=e.messages,{source:'\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+'\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (typeof value !== "string")\n\t\t\t\tvalue = String(value);\n\n\t\t\tval = value.replace(/\\D+/g, "");\n\n\t\t\tvar array = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9];\n\t\t\tvar len = val ? val.length : 0,\n\t\t\t\tbit = 1,\n\t\t\t\tsum = 0;\n\t\t\twhile (len--) {\n\t\t\t\tsum += !(bit ^= 1) ? parseInt(val[len], 10) : array[val[len]];\n\t\t\t}\n\n\t\t\tif (!(sum % 10 === 0 && sum > 0)) {\n\t\t\t\t'+this.makeError({type:"luhn",actual:"value",messages:e})+"\n\t\t\t}\n\n\t\t\treturn value;\n\t\t"}}function r(e){return e.schema,e=e.messages,{source:'\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar v = value.toLowerCase();\n\t\t\tif (!"+$.toString()+".test(v)) {\n\t\t\t\t"+this.makeError({type:"mac",actual:"value",messages:e})+"\n\t\t\t}\n\t\t\t\n\t\t\treturn value;\n\t\t"}}function o(e){var t=e.schema;e=e.messages;var n=[];return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar val = value.toLowerCase();\n\t\tif (!"+z.toString()+".test(val)) {\n\t\t\t"+this.makeError({type:"uuid",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tconst version = val.charAt(14) | 0;\n\t"),7>parseInt(t.version)&&n.push("\n\t\t\tif ("+t.version+" !== version) {\n\t\t\t\t"+this.makeError({type:"uuidVersion",expected:t.version,actual:"version",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),n.push('\n\t\tswitch (version) {\n\t\tcase 0:\n\t\tcase 1:\n\t\tcase 2:\n\t\tcase 6:\n\t\t\tbreak;\n\t\tcase 3:\n\t\tcase 4:\n\t\tcase 5:\n\t\t\tif (["8", "9", "a", "b"].indexOf(val.charAt(19)) === -1) {\n\t\t\t\t'+this.makeError({type:"uuid",actual:"value",messages:e})+"\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function i(e){var t=e.schema;e=e.messages;var n=[];return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),t.empty?n.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):n.push("\n\t\t\tif (value.length === 0) {\n\t\t\t\t"+this.makeError({type:"urlEmpty",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),n.push("\n\t\tif (!"+q.toString()+".test(value)) {\n\t\t\t"+this.makeError({type:"url",actual:"value",messages:e})+"\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function a(e,t,n){var r=e.schema,o=e.messages;if(e=[],null!=r.items){if(!Array.isArray(r.items))throw Error("Invalid '"+r.type+"' schema. The 'items' field must be an array.");if(0===r.items.length)throw Error("Invalid '"+r.type+"' schema. The 'items' field must not be an empty array.")}if(e.push("\n\t\tif (!Array.isArray(value)) {\n\t\t\t"+this.makeError({type:"tuple",actual:"value",messages:o})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t"),!1===r.empty&&e.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"tupleEmpty",actual:"value",messages:o})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),null!=r.items){for(e.push("\n\t\t\tif ("+r.empty+" !== false && len === 0) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (len !== "+r.items.length+") {\n\t\t\t\t"+this.makeError({type:"tupleLength",expected:r.items.length,actual:"len",messages:o})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),e.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t"),o=0;o<r.items.length;o++){e.push("\n\t\t\tvalue = arr["+o+"];\n\t\t");var i=t+"["+o+"]",a=this.getRuleFromSchema(r.items[o]);e.push(this.compileRule(a,n,i,"\n\t\t\tarr["+o+"] = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](arr["+o+'], (parentField ? parentField : "") + "[" + '+o+' + "]", parent, errors, context);\n\t\t',"arr["+o+"]"))}e.push("\n\t\treturn arr;\n\t")}else e.push("\n\t\treturn value;\n\t");return{source:e.join("\n")}}function l(e){var t=e.schema;e=e.messages;var n=[],r=!1;if(!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "string") {\n\t\t\t\tvalue = String(value);\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar origValue = value;\n\t"),t.trim&&(r=!0,n.push("\n\t\t\tvalue = value.trim();\n\t\t")),t.trimLeft&&(r=!0,n.push("\n\t\t\tvalue = value.trimLeft();\n\t\t")),t.trimRight&&(r=!0,n.push("\n\t\t\tvalue = value.trimRight();\n\t\t")),t.padStart&&(r=!0,n.push("\n\t\t\tvalue = value.padStart("+t.padStart+", "+JSON.stringify(null!=t.padChar?t.padChar:" ")+");\n\t\t")),t.padEnd&&(r=!0,n.push("\n\t\t\tvalue = value.padEnd("+t.padEnd+", "+JSON.stringify(null!=t.padChar?t.padChar:" ")+");\n\t\t")),t.lowercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLowerCase();\n\t\t")),t.uppercase&&(r=!0,n.push("\n\t\t\tvalue = value.toUpperCase();\n\t\t")),t.localeLowercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLocaleLowerCase();\n\t\t")),t.localeUppercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLocaleUpperCase();\n\t\t")),n.push("\n\t\t\tvar len = value.length;\n\t"),!1===t.empty?n.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"stringEmpty",actual:"value",messages:e})+"\n\t\t\t}\n\t\t"):!0===t.empty&&n.push("\n\t\t\tif (len === 0) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),null!=t.min&&n.push("\n\t\t\tif (len < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"stringMin",expected:t.min,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (len > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"stringMax",expected:t.max,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.length&&n.push("\n\t\t\tif (len !== "+t.length+") {\n\t\t\t\t"+this.makeError({type:"stringLength",expected:t.length,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.pattern){var o=t.pattern;"string"==typeof t.pattern&&(o=new RegExp(t.pattern,t.patternFlags)),n.push("\n\t\t\tif (!"+o.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringPattern",expected:'"'+o.toString().replace(/"/g,"\\$&")+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t")}return null!=t.contains&&n.push('\n\t\t\tif (value.indexOf("'+t.contains+'") === -1) {\n\t\t\t\t'+this.makeError({type:"stringContains",expected:'"'+t.contains+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.enum&&(o=JSON.stringify(t.enum),n.push("\n\t\t\tif ("+o+".indexOf(value) === -1) {\n\t\t\t\t"+this.makeError({type:"stringEnum",expected:'"'+t.enum.join(", ")+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t")),!0===t.numeric&&n.push("\n\t\t\tif (!"+V.toString()+".test(value) ) {\n\t\t\t\t"+this.makeError({type:"stringNumeric",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alpha&&n.push("\n\t\t\tif(!"+F.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlpha",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alphanum&&n.push("\n\t\t\tif(!"+B.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlphanum",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alphadash&&n.push("\n\t\t\tif(!"+J.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlphadash",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.hex&&n.push("\n\t\t\tif(value.length % 2 !== 0 || !"+U.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringHex",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.singleLine&&n.push('\n\t\t\tif(value.includes("\\n")) {\n\t\t\t\t'+this.makeError({type:"stringSingleLine",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.base64&&n.push("\n\t\t\tif(!"+Y.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringBase64",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function s(e,t,n){var r=e.schema,o=[];for(var i in o.push('\n\t\tif (typeof value !== "object" || value === null || Array.isArray(value)) {\n\t\t\t'+this.makeError({type:"record",actual:"value",messages:e.messages})+"\n\t\t\treturn value;\n\t\t}\n\t"),e=r.key||"string",r=r.value||"any",o.push("\n\t\tconst record = value;\n\t\tlet sanitizedKey, sanitizedValue;\n\t\tconst result = {};\n\t\tfor (let key in value) {\n\t"),o.push("sanitizedKey = value = key;"),(e=this.getRuleFromSchema(e)).messages)i.startsWith("string")&&(e.messages[i]=e.messages[i].replace(" field "," key "));return o.push(this.compileRule(e,n,null,"\n\t\tsanitizedKey = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](key, field ? field + "." + key : key, record, errors, context);\n\t',"sanitizedKey")),o.push("sanitizedValue = value = record[key];"),i=this.getRuleFromSchema(r),o.push(this.compileRule(i,n,t+"[key]","\n\t\tsanitizedValue = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](value, field ? field + "." + key : key, record, errors, context);\n\t',"sanitizedValue")),o.push("result[sanitizedKey] = sanitizedValue;"),o.push("\n\t\t}\n\t"),o.push("return result;"),{source:o.join("\n")}}function u(e,t,n){t=e.schema;var r=e.messages;e=e.index;var o=[];return n.customs[e]?n.customs[e].schema=t:n.customs[e]={schema:t},o.push("\n\t\tconst ObjectID = context.customs["+e+"].schema.ObjectID;\n\t\tif (!ObjectID.isValid(value)) {\n\t\t\t"+this.makeError({type:"objectID",actual:"value",messages:r})+"\n\t\t\treturn;\n\t\t}\n\t"),!0===t.convert?o.push("return new ObjectID(value)"):"hexString"===t.convert?o.push("return value.toString()"):o.push("return value"),{source:o.join("\n")}}function c(e,t,n){var r=e.schema;e=e.messages;var o=[];o.push('\n\t\tif (typeof value !== "object" || value === null || Array.isArray(value)) {\n\t\t\t'+this.makeError({type:"object",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t");var i=r.properties||r.props;if(i){o.push("var parentObj = value;"),o.push("var parentField = field;");for(var a=Object.keys(i),l=0;l<a.length;l++){var s=a[l],u=S(s),c=D.test(u)?"."+u:"['"+u+"']",p="parentObj"+c,d=(t?t+".":"")+s,f=i[s].label;f=f?"'"+S(f)+"'":void 0,o.push("\n// Field: "+S(d)),o.push('field = parentField ? parentField + "'+c+'" : "'+u+'";'),o.push("value = "+p+";"),o.push("label = "+f),s=this.getRuleFromSchema(i[s]),o.push(this.compileRule(s,n,d,"\n\t\t\t\t"+p+" = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](value, field, parentObj, errors, context, label);\n\t\t\t",p)),!0===this.opts.haltOnFirstError&&o.push("if (errors.length) return parentObj;")}r.strict&&(t=Object.keys(i),o.push("\n\t\t\t\tfield = parentField;\n\t\t\t\tvar invalidProps = [];\n\t\t\t\tvar props = Object.keys(parentObj);\n\n\t\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\t\tif ("+JSON.stringify(t)+".indexOf(props[i]) === -1) {\n\t\t\t\t\t\tinvalidProps.push(props[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (invalidProps.length) {\n\t\t\t"),"remove"===r.strict?(o.push("\n\t\t\t\t\tif (errors.length === 0) {\n\t\t\t\t"),o.push("\n\t\t\t\t\t\tinvalidProps.forEach(function(field) {\n\t\t\t\t\t\t\tdelete parentObj[field];\n\t\t\t\t\t\t});\n\t\t\t\t"),o.push("\n\t\t\t\t\t}\n\t\t\t\t")):o.push("\n\t\t\t\t\t"+this.makeError({type:"objectStrict",expected:'"'+t.join(", ")+'"',actual:"invalidProps.join(', ')",messages:e})+"\n\t\t\t\t"),o.push("\n\t\t\t\t}\n\t\t\t"))}return null==r.minProps&&null==r.maxProps||(r.strict?o.push("\n\t\t\t\tprops = Object.keys("+(i?"parentObj":"value")+");\n\t\t\t"):o.push("\n\t\t\t\tvar props = Object.keys("+(i?"parentObj":"value")+");\n\t\t\t\t"+(i?"field = parentField;":"")+"\n\t\t\t")),null!=r.minProps&&o.push("\n\t\t\tif (props.length < "+r.minProps+") {\n\t\t\t\t"+this.makeError({type:"objectMinProps",expected:r.minProps,actual:"props.length",messages:e})+"\n\t\t\t}\n\t\t"),null!=r.maxProps&&o.push("\n\t\t\tif (props.length > "+r.maxProps+") {\n\t\t\t\t"+this.makeError({type:"objectMaxProps",expected:r.maxProps,actual:"props.length",messages:e})+"\n\t\t\t}\n\t\t"),i?o.push("\n\t\t\treturn parentObj;\n\t\t"):o.push("\n\t\t\treturn value;\n\t\t"),{source:o.join("\n")}}function p(e){var t=e.schema;e=e.messages;var n=[];n.push("\n\t\tvar origValue = value;\n\t");var r=!1;return!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "number") {\n\t\t\t\tvalue = Number(value);\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "number" || isNaN(value) || !isFinite(value)) {\n\t\t\t'+this.makeError({type:"number",actual:"origValue",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),null!=t.min&&n.push("\n\t\t\tif (value < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"numberMin",expected:t.min,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (value > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"numberMax",expected:t.max,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.equal&&n.push("\n\t\t\tif (value !== "+t.equal+") {\n\t\t\t\t"+this.makeError({type:"numberEqual",expected:t.equal,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.notEqual&&n.push("\n\t\t\tif (value === "+t.notEqual+") {\n\t\t\t\t"+this.makeError({type:"numberNotEqual",expected:t.notEqual,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.integer&&n.push("\n\t\t\tif (value % 1 !== 0) {\n\t\t\t\t"+this.makeError({type:"numberInteger",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.positive&&n.push("\n\t\t\tif (value <= 0) {\n\t\t\t\t"+this.makeError({type:"numberPositive",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.negative&&n.push("\n\t\t\tif (value >= 0) {\n\t\t\t\t"+this.makeError({type:"numberNegative",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function d(e,t,n){var r=e.schema;e.messages,(e=[]).push("\n\t\tvar hasValid = false;\n\t\tvar newVal = value;\n\t\tvar checkErrors = [];\n\t\tvar errorsSize = errors.length;\n\t");for(var o=0;o<r.rules.length;o++){e.push("\n\t\t\tif (!hasValid) {\n\t\t\t\tvar _errors = [];\n\t\t");var i=this.getRuleFromSchema(r.rules[o]);e.push(this.compileRule(i,n,t,"var tmpVal = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](value, field, parent, _errors, context);","tmpVal")),e.push("\n\t\t\t\tif (errors.length == errorsSize && _errors.length == 0) {\n\t\t\t\t\thasValid = true;\n\t\t\t\t\tnewVal = tmpVal;\n\t\t\t\t} else {\n\t\t\t\t\tArray.prototype.push.apply(checkErrors, [].concat(_errors, errors.splice(errorsSize)));\n\t\t\t\t}\n\t\t\t}\n\t\t")}return e.push("\n\t\tif (!hasValid) {\n\t\t\tArray.prototype.push.apply(errors, checkErrors);\n\t\t}\n\n\t\treturn newVal;\n\t"),{source:e.join("\n")}}function f(e){return e.schema,{source:'\n\t\t\tif (typeof value !== "function")\n\t\t\t\t'+this.makeError({type:"function",actual:"value",messages:e.messages})+"\n\n\t\t\treturn value;\n\t\t"}}function h(e){var t=e.schema;e=e.messages;var n=[];return n.push("\n\t\tif (value !== null && value !== undefined) {\n\t"),t.remove?n.push("\n\t\t\treturn undefined;\n\t\t"):n.push("\n\t\t\t"+this.makeError({type:"forbidden",actual:"value",messages:e})+"\n\t\t"),n.push("\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function v(e){var t=e.schema;e=e.messages;var n=[];return t.field?(t.strict?n.push('\n\t\t\t\tif (value !== parent["'+t.field+'"])\n\t\t\t'):n.push('\n\t\t\t\tif (value != parent["'+t.field+'"])\n\t\t\t'),n.push("\n\t\t\t\t"+this.makeError({type:"equalField",actual:"value",expected:JSON.stringify(t.field),messages:e})+"\n\t\t")):(t.strict?n.push("\n\t\t\t\tif (value !== "+JSON.stringify(t.value)+")\n\t\t\t"):n.push("\n\t\t\t\tif (value != "+JSON.stringify(t.value)+")\n\t\t\t"),n.push("\n\t\t\t\t"+this.makeError({type:"equalValue",actual:"value",expected:JSON.stringify(t.value),messages:e})+"\n\t\t")),n.push("\n\t\treturn value;\n\t"),{source:n.join("\n")}}function y(e){var t=e.schema;return e=e.messages,{source:"\n\t\t\tif ("+JSON.stringify(t.values||[])+".indexOf(value) === -1)\n\t\t\t\t"+this.makeError({type:"enumValue",expected:'"'+t.values.join(", ")+'"',actual:"value",messages:e})+"\n\t\t\t\n\t\t\treturn value;\n\t\t"}}function m(e){var t=e.schema;e=e.messages;var n=[],r="precise"==t.mode?C:M,o=!1;return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),t.empty?n.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):n.push("\n\t\t\tif (value.length === 0) {\n\t\t\t\t"+this.makeError({type:"emailEmpty",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),t.normalize&&(o=!0,n.push("\n\t\t\tvalue = value.trim().toLowerCase();\n\t\t")),null!=t.min&&n.push("\n\t\t\tif (value.length < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"emailMin",expected:t.min,actual:"value.length",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (value.length > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"emailMax",expected:t.max,actual:"value.length",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\tif (!"+r.toString()+".test(value)) {\n\t\t\t"+this.makeError({type:"email",actual:"value",messages:e})+"\n\t\t}\n\n\t\treturn value;\n\t"),{sanitized:o,source:n.join("\n")}}function g(e){var t=e.schema;e=e.messages;var n=[],r=!1;return n.push("\n\t\tvar origValue = value;\n\t"),!0===t.convert&&(r=!0,n.push("\n\t\t\tif (!(value instanceof Date)) {\n\t\t\t\tvalue = new Date(value.length && !isNaN(+value) ? +value : value);\n\t\t\t}\n\t\t")),n.push("\n\t\tif (!(value instanceof Date) || isNaN(value.getTime()))\n\t\t\t"+this.makeError({type:"date",actual:"origValue",messages:e})+"\n\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function b(e){var t=e.schema;e=e.messages;var n=t.currencySymbol||null,r=t.thousandSeparator||",",o=t.decimalSeparator||".",i=t.customRegex;return t=!t.symbolOptional,t="(?=.*\\d)^(-?~1|~1-?)(([0-9]\\d{0,2}(~2\\d{3})*)|0)?(\\~3\\d{1,2})?$".replace(/~1/g,n?"\\"+n+(t?"":"?"):"").replace("~2",r).replace("~3",o),(n=[]).push("\n\t\tif (!value.match("+(i||new RegExp(t))+")) {\n\t\t\t"+this.makeError({type:"currency",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function x(e,t,n){var r=[];return r.push("\n\t\t"+this.makeCustomValidator({fnName:"check",path:t,schema:e.schema,messages:e.messages,context:n,ruleIndex:e.index})+"\n\t\treturn value;\n\t"),{source:r.join("\n")}}function E(e,t,n){t=e.schema;var r=e.messages;e=e.index;var o=[],i=t.instanceOf.name?t.instanceOf.name:"<UnknowClass>";return n.customs[e]?n.customs[e].schema=t:n.customs[e]={schema:t},o.push("\n\t\tif (!(value instanceof context.customs["+e+"].schema.instanceOf))\n\t\t\t"+this.makeError({type:"classInstanceOf",actual:"value",expected:"'"+i+"'",messages:r})+"\n\t"),o.push("\n\t\treturn value;\n\t"),{source:o.join("\n")}}function _(e){var t=e.schema;e=e.messages;var n=[],r=!1;return n.push("\n\t\tvar origValue = value;\n\t"),!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "boolean") {\n\t\t\t\tif (\n\t\t\t\tvalue === 1\n\t\t\t\t|| value === "true"\n\t\t\t\t|| value === "1"\n\t\t\t\t|| value === "on"\n\t\t\t\t) {\n\t\t\t\t\tvalue = true;\n\t\t\t\t} else if (\n\t\t\t\tvalue === 0\n\t\t\t\t|| value === "false"\n\t\t\t\t|| value === "0"\n\t\t\t\t|| value === "off"\n\t\t\t\t) {\n\t\t\t\t\tvalue = false;\n\t\t\t\t}\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "boolean") {\n\t\t\t'+this.makeError({type:"boolean",actual:"origValue",messages:e})+"\n\t\t}\n\t\t\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function w(e,t,n){var r=e.schema,o=e.messages;if((e=[]).push("\n\t\tif (!Array.isArray(value)) {\n\t\t\t"+this.makeError({type:"array",actual:"value",messages:o})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t"),!1===r.empty&&e.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"arrayEmpty",actual:"value",messages:o})+"\n\t\t\t}\n\t\t"),null!=r.min&&e.push("\n\t\t\tif (len < "+r.min+") {\n\t\t\t\t"+this.makeError({type:"arrayMin",expected:r.min,actual:"len",messages:o})+"\n\t\t\t}\n\t\t"),null!=r.max&&e.push("\n\t\t\tif (len > "+r.max+") {\n\t\t\t\t"+this.makeError({type:"arrayMax",expected:r.max,actual:"len",messages:o})+"\n\t\t\t}\n\t\t"),null!=r.length&&e.push("\n\t\t\tif (len !== "+r.length+") {\n\t\t\t\t"+this.makeError({type:"arrayLength",expected:r.length,actual:"len",messages:o})+"\n\t\t\t}\n\t\t"),null!=r.contains&&e.push("\n\t\t\tif (value.indexOf("+JSON.stringify(r.contains)+") === -1) {\n\t\t\t\t"+this.makeError({type:"arrayContains",expected:JSON.stringify(r.contains),actual:"value",messages:o})+"\n\t\t\t}\n\t\t"),!0===r.unique&&e.push("\n\t\t\tif(len > (new Set(value)).size) {\n\t\t\t\t"+this.makeError({type:"arrayUnique",expected:"Array.from(new Set(value.filter((item, index) => value.indexOf(item) !== index)))",actual:"value",messages:o})+"\n\t\t\t}\n\t\t"),null!=r.enum){var i=JSON.stringify(r.enum);e.push("\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tif ("+i+".indexOf(value[i]) === -1) {\n\t\t\t\t\t"+this.makeError({type:"arrayEnum",expected:'"'+r.enum.join(", ")+'"',actual:"value[i]",messages:o})+"\n\t\t\t\t}\n\t\t\t}\n\t\t")}return null!=r.items?(e.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tvalue = arr[i];\n\t\t"),t+="[]",r=this.getRuleFromSchema(r.items),e.push(this.compileRule(r,n,t,"arr[i] = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](arr[i], (parentField ? parentField : "") + "[" + i + "]", parent, errors, context)',"arr[i]")),e.push("\n\t\t\t}\n\t\t"),e.push("\n\t\treturn arr;\n\t")):e.push("\n\t\treturn value;\n\t"),{source:e.join("\n")}}function O(){var e=[];return e.push("\n\t\treturn value;\n\t"),{source:e.join("\n")}}function k(e,t,n){return e.replace(t,null==n?"":"function"==typeof n.toString?n:typeof n)}function A(e,t,n){for(var r in void 0===n&&(n={}),t){var o=t[r];(o="object"==typeof o&&!Array.isArray(o)&&null!=o&&0<Object.keys(o).length)?(e[r]=e[r]||{},A(e[r],t[r],n)):!0===n.skipIfExist&&void 0!==e[r]||(e[r]=t[r])}return e}function S(e){return e.replace(N,(function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}function R(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var P={required:"The '{field}' field is required.",string:"The '{field}' field must be a string.",stringEmpty:"The '{field}' field must not be empty.",stringMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",stringMax:"The '{field}' field length must be less than or equal to {expected} characters long.",stringLength:"The '{field}' field length must be {expected} characters long.",stringPattern:"The '{field}' field fails to match the required pattern.",stringContains:"The '{field}' field must contain the '{expected}' text.",stringEnum:"The '{field}' field does not match any of the allowed values.",stringNumeric:"The '{field}' field must be a numeric string.",stringAlpha:"The '{field}' field must be an alphabetic string.",stringAlphanum:"The '{field}' field must be an alphanumeric string.",stringAlphadash:"The '{field}' field must be an alphadash string.",stringHex:"The '{field}' field must be a hex string.",stringSingleLine:"The '{field}' field must be a single line string.",stringBase64:"The '{field}' field must be a base64 string.",number:"The '{field}' field must be a number.",numberMin:"The '{field}' field must be greater than or equal to {expected}.",numberMax:"The '{field}' field must be less than or equal to {expected}.",numberEqual:"The '{field}' field must be equal to {expected}.",numberNotEqual:"The '{field}' field can't be equal to {expected}.",numberInteger:"The '{field}' field must be an integer.",numberPositive:"The '{field}' field must be a positive number.",numberNegative:"The '{field}' field must be a negative number.",array:"The '{field}' field must be an array.",arrayEmpty:"The '{field}' field must not be an empty array.",arrayMin:"The '{field}' field must contain at least {expected} items.",arrayMax:"The '{field}' field must contain less than or equal to {expected} items.",arrayLength:"The '{field}' field must contain {expected} items.",arrayContains:"The '{field}' field must contain the '{expected}' item.",arrayUnique:"The '{actual}' value in '{field}' field does not unique the '{expected}' values.",arrayEnum:"The '{actual}' value in '{field}' field does not match any of the '{expected}' values.",tuple:"The '{field}' field must be an array.",tupleEmpty:"The '{field}' field must not be an empty array.",tupleLength:"The '{field}' field must contain {expected} items.",boolean:"The '{field}' field must be a boolean.",currency:"The '{field}' must be a valid currency format",date:"The '{field}' field must be a Date.",dateMin:"The '{field}' field must be greater than or equal to {expected}.",dateMax:"The '{field}' field must be less than or equal to {expected}.",enumValue:"The '{field}' field value '{expected}' does not match any of the allowed values.",equalValue:"The '{field}' field value must be equal to '{expected}'.",equalField:"The '{field}' field value must be equal to '{expected}' field value.",forbidden:"The '{field}' field is forbidden.",function:"The '{field}' field must be a function.",email:"The '{field}' field must be a valid e-mail.",emailEmpty:"The '{field}' field must not be empty.",emailMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",emailMax:"The '{field}' field length must be less than or equal to {expected} characters long.",luhn:"The '{field}' field must be a valid checksum luhn.",mac:"The '{field}' field must be a valid MAC address.",object:"The '{field}' must be an Object.",objectStrict:"The object '{field}' contains forbidden keys: '{actual}'.",objectMinProps:"The object '{field}' must contain at least {expected} properties.",objectMaxProps:"The object '{field}' must contain {expected} properties at most.",url:"The '{field}' field must be a valid URL.",urlEmpty:"The '{field}' field must not be empty.",uuid:"The '{field}' field must be a valid UUID.",uuidVersion:"The '{field}' field must be a valid UUID version provided.",classInstanceOf:"The '{field}' field must be an instance of the '{expected}' class.",objectID:"The '{field}' field must be an valid ObjectID",record:"The '{field}' must be an Object."};P.required,P.string,P.stringEmpty,P.stringMin,P.stringMax,P.stringLength,P.stringPattern,P.stringContains,P.stringEnum,P.stringNumeric,P.stringAlpha,P.stringAlphanum,P.stringAlphadash,P.stringHex,P.stringSingleLine,P.stringBase64,P.number,P.numberMin,P.numberMax,P.numberEqual,P.numberNotEqual,P.numberInteger,P.numberPositive,P.numberNegative,P.array,P.arrayEmpty,P.arrayMin,P.arrayMax,P.arrayLength,P.arrayContains,P.arrayUnique,P.arrayEnum,P.tuple,P.tupleEmpty,P.tupleLength,P.currency,P.date,P.dateMin,P.dateMax,P.enumValue,P.equalValue,P.equalField,P.forbidden,P.email,P.emailEmpty,P.emailMin,P.emailMax,P.luhn,P.mac,P.object,P.objectStrict,P.objectMinProps,P.objectMaxProps,P.url,P.urlEmpty,P.uuid,P.uuidVersion,P.classInstanceOf,P.objectID,P.record;var T,j,L,I,C=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,M=/^\S+@\S+\.\S+$/,D=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,N=/["'\\\n\r\u2028\u2029]/g,V=/^-?[0-9]\d*(\.\d+)?$/,F=/^[a-zA-Z]+$/,B=/^[a-zA-Z0-9]+$/,J=/^[a-zA-Z0-9_-]+$/,U=/^[0-9a-fA-F]+$/,Y=/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?$/,q=/^https?:\/\/\S+/,z=/^([0-9a-f]{8}-[0-9a-f]{4}-[1-6][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}|[0]{8}-[0]{4}-[0]{4}-[0]{4}-[0]{12})$/i,$=/^((([a-f0-9][a-f0-9]+[-]){5}|([a-f0-9][a-f0-9]+[:]){5})([a-f0-9][a-f0-9])$)|(^([a-f0-9][a-f0-9][a-f0-9][a-f0-9]+[.]){2}([a-f0-9][a-f0-9][a-f0-9][a-f0-9]))$/i;try{var H=new Function("return Object.getPrototypeOf(async function(){}).constructor")()}catch(e){}return e.prototype.validate=function(e,t){return this.compile(t)(e)},e.prototype.wrapRequiredCheckSourceCode=function(e,t,n,r){var o=[],i=!0===e.schema.optional||"forbidden"===e.schema.type,a=!0===e.schema.optional||!0===e.schema.nullable||"forbidden"===e.schema.type;return null!=e.schema.default?(i=!1,!0!==e.schema.nullable&&(a=!1),"function"==typeof e.schema.default?(n.customs[e.index]||(n.customs[e.index]={}),n.customs[e.index].defaultFn=e.schema.default,e="context.customs["+e.index+"].defaultFn.call(this, context.rules["+e.index+"].schema, field, parent, context)"):e=JSON.stringify(e.schema.default),r="\n\t\t\t\tvalue = "+e+";\n\t\t\t\t"+r+" = value;\n\t\t\t"):r=this.makeError({type:"required",actual:"value",messages:e.messages}),o.push("\n\t\t\tif (value === undefined) { "+(i?"\n// allow undefined\n":r)+" }\n\t\t\telse if (value === null) { "+(a?"\n// allow null\n":r)+" }\n\t\t\t"+(t?"else { "+t+" }":"")+"\n\t\t"),o.join("\n")},e.prototype.compile=function(e){function t(e,t){return r.data=e,t&&t.meta&&(r.meta=t.meta),i.call(n,e,r)}if(null===e||"object"!=typeof e)throw Error("Invalid schema.");var n=this,r={index:0,async:!0===e.$$async,rules:[],fn:[],customs:{},utils:{replace:k}};if(this.cache.clear(),delete e.$$async,r.async&&!H)throw Error("Asynchronous mode is not supported.");if(!0!==e.$$root)if(Array.isArray(e))e=this.getRuleFromSchema(e).schema;else{var o=Object.assign({},e);e={type:"object",strict:o.$$strict,properties:o},delete o.$$strict}o=["var errors = [];","var field;","var parent = null;","var label = "+(e.label?'"'+e.label+'"':"null")+";"],e=this.getRuleFromSchema(e),o.push(this.compileRule(e,r,null,(r.async?"await ":"")+"context.fn[%%INDEX%%](value, field, null, errors, context, label);","value")),o.push("if (errors.length) {"),o.push("\n\t\t\treturn errors.map(err => {\n\t\t\t\tif (err.message) {\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{field\\}/g, err.label || err.field);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{expected\\}/g, err.expected);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{actual\\}/g, err.actual);\n\t\t\t\t}\n\t\t\t\tif(!err.label) delete err.label\n\t\t\t\treturn err;\n\t\t\t});\n\t\t"),o.push("}"),o.push("return true;"),e=o.join("\n");var i=new(r.async?H:Function)("value","context",e);return this.opts.debug&&console.log(this._formatter("// Main check function\n"+i.toString())),this.cache.clear(),t.async=r.async,t},e.prototype.compileRule=function(e,t,n,r,o){var i=[],a=this.cache.get(e.schema);return a?((e=a).cycle=!0,e.cycleStack=[],i.push(this.wrapRequiredCheckSourceCode(e,"\n\t\t\t\tvar rule = context.rules["+e.index+"];\n\t\t\t\tif (rule.cycleStack.indexOf(value) === -1) {\n\t\t\t\t\trule.cycleStack.push(value);\n\t\t\t\t\t"+r.replace(/%%INDEX%%/g,e.index)+"\n\t\t\t\t\trule.cycleStack.pop(value);\n\t\t\t\t}\n\t\t\t",t,o))):(this.cache.set(e.schema,e),e.index=t.index,t.rules[t.index]=e,a=null!=n?n:"$$root",t.index++,(n=e.ruleFunction.call(this,e,n,t)).source=n.source.replace(/%%INDEX%%/g,e.index),n=new(t.async?H:Function)("value","field","parent","errors","context","label",n.source),t.fn[e.index]=n.bind(this),i.push(this.wrapRequiredCheckSourceCode(e,r.replace(/%%INDEX%%/g,e.index),t,o)),i.push(this.makeCustomValidator({vName:o,path:a,schema:e.schema,context:t,messages:e.messages,ruleIndex:e.index})),this.opts.debug&&console.log(this._formatter("// Context.fn["+e.index+"]\n"+n.toString()))),i.join("\n")},e.prototype.getRuleFromSchema=function(e){e=this.resolveType(e);var t=this.aliases[e.type];if(t&&(delete e.type,e=A(e,t,{skipIfExist:!0})),!(t=this.rules[e.type]))throw Error("Invalid '"+e.type+"' type in validator schema.");return{messages:Object.assign({},this.messages,e.messages),schema:A(e,this.defaults[e.type],{skipIfExist:!0}),ruleFunction:t}},e.prototype.parseShortHand=function(e){var t=(e=e.split("|").map((function(e){return e.trim()})))[0],n=t.endsWith("[]")?this.getRuleFromSchema({type:"array",items:t.slice(0,-2)}).schema:{type:e[0]};return e.slice(1).map((function(e){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim();"true"===(e=e.substr(t+1).trim())||"false"===e?e="true"===e:Number.isNaN(Number(e))||(e=Number(e)),n[r]=e}else e.startsWith("no-")?n[e.slice(3)]=!1:n[e]=!0})),n},e.prototype.makeError=function(e){var t=e.type,n=e.field,r=e.expected,o=e.actual,i={type:'"'+t+'"',message:'"'+e.messages[t]+'"'};return i.field=n?'"'+n+'"':"field",null!=r&&(i.expected=r),null!=o&&(i.actual=o),i.label="label","errors.push({ "+Object.keys(i).map((function(e){return e+": "+i[e]})).join(", ")+" });"},e.prototype.makeCustomValidator=function(e){var t=e.vName;void 0===t&&(t="value");var n=e.fnName;void 0===n&&(n="custom");var r=e.ruleIndex,o=e.path,i=e.schema,a=e.context,l=e.messages;e="rule"+r;var s="fnCustomErrors"+r;return"function"==typeof i[n]?(a.customs[r]?(a.customs[r].messages=l,a.customs[r].schema=i):a.customs[r]={messages:l,schema:i},this.opts.useNewCustomCheckerFunction?"\n               \t\tconst "+e+" = context.customs["+r+"];\n\t\t\t\t\tconst "+s+" = [];\n\t\t\t\t\t"+t+" = "+(a.async?"await ":"")+e+".schema."+n+".call(this, "+t+", "+s+" , "+e+'.schema, "'+o+'", parent, context);\n\t\t\t\t\tif (Array.isArray('+s+" )) {\n                  \t\t"+s+" .forEach(err => errors.push(Object.assign({ message: "+e+".messages[err.type], field }, err)));\n\t\t\t\t\t}\n\t\t\t\t":"\n\t\t\t\tconst "+e+" = context.customs["+r+"];\n\t\t\t\tconst "+(i="res_"+e)+" = "+(a.async?"await ":"")+e+".schema."+n+".call(this, "+t+", "+e+'.schema, "'+o+'", parent, context);\n\t\t\t\tif (Array.isArray('+i+")) {\n\t\t\t\t\t"+i+".forEach(err => errors.push(Object.assign({ message: "+e+".messages[err.type], field }, err)));\n\t\t\t\t}\n\t\t"):""},e.prototype.add=function(e,t){this.rules[e]=t},e.prototype.addMessage=function(e,t){this.messages[e]=t},e.prototype.alias=function(e,t){if(this.rules[e])throw Error("Alias name must not be a rule name");this.aliases[e]=t},e.prototype.plugin=function(e){if("function"!=typeof e)throw Error("Plugin fn type must be function");return e(this)},e.prototype.resolveType=function(e){var t=this;if("string"==typeof e)e=this.parseShortHand(e);else if(Array.isArray(e)){if(0===e.length)throw Error("Invalid schema.");(e={type:"multi",rules:e}).rules.map((function(e){return t.getRuleFromSchema(e)})).every((function(e){return!0===e.schema.optional}))&&(e.optional=!0),e.rules.map((function(e){return t.getRuleFromSchema(e)})).every((function(e){return!0===e.schema.nullable}))&&(e.nullable=!0)}if(e.$$type){var n=this.getRuleFromSchema(e.$$type).schema;delete e.$$type;var r,o=Object.assign({},e);for(r in e)delete e[r];A(e,n,{skipIfExist:!0}),e.props=o}return e},e.prototype.normalize=function(e){var t=this,n=this.resolveType(e);return this.aliases[n.type]&&(n=A(n,this.normalize(this.aliases[n.type]),{skipIfExists:!0})),"multi"===(n=A(n,this.defaults[n.type],{skipIfExist:!0})).type?(n.rules=n.rules.map((function(e){return t.normalize(e)})),n.optional=n.rules.every((function(e){return!0===e.optional})),n):"array"===n.type?(n.items=this.normalize(n.items),n):("object"===n.type&&n.props&&Object.entries(n.props).forEach((function(e){return n.props[e[0]]=t.normalize(e[1])})),"object"==typeof e&&(e.type?(e=this.normalize(e.type),A(n,e,{skipIfExists:!0})):Object.entries(e).forEach((function(e){return n[e[0]]=t.normalize(e[1])}))),n)},e}()},8998:(e,t,n)=>{e.exports=function e(t,n,r){function o(a,l){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){const r=e("./utils"),o=function(){"use strict";const e=r.stringToArray,t=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],o=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],i=["Thousand","Million","Billion","Trillion"];const a={};t.forEach((function(e,t){a[e.toLowerCase()]=t})),n.forEach((function(e,t){a[e.toLowerCase()]=t})),o.forEach((function(e,t){const n=e.toLowerCase();a[n]=10*(t+2),a[n.substring(0,e.length-1)+"ieth"]=a[n]})),a.hundredth=100,i.forEach((function(e,t){const n=e.toLowerCase(),r=Math.pow(10,3*(t+1));a[n]=r,a[n+"th"]=r}));const l=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],s={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function u(e){for(var t=0;t<l.length;t++){const n=l[t];if(e>=n[0])return n[1]+u(e-n[0])}return""}function c(e,t){if(void 0!==e)return b(e=Math.floor(e),E(t))}const p="decimal",d="letters",f="roman",h="words",v="sequence",y="upper",m="lower",g="title";function b(r,a){let l;const s=r<0;switch(r=Math.abs(r),a.primary){case d:l=function(e,t){for(var n=[],r=t.charCodeAt(0);e>0;)n.unshift(String.fromCharCode((e-1)%26+r)),e=Math.floor((e-1)/26);return n.join("")}(r,a.case===y?"A":"a");break;case f:l=u(r),a.case===y&&(l=l.toUpperCase());break;case h:l=function(e,r){var a=function(e,r,l){var s="";if(e<=19)s=(r?" and ":"")+(l?n[e]:t[e]);else if(e<100){const t=Math.floor(e/10),n=e%10;s=(r?" and ":"")+o[t-2],n>0?s+="-"+a(n,!1,l):l&&(s=s.substring(0,s.length-1)+"ieth")}else if(e<1e3){const n=Math.floor(e/100),o=e%100;s=(r?", ":"")+t[n]+" Hundred",o>0?s+=a(o,!0,l):l&&(s+="th")}else{var u=Math.floor(Math.log10(e)/3);u>i.length&&(u=i.length);const t=Math.pow(10,3*u),n=Math.floor(e/t),o=e-n*t;s=(r?", ":"")+a(n,!1,!1)+" "+i[u-1],o>0?s+=a(o,!0,l):l&&(s+="th")}return s};return a(e,!1,r)}(r,a.ordinal),a.case===y?l=l.toUpperCase():a.case===m&&(l=l.toLowerCase());break;case p:l=""+r;var c=a.mandatoryDigits-l.length;if(c>0){var g=new Array(c+1).join("0");l=g+l}if(48!==a.zeroCode&&(l=e(l).map((e=>String.fromCodePoint(e.codePointAt(0)+a.zeroCode-48))).join("")),a.regular)for(let e=Math.floor((l.length-1)/a.groupingSeparators.position);e>0;e--){const t=l.length-e*a.groupingSeparators.position;l=l.substr(0,t)+a.groupingSeparators.character+l.substr(t)}else a.groupingSeparators.reverse().forEach((e=>{const t=l.length-e.position;l=l.substr(0,t)+e.character+l.substr(t)}));if(a.ordinal){var b={1:"st",2:"nd",3:"rd"}[l[l.length-1]];(!b||l.length>1&&"1"===l[l.length-2])&&(b="th"),l+=b}break;case v:throw{code:"D3130",value:a.token}}return s&&(l="-"+l),l}const x=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function E(t){const n={type:"integer",primary:p,case:m,ordinal:!1};let r,o;const i=t.lastIndexOf(";");switch(-1===i?r=t:(r=t.substring(0,i),o=t.substring(i+1),"o"===o[0]&&(n.ordinal=!0)),r){case"A":n.case=y;case"a":n.primary=d;break;case"I":n.case=y;case"i":n.primary=f;break;case"W":n.case=y,n.primary=h;break;case"Ww":n.case=g,n.primary=h;break;case"w":n.primary=h;break;default:{let t=null,o=0,i=0,a=[],l=0;if(e(r).map((e=>e.codePointAt(0))).reverse().forEach((e=>{let n=!1;for(let r=0;r<x.length;r++){const i=x[r];if(e>=i&&e<=i+9){if(n=!0,o++,l++,null===t)t=i;else if(i!==t)throw{code:"D3131"};break}}n||(35===e?(l++,i++):a.push({position:l,character:String.fromCodePoint(e)}))})),o>0){n.primary=p,n.zeroCode=t,n.mandatoryDigits=o,n.optionalDigits=i;const e=function(e){if(0===e.length)return 0;const t=e[0].character;for(let n=1;n<e.length;n++)if(e[n].character!==t)return 0;const n=e.map((e=>e.position)),r=function(e,t){return 0===t?e:r(t,e%t)},o=n.reduce(r);for(let e=1;e<=n.length;e++)if(-1===n.indexOf(e*o))return 0;return o}(a);e>0?(n.regular=!0,n.groupingSeparators={position:e,character:a[0].character}):(n.regular=!1,n.groupingSeparators=a)}else n.primary=v,n.token=r}}return n}const _={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function w(e){var t=[];const n={type:"datetime",parts:t},r=function(n,r){if(r>n){let o=e.substring(n,r);o=o.split("]]").join("]"),t.push({type:"literal",value:o})}};for(var o=0,i=0;i<e.length;){if("["===e.charAt(i)){if("["===e.charAt(i+1)){r(o,i),t.push({type:"literal",value:"["}),o=i+=2;continue}if(r(o,i),o=i,-1===(i=e.indexOf("]",o)))throw{code:"D3135"};let n=e.substring(o+1,i);n=n.split(/\s+/).join("");var a,l={type:"marker",component:n.charAt(0)},s=n.lastIndexOf(",");if(-1!==s){const e=n.substring(s+1),t=e.indexOf("-");let r,o;const i=function(e){return void 0===e||"*"===e?void 0:parseInt(e)};-1===t?r=e:(r=e.substring(0,t),o=e.substring(t+1));const u={min:i(r),max:i(o)};l.width=u,a=n.substring(1,s)}else a=n.substring(1);if(1===a.length)l.presentation1=a;else if(a.length>1){var u=a.charAt(a.length-1);-1!=="atco".indexOf(u)?(l.presentation2=u,"o"===u&&(l.ordinal=!0),l.presentation1=a.substring(0,a.length-1)):l.presentation1=a}else l.presentation1=_[l.component];if(void 0===l.presentation1)throw{code:"D3132",value:l.component};if("n"===l.presentation1[0])l.names=m;else if("N"===l.presentation1[0])"n"===l.presentation1[1]?l.names=g:l.names=y;else if(-1!=="YMDdFWwXxHhmsf".indexOf(l.component)){var c=l.presentation1;if(l.presentation2&&(c+=";"+l.presentation2),l.integerFormat=E(c),l.width&&void 0!==l.width.min&&l.integerFormat.mandatoryDigits<l.width.min&&(l.integerFormat.mandatoryDigits=l.width.min),-1!=="YMD".indexOf(l.component))if(l.n=-1,l.width&&void 0!==l.width.max)l.n=l.width.max,l.integerFormat.mandatoryDigits=l.n;else{var p=l.integerFormat.mandatoryDigits+l.integerFormat.optionalDigits;p>=2&&(l.n=p)}}"Z"!==l.component&&"z"!==l.component||(l.integerFormat=E(l.presentation1)),t.push(l),o=i+1}i++}return r(o,i),n}const O=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],k=["January","February","March","April","May","June","July","August","September","October","November","December"],A=864e5,S=function(e){const t=Date.UTC(e.year,e.month);var n=new Date(t).getUTCDay();return 0===n&&(n=7),n>4?t+(8-n)*A:t-(n-1)*A},R=function(e,t){return{year:e,month:t,nextMonth:function(){return 11===t?R(e+1,0):R(e,t+1)},previousMonth:function(){return 0===t?R(e-1,11):R(e,t-1)},nextYear:function(){return R(e+1,t)},previousYear:function(){return R(e-1,t)}}},P=function(e,t){return(t-e)/6048e5+1},T=(e,t)=>{let n;switch(t){case"Y":n=e.getUTCFullYear();break;case"M":n=e.getUTCMonth()+1;break;case"D":n=e.getUTCDate();break;case"d":n=(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())-Date.UTC(e.getUTCFullYear(),0))/A+1;break;case"F":n=e.getUTCDay(),0===n&&(n=7);break;case"W":{const t=R(e.getUTCFullYear(),0),r=S(t),o=Date.UTC(t.year,e.getUTCMonth(),e.getUTCDate());let i=P(r,o);if(i>52)o>=S(t.nextYear())&&(i=1);else if(i<1){const e=S(t.previousYear());i=P(e,o)}n=Math.floor(i);break}case"w":{const t=R(e.getUTCFullYear(),e.getUTCMonth()),r=S(t),o=Date.UTC(t.year,t.month,e.getUTCDate());let i=P(r,o);if(i>4)o>=S(t.nextMonth())&&(i=1);else if(i<1){const e=S(t.previousMonth());i=P(e,o)}n=Math.floor(i);break}case"X":{const t=R(e.getUTCFullYear(),0),r=S(t),o=S(t.nextYear()),i=e.getTime();n=i<r?t.year-1:i>=o?t.year+1:t.year;break}case"x":{const t=R(e.getUTCFullYear(),e.getUTCMonth()),r=S(t),o=t.nextMonth(),i=S(o),a=e.getTime();n=a<r?t.previousMonth().month+1:a>=i?o.month+1:t.month+1;break}case"H":n=e.getUTCHours();break;case"h":n=e.getUTCHours(),n%=12,0===n&&(n=12);break;case"P":n=e.getUTCHours()>=12?"pm":"am";break;case"m":n=e.getUTCMinutes();break;case"s":n=e.getUTCSeconds();break;case"f":n=e.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":n="ISO"}return n};let j=null;function L(e,t,n){var r=0,o=0;if(void 0!==n){const e=parseInt(n);r=Math.floor(e/100),o=e%100}let i;void 0===t?(null===j&&(j=w("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),i=j):i=w(t);const a=new Date(e+60*(60*r+o)*1e3);let l="";return i.parts.forEach((function(e){"literal"===e.type?l+=e.value:l+=function(e,t){var n=T(e,t.component);if(-1!=="YMDdFWwXxHhms".indexOf(t.component))if("Y"===t.component&&-1!==t.n&&(n%=Math.pow(10,t.n)),t.names){if("M"===t.component||"x"===t.component)n=k[n-1];else{if("F"!==t.component)throw{code:"D3133",value:t.component};n=O[n]}t.names===y?n=n.toUpperCase():t.names===m&&(n=n.toLowerCase()),t.width&&n.length>t.width.max&&(n=n.substring(0,t.width.max))}else n=b(n,t.integerFormat);else if("f"===t.component)n=b(n,t.integerFormat);else if("Z"===t.component||"z"===t.component){const e=100*r+o;if(t.integerFormat.regular)n=b(e,t.integerFormat);else{const i=t.integerFormat.mandatoryDigits;if(1===i||2===i)n=b(r,t.integerFormat),0!==o&&(n+=":"+c(o,"00"));else{if(3!==i&&4!==i)throw{code:"D3134",value:i};n=b(e,t.integerFormat)}}e>=0&&(n="+"+n),"z"===t.component&&(n="GMT"+n),0===e&&"t"===t.presentation2&&(n="Z")}return n}(a,e)})),l}function I(e){var t={};if("datetime"===e.type)t.type="datetime",t.parts=e.parts.map((function(e){var t={};if("literal"===e.type)t.regex=e.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===e.component||"z"===e.component){let n;Array.isArray(e.integerFormat.groupingSeparators)||(n=e.integerFormat.groupingSeparators),t.regex="","z"===e.component&&(t.regex="GMT"),t.regex+="[-+][0-9]+",n&&(t.regex+=n.character+"[0-9]+"),t.parse=function(t){"z"===e.component&&(t=t.substring(3));let r=0,o=0;return n?(r=Number.parseInt(t.substring(0,t.indexOf(n.character))),o=Number.parseInt(t.substring(t.indexOf(n.character)+1))):t.length-1<=2?r=Number.parseInt(t):(r=Number.parseInt(t.substring(0,3)),o=Number.parseInt(t.substring(3))),60*r+o}}else if(e.integerFormat)e.integerFormat.n=e.n,t=I(e.integerFormat);else{t.regex="[a-zA-Z]+";var n={};if("M"===e.component||"x"===e.component)k.forEach((function(t,r){e.width&&e.width.max?n[t.substring(0,e.width.max)]=r+1:n[t]=r+1}));else if("F"===e.component)O.forEach((function(t,r){r>0&&(e.width&&e.width.max?n[t.substring(0,e.width.max)]=r:n[t]=r)}));else{if("P"!==e.component)throw{code:"D3133",value:e.component};n={am:0,AM:0,pm:1,PM:1}}t.parse=function(e){return n[e]}}return t.component=e.component,t}));else{t.type="integer";const n=e.case===y;let r;switch(r=e.n&&e.n>0?0===e.optionalDigits?`{${e.n}}`:`{${e.n-e.optionalDigits},${e.n}}`:"+",e.primary){case d:t.regex=n?"[A-Z]+":"[a-z]+",t.parse=function(e){return function(e,t){for(var n=t.charCodeAt(0),r=0,o=0;o<e.length;o++)r+=(e.charCodeAt(e.length-o-1)-n+1)*Math.pow(26,o);return r}(e,n?"A":"a")};break;case f:t.regex=n?"[MDCLXVI]+":"[mdclxvi]+",t.parse=function(e){return function(e){for(var t=0,n=1,r=e.length-1;r>=0;r--){const o=e[r],i=s[o];i<n?t-=i:(n=i,t+=i)}return t}(n?e:e.toUpperCase())};break;case h:t.regex="(?:"+Object.keys(a).concat("and","[\\-, ]").join("|")+")+",t.parse=function(e){return function(e){const t=e.split(/,\s|\sand\s|[\s\\-]/).map((e=>a[e]));let n=[0];return t.forEach((e=>{if(e<100){let t=n.pop();t>=1e3&&(n.push(t),t=0),n.push(t+e)}else n.push(n.pop()*e)})),n.reduce(((e,t)=>e+t),0)}(e.toLowerCase())};break;case p:t.regex=`[0-9]${r}`,e.ordinal&&(t.regex+="(?:th|st|nd|rd)"),t.parse=function(t){let n=t;return e.ordinal&&(n=t.substring(0,t.length-2)),e.regular?n=n.split(",").join(""):e.groupingSeparators.forEach((e=>{n=n.split(e.character).join("")})),48!==e.zeroCode&&(n=n.split("").map((t=>String.fromCodePoint(t.codePointAt(0)-e.zeroCode+48))).join("")),parseInt(n)};break;case v:throw{code:"D3130",value:e.token}}}return t}function C(e,t){const n=I(w(t)),r="^"+n.parts.map((e=>"("+e.regex+")")).join("")+"$";var o=new RegExp(r,"i").exec(e);if(null!==o){const e=161,t=130,r=84,a=72,l=23,s=47,u={};for(let e=1;e<o.length;e++){const t=n.parts[e-1];t.parse&&(u[t.component]=t.parse(o[e]))}if(0===Object.getOwnPropertyNames(u).length)return;let c=0;const p=e=>{c<<=1,c+=e?1:0},d=e=>!(~e&c||!(e&c));"YXMxWwdD".split("").forEach((e=>p(u[e])));const f=!d(e)&&d(t),h=d(r),v=!h&&d(a);c=0,"PHhmsf".split("").forEach((e=>p(u[e])));const y=!d(l)&&d(s),m=(f?"YD":h?"XxwF":v?"XWF":"YMD")+(y?"Phmsf":"Hmsf"),g=this.environment.timestamp;let b=!1,x=!1;if(m.split("").forEach((e=>{if(void 0===u[e])b?(u[e]=-1!=="MDd".indexOf(e)?1:0,x=!0):u[e]=T(g,e);else if(b=!0,x)throw{code:"D3136"}})),u.M>0?u.M-=1:u.M=0,f){const e=Date.UTC(u.Y,0),t=1e3*(u.d-1)*60*60*24,n=new Date(e+t);u.M=n.getUTCMonth(),u.D=n.getUTCDate()}if(h)throw{code:"D3136"};if(v)throw{code:"D3136"};y&&(u.H=12===u.h?0:u.h,1===u.P&&(u.H+=12));var i=Date.UTC(u.Y,u.M,u.D,u.H,u.m,u.s,u.f);return(u.Z||u.z)&&(i-=60*(u.Z||u.z)*1e3),i}}var M=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");return{formatInteger:c,parseInteger:function(e,t){if(void 0!==e)return I(E(t)).parse(e)},fromMillis:function(e,t,n){if(void 0!==e)return L.call(this,e,t,n)},toMillis:function(e,t){if(void 0!==e){if(void 0===t){if(!M.test(e))throw{stack:(new Error).stack,code:"D3110",value:e};return Date.parse(e)}return C.call(this,e,t)}}}}();t.exports=o},{"./utils":6}],2:[function(e,t,r){(function(n){(function(){var r=e("./utils");const o=(()=>{"use strict";var e=r.isNumeric,t=r.isArrayOfStrings,o=r.isArrayOfNumbers,i=r.createSequence,a=r.isSequence,l=r.isFunction,s=r.isLambda,u=r.isIterable,c=r.getFunctionArity,p=r.isDeepEqual,d=r.stringToArray;function f(e,t,n){if(void 0!==e){var r=d(e),o=r.length;if(o+t<0&&(t=0),void 0!==n){if(n<=0)return"";var i=t>=0?t+n:o+t+n;return r.slice(t,i).join("")}return r.slice(t).join("")}}function h(e){if(void 0!==e)return d(e).length}function*v(e,t){var n=e.apply(this,[t]);if(u(n)&&(n=yield*n),n&&"number"!=typeof n.start&&"number"!==n.end&&!Array.isArray(n.groups)&&!l(n.next))throw{code:"T1010",stack:(new Error).stack};return n}function y(e,t){var n;if(void 0!==e){if(t){var r=e.toString().split("e");e=+(r[0]+"e"+(r[1]?+r[1]+t:t))}var o=(n=Math.round(e))-e;return.5===Math.abs(o)&&1===Math.abs(n%2)&&(n-=1),t&&(r=n.toString().split("e"),n=+(r[0]+"e"+(r[1]?+r[1]-t:-t))),Object.is(n,-0)&&(n=0),n}}function m(t){if(void 0!==t){var n=!1;return Array.isArray(t)?1===t.length?n=m(t[0]):t.length>1&&(n=t.filter((function(e){return m(e)})).length>0):"string"==typeof t?t.length>0&&(n=!0):e(t)?0!==t&&(n=!0):null!==t&&"object"==typeof t?Object.keys(t).length>0&&(n=!0):"boolean"==typeof t&&!0===t&&(n=!0),n}}function g(e,t,n,r){var o=[t],i=c(e);return i>=2&&o.push(n),i>=3&&o.push(r),o}function b(e,t){return void 0===e?t:void 0===t?e:(Array.isArray(e)||(e=i(e)),Array.isArray(t)||(t=[t]),e.concat(t))}return{sum:function(e){if(void 0!==e){var t=0;return e.forEach((function(e){t+=e})),t}},count:function(e){return void 0===e?0:e.length},max:function(e){if(void 0!==e&&0!==e.length)return Math.max.apply(Math,e)},min:function(e){if(void 0!==e&&0!==e.length)return Math.min.apply(Math,e)},average:function(e){if(void 0!==e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t/e.length}},string:function(t,n=!1){if(void 0!==t){var r;if("string"==typeof t)r=t;else if(l(t))r="";else{if("number"==typeof t&&!isFinite(t))throw{code:"D3001",value:t,stack:(new Error).stack};var o=n?2:0;Array.isArray(t)&&t.outerWrapper&&(t=t[0]),r=JSON.stringify(t,(function(t,n){return null!=n&&n.toPrecision&&e(n)?Number(n.toPrecision(15)):n&&l(n)?"":n}),o)}return r}},substring:f,substringBefore:function(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(0,n):e}},substringAfter:function(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(n+t.length):e}},lowercase:function(e){if(void 0!==e)return e.toLowerCase()},uppercase:function(e){if(void 0!==e)return e.toUpperCase()},length:h,trim:function(e){if(void 0!==e){var t=e.replace(/[ \t\n\r]+/gm," ");return" "===t.charAt(0)&&(t=t.substring(1))," "===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}},pad:function(e,t,n){if(void 0!==e){var r;void 0!==n&&0!==n.length||(n=" ");var o=Math.abs(t)-h(e);if(o>0){var i=new Array(o+1).join(n);n.length>1&&(i=f(i,0,o)),r=t>0?e+i:i+e}else r=e;return r}},match:function*(e,t,n){if(void 0!==e){if(n<0)throw{stack:(new Error).stack,value:n,code:"D3040",index:3};var r=i();if(void 0===n||n>0){var o=0,a=yield*v(t,e);if(void 0!==a)for(;void 0!==a&&(void 0===n||o<n);)r.push({match:a.match,index:a.start,groups:a.groups}),a=yield*v(a.next),o++}return r}},contains:function*(e,t){if(void 0!==e)return"string"==typeof t?-1!==e.indexOf(t):void 0!==(yield*v(t,e))},replace:function*(e,t,n,r){if(void 0!==e){var o;if(""===t)throw{code:"D3010",stack:(new Error).stack,value:t,index:2};if(r<0)throw{code:"D3011",stack:(new Error).stack,value:r,index:4};o="string"==typeof n?function(e){for(var t="",r=0,o=n.indexOf("$",r);-1!==o&&r<n.length;){t+=n.substring(r,o),r=o+1;var i=n.charAt(r);if("$"===i)t+="$",r++;else if("0"===i)t+=e.match,r++;else{var a;if(a=0===e.groups.length?1:Math.floor(Math.log(e.groups.length)*Math.LOG10E)+1,o=parseInt(n.substring(r,r+a),10),a>1&&o>e.groups.length&&(o=parseInt(n.substring(r,r+a-1),10)),isNaN(o))t+="$";else{if(e.groups.length>0){var l=e.groups[o-1];void 0!==l&&(t+=l)}r+=o.toString().length}}o=n.indexOf("$",r)}return t+n.substring(r)}:n;var i="",a=0;if(void 0===r||r>0){var l=0;if("string"==typeof t){for(var s=e.indexOf(t,a);-1!==s&&(void 0===r||l<r);)i+=e.substring(a,s),i+=n,a=s+t.length,l++,s=e.indexOf(t,a);i+=e.substring(a)}else{var c=yield*v(t,e);if(void 0!==c){for(;void 0!==c&&(void 0===r||l<r);){i+=e.substring(a,c.start);var p=o.apply(this,[c]);if(u(p)&&(p=yield*p),"string"!=typeof p)throw{code:"D3012",stack:(new Error).stack,value:p};i+=p,a=c.start+c.match.length,l++,c=yield*v(c.next)}i+=e.substring(a)}else i=e}}else i=e;return i}},split:function*(e,t,n){if(void 0!==e){if(n<0)throw{code:"D3020",stack:(new Error).stack,value:n,index:3};var r=[];if(void 0===n||n>0)if("string"==typeof t)r=e.split(t,n);else{var o=0,i=yield*v(t,e);if(void 0!==i){for(var a=0;void 0!==i&&(void 0===n||o<n);)r.push(e.substring(a,i.start)),a=i.end,i=yield*v(i.next),o++;(void 0===n||o<n)&&r.push(e.substring(a))}else r.push(e)}return r}},join:function(e,t){if(void 0!==e)return void 0===t&&(t=""),e.join(t)},formatNumber:function(e,t,n){if(void 0!==e){var r={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"","zero-digit":"0",digit:"#","pattern-separator":";"};void 0!==n&&Object.keys(n).forEach((function(e){r[e]=n[e]}));for(var o=[],i=r["zero-digit"].charCodeAt(0),a=i;a<i+10;a++)o.push(String.fromCharCode(a));var l=o.concat([r["decimal-separator"],r["exponent-separator"],r["grouping-separator"],r.digit,r["pattern-separator"]]),s=t.split(r["pattern-separator"]);if(s.length>2)throw{code:"D3080",stack:(new Error).stack};var u=s.map((function(e){var t,n,o,i,a=function(){for(var t,n=0;n<e.length;n++)if(t=e.charAt(n),-1!==l.indexOf(t)&&t!==r["exponent-separator"])return e.substring(0,n)}(),s=function(){for(var t,n=e.length-1;n>=0;n--)if(t=e.charAt(n),-1!==l.indexOf(t)&&t!==r["exponent-separator"])return e.substring(n+1)}(),u=e.substring(a.length,e.length-s.length),c=e.indexOf(r["exponent-separator"],a.length);-1===c||c>e.length-s.length?(t=u,n=void 0):(t=u.substring(0,c),n=u.substring(c+1));var p=t.indexOf(r["decimal-separator"]);return-1===p?(o=t,i=s):(o=t.substring(0,p),i=t.substring(p+1)),{prefix:a,suffix:s,activePart:u,mantissaPart:t,exponentPart:n,integerPart:o,fractionalPart:i,subpicture:e}}));u.forEach((function(e){var t,n,i=e.subpicture,a=i.indexOf(r["decimal-separator"]);a!==i.lastIndexOf(r["decimal-separator"])&&(t="D3081"),i.indexOf(r.percent)!==i.lastIndexOf(r.percent)&&(t="D3082"),i.indexOf(r["per-mille"])!==i.lastIndexOf(r["per-mille"])&&(t="D3083"),-1!==i.indexOf(r.percent)&&-1!==i.indexOf(r["per-mille"])&&(t="D3084");var s=!1;for(n=0;n<e.mantissaPart.length;n++){var u=e.mantissaPart.charAt(n);if(-1!==o.indexOf(u)||u===r.digit){s=!0;break}}s||(t="D3085"),-1!==e.activePart.split("").map((function(e){return-1===l.indexOf(e)?"p":"a"})).join("").indexOf("p")&&(t="D3086"),-1!==a?i.charAt(a-1)!==r["grouping-separator"]&&i.charAt(a+1)!==r["grouping-separator"]||(t="D3087"):e.integerPart.charAt(e.integerPart.length-1)===r["grouping-separator"]&&(t="D3088"),-1!==i.indexOf(r["grouping-separator"]+r["grouping-separator"])&&(t="D3089");var c=e.integerPart.indexOf(r.digit);-1!==c&&e.integerPart.substring(0,c).split("").filter((function(e){return o.indexOf(e)>-1})).length>0&&(t="D3090"),-1!==(c=e.fractionalPart.lastIndexOf(r.digit))&&e.fractionalPart.substring(c).split("").filter((function(e){return o.indexOf(e)>-1})).length>0&&(t="D3091");var p="string"==typeof e.exponentPart;if(p&&e.exponentPart.length>0&&(-1!==i.indexOf(r.percent)||-1!==i.indexOf(r["per-mille"]))&&(t="D3092"),p&&(0===e.exponentPart.length||e.exponentPart.split("").filter((function(e){return-1===o.indexOf(e)})).length>0)&&(t="D3093"),t)throw{code:t,stack:(new Error).stack}}));var c,p,d,f,h=u.map((function(e){var t=function(t,n){for(var i=[],a=t.indexOf(r["grouping-separator"]);-1!==a;){var l=(n?t.substring(0,a):t.substring(a)).split("").filter((function(e){return-1!==o.indexOf(e)||e===r.digit})).length;i.push(l),a=e.integerPart.indexOf(r["grouping-separator"],a+1)}return i},n=t(e.integerPart),i=function(e){if(0===e.length)return 0;for(var t=function(e,n){return 0===n?e:t(n,e%n)},n=e.reduce(t),r=1;r<=e.length;r++)if(-1===e.indexOf(r*n))return 0;return n}(n),a=t(e.fractionalPart,!0),l=e.integerPart.split("").filter((function(e){return-1!==o.indexOf(e)})).length,s=l,u=e.fractionalPart.split(""),c=u.filter((function(e){return-1!==o.indexOf(e)})).length,p=u.filter((function(e){return-1!==o.indexOf(e)||e===r.digit})).length,d="string"==typeof e.exponentPart;0===l&&0===p&&(d?(c=1,p=1):l=1),d&&0===l&&-1!==e.integerPart.indexOf(r.digit)&&(l=1),0===l&&0===c&&(c=1);var f=0;return d&&(f=e.exponentPart.split("").filter((function(e){return-1!==o.indexOf(e)})).length),{integerPartGroupingPositions:n,regularGrouping:i,minimumIntegerPartSize:l,scalingFactor:s,prefix:e.prefix,fractionalPartGroupingPositions:a,minimumFactionalPartSize:c,maximumFactionalPartSize:p,minimumExponentSize:f,suffix:e.suffix,picture:e.subpicture}})),v=r["minus-sign"],m=r["zero-digit"],g=r["decimal-separator"],b=r["grouping-separator"];if(1===h.length&&(h.push(JSON.parse(JSON.stringify(h[0]))),h[1].prefix=v+h[1].prefix),p=-1!==(c=e>=0?h[0]:h[1]).picture.indexOf(r.percent)?100*e:-1!==c.picture.indexOf(r["per-mille"])?1e3*e:e,0===c.minimumExponentSize)d=p;else{var x=Math.pow(10,c.scalingFactor),E=Math.pow(10,c.scalingFactor-1);for(d=p,f=0;d<E;)d*=10,f-=1;for(;d>x;)d/=10,f+=1}var _=function(e,t){var n=Math.abs(e).toFixed(t);return"0"!==m&&(n=n.split("").map((function(e){return e>="0"&&e<="9"?o[e.charCodeAt(0)-48]:e})).join("")),n},w=_(y(d,c.maximumFactionalPartSize),c.maximumFactionalPartSize),O=w.indexOf(".");for(-1===O?w+=g:w=w.replace(".",g);w.charAt(0)===m;)w=w.substring(1);for(;w.charAt(w.length-1)===m;)w=w.substring(0,w.length-1);O=w.indexOf(g);var k=c.minimumIntegerPartSize-O,A=c.minimumFactionalPartSize-(w.length-O-1);if(w=(k>0?new Array(k+1).join(m):"")+w,w+=A>0?new Array(A+1).join(m):"",O=w.indexOf(g),c.regularGrouping>0)for(var S=Math.floor((O-1)/c.regularGrouping),R=1;R<=S;R++)w=[w.slice(0,O-R*c.regularGrouping),b,w.slice(O-R*c.regularGrouping)].join("");else c.integerPartGroupingPositions.forEach((function(e){w=[w.slice(0,O-e),b,w.slice(O-e)].join(""),O++}));if(O=w.indexOf(g),c.fractionalPartGroupingPositions.forEach((function(e){w=[w.slice(0,e+O+1),b,w.slice(e+O+1)].join("")})),O=w.indexOf(g),-1!==c.picture.indexOf(g)&&O!==w.length-1||(w=w.substring(0,w.length-1)),void 0!==f){var P=_(f,0);(k=c.minimumExponentSize-P.length)>0&&(P=new Array(k+1).join(m)+P),w=w+r["exponent-separator"]+(f<0?v:"")+P}return w=c.prefix+w+c.suffix}},formatBase:function(e,t){if(void 0!==e){if(e=y(e),(t=void 0===t?10:y(t))<2||t>36)throw{code:"D3100",stack:(new Error).stack,value:t};return e.toString(t)}},number:function(e){var t;if(void 0!==e){if("number"==typeof e)t=e;else if("string"==typeof e&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(e)&&!isNaN(parseFloat(e))&&isFinite(e))t=parseFloat(e);else if(!0===e)t=1;else{if(!1!==e)throw{code:"D3030",value:e,stack:(new Error).stack,index:1};t=0}return t}},floor:function(e){if(void 0!==e)return Math.floor(e)},ceil:function(e){if(void 0!==e)return Math.ceil(e)},round:y,abs:function(e){if(void 0!==e)return Math.abs(e)},sqrt:function(e){if(void 0!==e){if(e<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:e};return Math.sqrt(e)}},power:function(e,t){var n;if(void 0!==e){if(n=Math.pow(e,t),!isFinite(n))throw{stack:(new Error).stack,code:"D3061",index:1,value:e,exp:t};return n}},random:function(){return Math.random()},boolean:m,not:function(e){if(void 0!==e)return!m(e)},map:function*(e,t){if(void 0!==e){for(var n=i(),r=0;r<e.length;r++){var o=g(t,e[r],r,e),a=yield*t.apply(this,o);void 0!==a&&n.push(a)}return n}},zip:function(){for(var e=[],t=Array.prototype.slice.call(arguments),n=Math.min.apply(Math,t.map((function(e){return Array.isArray(e)?e.length:0}))),r=0;r<n;r++){var o=t.map((e=>e[r]));e.push(o)}return e},filter:function*(e,t){if(void 0!==e){for(var n=i(),r=0;r<e.length;r++){var o=e[r],a=g(t,o,r,e);m(yield*t.apply(this,a))&&n.push(o)}return n}},single:function*(e,t){if(void 0!==e){for(var n,r=!1,o=0;o<e.length;o++){var i=e[o],a=!0;if(void 0!==t){var l=g(t,i,o,e);a=m(yield*t.apply(this,l))}if(a){if(r)throw{stack:(new Error).stack,code:"D3138",index:o};n=i,r=!0}}if(!r)throw{stack:(new Error).stack,code:"D3139"};return n}},foldLeft:function*(e,t,n){if(void 0!==e){var r,o,i=c(t);if(i<2)throw{stack:(new Error).stack,code:"D3050",index:1};for(void 0===n&&e.length>0?(r=e[0],o=1):(r=n,o=0);o<e.length;){var a=[r,e[o]];i>=3&&a.push(o),i>=4&&a.push(e),r=yield*t.apply(this,a),o++}return r}},sift:function*(e,t){var n={};for(var r in e){var o=e[r],i=g(t,o,r,e);m(yield*t.apply(this,i))&&(n[r]=o)}return 0===Object.keys(n).length&&(n=void 0),n},keys:function e(t){var n=i();if(Array.isArray(t)){var r={};t.forEach((function(t){e(t).forEach((function(e){r[e]=!0}))})),n=e(r)}else null===t||"object"!=typeof t||s(t)||Object.keys(t).forEach((e=>n.push(e)));return n},lookup:function e(t,n){var r;if(Array.isArray(t)){r=i();for(var o=0;o<t.length;o++){var a=e(t[o],n);void 0!==a&&(Array.isArray(a)?a.forEach((e=>r.push(e))):r.push(a))}}else null!==t&&"object"==typeof t&&(r=t[n]);return r},append:b,exists:function(e){return void 0!==e},spread:function e(t){var n=i();if(Array.isArray(t))t.forEach((function(t){n=b(n,e(t))}));else if(null===t||"object"!=typeof t||s(t))n=t;else for(var r in t){var o={};o[r]=t[r],n.push(o)}return n},merge:function(e){if(void 0!==e){var t={};return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t}},reverse:function(e){if(void 0!==e){if(e.length<=1)return e;for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[t-r-1]=e[r];return n}},each:function*(e,t){var n=i();for(var r in e){var o=g(t,e[r],r,e),a=yield*t.apply(this,o);void 0!==a&&n.push(a)}return n},error:function(e){throw{code:"D3137",stack:(new Error).stack,message:e||"$error() function evaluated"}},assert:function(e,t){if(!e)throw{code:"D3141",stack:(new Error).stack,message:t||"$assert() statement failed"}},type:function(t){if(void 0!==t)return null===t?"null":e(t)?"number":"string"==typeof t?"string":"boolean"==typeof t?"boolean":Array.isArray(t)?"array":l(t)?"function":"object"},sort:function*(e,n){if(void 0!==e){if(e.length<=1)return e;var r;if(void 0===n){if(!o(e)&&!t(e))throw{stack:(new Error).stack,code:"D3070",index:1};r=function*(e,t){return e>t}}else r=n;var i=function*(e){if(!Array.isArray(e)||e.length<=1)return e;var t=Math.floor(e.length/2),n=e.slice(0,t),o=e.slice(t);return n=yield*i(n),o=yield*i(o),yield*function*(e,t){var n=function*(e,t,o){0===t.length?Array.prototype.push.apply(e,o):0===o.length?Array.prototype.push.apply(e,t):(yield*r(t[0],o[0]))?(e.push(o[0]),yield*n(e,t,o.slice(1))):(e.push(t[0]),yield*n(e,t.slice(1),o))},o=[];return yield*n(o,e,t),o}(n,o)};return yield*i(e)}},shuffle:function(e){if(void 0!==e){if(e.length<=1)return e;for(var t=new Array(e.length),n=0;n<e.length;n++){var r=Math.floor(Math.random()*(n+1));n!==r&&(t[n]=t[r]),t[r]=e[n]}return t}},distinct:function(e){if(void 0!==e){if(!Array.isArray(e)||e.length<=1)return e;for(var t=a(e)?i():[],n=0;n<e.length;n++){for(var r=e[n],o=!1,l=0;l<t.length;l++)if(p(r,t[l])){o=!0;break}o||t.push(r)}return t}},base64encode:function(e){if(void 0!==e){var t="undefined"!=typeof window?window.btoa:function(e){return new n.Buffer.from(e,"binary").toString("base64")};return t(e)}},base64decode:function(e){if(void 0!==e){var t="undefined"!=typeof window?window.atob:function(e){return new n.Buffer.from(e,"base64").toString("binary")};return t(e)}},encodeUrlComponent:function(e){if(void 0!==e){var t;try{t=encodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrlComponent"}}return t}},encodeUrl:function(e){if(void 0!==e){var t;try{t=encodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrl"}}return t}},decodeUrlComponent:function(e){if(void 0!==e){var t;try{t=decodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrlComponent"}}return t}},decodeUrl:function(e){if(void 0!==e){var t;try{t=decodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrl"}}return t}}}})();t.exports=o}).call(this)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":6}],3:[function(e,t,n){var r=e("./datetime"),o=e("./functions"),i=e("./utils"),a=e("./parser"),l=e("./signature"),s=function(){"use strict";var e=i.isNumeric,t=i.isArrayOfStrings,n=i.isArrayOfNumbers,s=i.createSequence,u=i.isSequence,c=i.isFunction,p=i.isLambda,d=i.isIterable,f=i.getFunctionArity,h=i.isDeepEqual,v=D(null);function*y(n,r,i){var a,l=i.lookup("__evaluate_entry");switch(l&&l(n,r,i),n.type){case"path":a=yield*function*(e,t,n){var r,o;r=Array.isArray(t)&&"variable"!==e.steps[0].type?t:s(t);for(var i=!1,a=void 0,l=0;l<e.steps.length;l++){var u=e.steps[l];if(u.tuple&&(i=!0),0===l&&u.consarray?o=yield*y(u,r,n):i?a=yield*x(u,r,a,n):o=yield*g(u,r,n,l===e.steps.length-1),!i&&(void 0===o||0===o.length))break;void 0===u.focus&&(r=o)}if(i)if(e.tuple)o=a;else for(o=s(),l=0;l<a.length;l++)o.push(a[l]["@"]);return e.keepSingletonArray&&(Array.isArray(o)&&o.cons&&!o.sequence&&(o=s(o)),o.keepSingleton=!0),e.hasOwnProperty("group")&&(o=yield*k(e.group,i?a:o,n)),o}(n,r,i);break;case"binary":a=yield*function*(t,n,r){var i,a=yield*y(t.lhs,n,r),l=t.value,s=function*(){return yield*y(t.rhs,n,r)};if("and"===l||"or"===l)try{return yield*function*(e,t,n){var r,o=O(e);switch(n){case"and":r=o&&O(yield*t());break;case"or":r=o||O(yield*t())}return r}(a,s,l)}catch(e){throw e.position=t.position,e.token=l,e}var u=yield*s();try{switch(l){case"+":case"-":case"*":case"/":case"%":i=function(t,n,r){var o;if(void 0!==t&&!e(t))throw{code:"T2001",stack:(new Error).stack,value:t};if(void 0!==n&&!e(n))throw{code:"T2002",stack:(new Error).stack,value:n};if(void 0===t||void 0===n)return o;switch(r){case"+":o=t+n;break;case"-":o=t-n;break;case"*":o=t*n;break;case"/":o=t/n;break;case"%":o=t%n}return o}(a,u,l);break;case"=":case"!=":i=function(e,t,n){var r;if(void 0===e||void 0===t)return!1;switch(n){case"=":r=h(e,t);break;case"!=":r=!h(e,t)}return r}(a,u,l);break;case"<":case"<=":case">":case">=":i=function(e,t,n){var r,o=typeof e,i=typeof t;if("undefined"!==o&&"string"!==o&&"number"!==o||"undefined"!==i&&"string"!==i&&"number"!==i)throw{code:"T2010",stack:(new Error).stack,value:"string"!==o&&"number"!==o?e:t};if("undefined"!==o&&"undefined"!==i){if(o!==i)throw{code:"T2009",stack:(new Error).stack,value:e,value2:t};switch(n){case"<":r=e<t;break;case"<=":r=e<=t;break;case">":r=e>t;break;case">=":r=e>=t}return r}}(a,u,l);break;case"&":i=function(e,t){var n="",r="";return void 0!==e&&(n=o.string(e)),void 0!==t&&(r=o.string(t)),n.concat(r)}(a,u);break;case"..":i=function(e,t){var n;if(void 0!==e&&!Number.isInteger(e))throw{code:"T2003",stack:(new Error).stack,value:e};if(void 0!==t&&!Number.isInteger(t))throw{code:"T2004",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return n;if(e>t)return n;var r=t-e+1;if(r>1e7)throw{code:"D2014",stack:(new Error).stack,value:r};n=new Array(r);for(var o=e,i=0;o<=t;o++,i++)n[i]=o;return n.sequence=!0,n}(a,u);break;case"in":i=function(e,t){var n=!1;if(void 0===e||void 0===t)return!1;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)if(t[r]===e){n=!0;break}return n}(a,u)}}catch(e){throw e.position=t.position,e.token=l,e}return i}(n,r,i);break;case"unary":a=yield*function*(t,n,r){var i;switch(t.value){case"-":if(void 0===(i=yield*y(t.expression,n,r)))i=void 0;else{if(!e(i))throw{code:"D1002",stack:(new Error).stack,position:t.position,token:t.value,value:i};i=-i}break;case"[":i=[];for(var a=0;a<t.expressions.length;a++){var l=t.expressions[a],s=yield*y(l,n,r);void 0!==s&&("["===l.value?i.push(s):i=o.append(i,s))}t.consarray&&Object.defineProperty(i,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":i=yield*k(t,n,r)}return i}(n,r,i);break;case"name":a=function(e,t,n){return o.lookup(t,e.value)}(n,r);break;case"string":case"number":case"value":a=function(e){return e.value}(n);break;case"wildcard":a=function(e,t){var n=s();return Array.isArray(t)&&t.outerWrapper&&t.length>0&&(t=t[0]),null!==t&&"object"==typeof t&&Object.keys(t).forEach((function(e){var r=t[e];Array.isArray(r)?(r=_(r),n=o.append(n,r)):n.push(r)})),n}(0,r);break;case"descendant":a=function(e,t){var n,r=s();return void 0!==t&&(w(t,r),n=1===r.length?r[0]:r),n}(0,r);break;case"parent":a=i.lookup(n.slot.label);break;case"condition":a=yield*function*(e,t,n){var r,i=yield*y(e.condition,t,n);return o.boolean(i)?r=yield*y(e.then,t,n):void 0!==e.else&&(r=yield*y(e.else,t,n)),r}(n,r,i);break;case"block":a=yield*function*(e,t,n){for(var r,o=D(n),i=0;i<e.expressions.length;i++)r=yield*y(e.expressions[i],t,o);return r}(n,r,i);break;case"bind":a=yield*function*(e,t,n){var r=yield*y(e.rhs,t,n);return n.bind(e.lhs.value,r),r}(n,r,i);break;case"regex":a=function(e){var t=new F.RegexEngine(e.value),n=function(r,o){var i;t.lastIndex=o||0;var a=t.exec(r);if(null!==a){if(i={match:a[0],start:a.index,end:a.index+a[0].length,groups:[]},a.length>1)for(var l=1;l<a.length;l++)i.groups.push(a[l]);i.next=function(){if(!(t.lastIndex>=r.length)){var o=n(r,t.lastIndex);if(o&&""===o.match)throw{code:"D1004",stack:(new Error).stack,position:e.position,value:e.value.source};return o}}}return i};return n}(n);break;case"function":a=yield*P(n,r,i);break;case"variable":a=function(e,t,n){return""===e.value?t&&t.outerWrapper?t[0]:t:n.lookup(e.value)}(n,r,i);break;case"lambda":a=function(e,t,n){var r={_jsonata_lambda:!0,input:t,environment:n,arguments:e.arguments,signature:e.signature,body:e.body};return!0===e.thunk&&(r.thunk=!0),r.apply=function*(e,n){return yield*T(r,n,t,e.environment)},r}(n,r,i);break;case"partial":a=yield*function*(e,t,n){for(var r,o=[],i=0;i<e.arguments.length;i++){var a=e.arguments[i];"operator"===a.type&&"?"===a.value?o.push(a):o.push(yield*y(a,t,n))}var l=yield*y(e.procedure,t,n);if(void 0===l&&"path"===e.procedure.type&&n.lookup(e.procedure.steps[0].value))throw{code:"T1007",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};if(p(l))r=L(l,o);else if(l&&!0===l._jsonata_function)r=I(l.implementation,o);else{if("function"!=typeof l)throw{code:"T1008",stack:(new Error).stack,position:e.position,token:"path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value};r=I(l,o)}return r}(n,r,i);break;case"apply":a=yield*function*(e,t,n){var r,o=yield*y(e.lhs,t,n);if("function"===e.rhs.type)r=yield*P(e.rhs,t,n,{context:o});else{var i=yield*y(e.rhs,t,n);if(!c(i))throw{code:"T2006",stack:(new Error).stack,position:e.position,value:i};if(c(o)){var a=yield*y(R,null,n);r=yield*T(a,[o,i],null,n)}else r=yield*T(i,[o],null,n)}return r}(n,r,i);break;case"transform":a=function(e,n,r){return M((function*(n){if(void 0!==n){var o=r.lookup("clone");if(!c(o))throw{code:"T2013",stack:(new Error).stack,position:e.position};var i=yield*T(o,[n],null,r),a=yield*y(e.pattern,i,r);if(void 0!==a){Array.isArray(a)||(a=[a]);for(var l=0;l<a.length;l++){var s=a[l],u=yield*y(e.update,s,r),p=typeof u;if("undefined"!==p){if("object"!==p||null===u||Array.isArray(u))throw{code:"T2011",stack:(new Error).stack,position:e.update.position,value:u};for(var d in u)s[d]=u[d]}if(void 0!==e.delete){var f=yield*y(e.delete,s,r);if(void 0!==f){var h=f;if(Array.isArray(f)||(f=[f]),!t(f))throw{code:"T2012",stack:(new Error).stack,position:e.delete.position,value:h};for(var v=0;v<f.length;v++)"object"==typeof s&&null!==s&&delete s[f[v]]}}}}return i}}),"<(oa):o>")}(n,0,i)}if(!i.async||null!=a&&"function"==typeof a.then||(a=Promise.resolve(a)),i.async&&"function"==typeof a.then&&n.nextFunction&&"function"==typeof a[n.nextFunction]||(a=yield a),Object.prototype.hasOwnProperty.call(n,"predicate"))for(var d=0;d<n.predicate.length;d++)a=yield*E(n.predicate[d].expr,a,i);"path"!==n.type&&Object.prototype.hasOwnProperty.call(n,"group")&&(a=yield*k(n.group,a,i));var f=i.lookup("__evaluate_exit");return f&&f(n,r,i,a),a&&u(a)&&!a.tupleStream&&(n.keepArray&&(a.keepSingleton=!0),0===a.length?a=void 0:1===a.length&&(a=a.keepSingleton?a:a[0])),a}function m(e,t){var n=D(e);for(const e in t)n.bind(e,t[e]);return n}function*g(e,t,n,r){var o;if("sort"===e.type)return o=yield*S(e,t,n),e.stages&&(o=yield*b(e.stages,o,n)),o;o=s();for(var i=0;i<t.length;i++){var a=yield*y(e,t[i],n);if(e.stages)for(var l=0;l<e.stages.length;l++)a=yield*E(e.stages[l].expr,a,n);void 0!==a&&o.push(a)}var c=s();return r&&1===o.length&&Array.isArray(o[0])&&!u(o[0])?c=o[0]:o.forEach((function(e){!Array.isArray(e)||e.cons?c.push(e):e.forEach((e=>c.push(e)))})),c}function*b(e,t,n){for(var r=t,o=0;o<e.length;o++){var i=e[o];switch(i.type){case"filter":r=yield*E(i.expr,r,n);break;case"index":for(var a=0;a<r.length;a++)r[a][i.value]=a}}return r}function*x(e,t,n,r){var o;if("sort"===e.type){if(n)o=yield*S(e,n,r);else{var i=yield*S(e,t,r);(o=s()).tupleStream=!0;for(var a=0;a<i.length;a++){var l={"@":i[a]};l[e.index]=a,o.push(l)}}return e.stages&&(o=yield*b(e.stages,o,r)),o}(o=s()).tupleStream=!0;var u=r;void 0===n&&(n=t.map((e=>({"@":e}))));for(var c=0;c<n.length;c++){u=m(r,n[c]);var p=yield*y(e,n[c]["@"],u);if(void 0!==p){Array.isArray(p)||(p=[p]);for(var d=0;d<p.length;d++)l={},Object.assign(l,n[c]),p.tupleStream?Object.assign(l,p[d]):(e.focus?(l[e.focus]=p[d],l["@"]=n[c]["@"]):l["@"]=p[d],e.index&&(l[e.index]=d),e.ancestor&&(l[e.ancestor.label]=n[c]["@"])),o.push(l)}}return e.stages&&(o=yield*b(e.stages,o,r)),o}function*E(t,r,i){var a=s();if(r&&r.tupleStream&&(a.tupleStream=!0),Array.isArray(r)||(r=s(r)),"number"===t.type){var l=Math.floor(t.value);l<0&&(l=r.length+l),void 0!==(u=r[l])&&(Array.isArray(u)?a=u:a.push(u))}else for(l=0;l<r.length;l++){var u,c=u=r[l],p=i;r.tupleStream&&(c=u["@"],p=m(i,u));var d=yield*y(t,c,p);e(d)&&(d=[d]),n(d)?d.forEach((function(e){var t=Math.floor(e);t<0&&(t=r.length+t),t===l&&a.push(u)})):o.boolean(d)&&a.push(u)}return a}function _(e,t){return void 0===t&&(t=[]),Array.isArray(e)?e.forEach((function(e){_(e,t)})):t.push(e),t}function w(e,t){Array.isArray(e)||t.push(e),Array.isArray(e)?e.forEach((function(e){w(e,t)})):null!==e&&"object"==typeof e&&Object.keys(e).forEach((function(n){w(e[n],t)}))}function O(e){var t=o.boolean(e);return void 0!==t&&t}function*k(e,t,n){var r={},i={},a=!(!t||!t.tupleStream);Array.isArray(t)||(t=s(t)),0===t.length&&t.push(void 0);for(var l=0;l<t.length;l++)for(var u=t[l],c=a?m(n,u):n,p=0;p<e.lhs.length;p++){var d=e.lhs[p],f=yield*y(d[0],a?u["@"]:u,c);if("string"!=typeof f&&void 0!==f)throw{code:"T1003",stack:(new Error).stack,position:e.position,value:f};if(void 0!==f){var h={data:u,exprIndex:p};if(i.hasOwnProperty(f)){if(i[f].exprIndex!==p)throw{code:"D1009",stack:(new Error).stack,position:e.position,value:f};i[f].data=o.append(i[f].data,u)}else i[f]=h}}for(f in i){var v=(h=i[f]).data;if(c=n,a){var g=A(h.data);v=g["@"],delete g["@"],c=m(n,g)}var b=yield*y(e.lhs[h.exprIndex][1],v,c);void 0!==b&&(r[f]=b)}return r}function A(e){if(!Array.isArray(e))return e;var t={};Object.assign(t,e[0]);for(var n=1;n<e.length;n++)for(const r in e[n])t[r]=o.append(t[r],e[n][r]);return t}function*S(e,t,n){var r=t,i=!!t.tupleStream,a={environment:n,input:t};return yield*o.sort.apply(a,[r,function*(t,r){for(var o=0,a=0;0===o&&a<e.terms.length;a++){var l=e.terms[a],s=t,u=n;i&&(s=t["@"],u=m(n,t));var c=yield*y(l.expression,s,u);s=r,u=n,i&&(s=r["@"],u=m(n,r));var p=yield*y(l.expression,s,u),d=typeof c,f=typeof p;if("undefined"!==d)if("undefined"!==f){if("string"!==d&&"number"!==d||"string"!==f&&"number"!==f)throw{code:"T2008",stack:(new Error).stack,position:e.position,value:"string"!==d&&"number"!==d?c:p};if(d!==f)throw{code:"T2007",stack:(new Error).stack,position:e.position,value:c,value2:p};c!==p&&(o=c<p?-1:1,!0===l.descending&&(o=-o))}else o=-1;else o="undefined"===f?0:1}return 1===o}])}var R=a("function($f, $g) { function($x){ $g($f($x)) } }");function*P(e,t,n,r){var o,i=yield*y(e.procedure,t,n);if(void 0===i&&"path"===e.procedure.type&&n.lookup(e.procedure.steps[0].value))throw{code:"T1005",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};var a=[];void 0!==r&&a.push(r.context);for(var l=0;l<e.arguments.length;l++){const r=yield*y(e.arguments[l],t,n);if(c(r)){const e=function*(...e){return yield*T(r,e,null,n)};e.arity=f(r),a.push(e)}else a.push(r)}var s="path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value;try{"object"==typeof i&&(i.token=s,i.position=e.position),o=yield*T(i,a,t,n)}catch(t){throw t.position||(t.position=e.position),t.token||(t.token=s),t}return o}function*T(e,t,n,r){var o;for(o=yield*j(e,t,n,r);p(o)&&!0===o.thunk;){var i=yield*y(o.body.procedure,o.input,o.environment);"variable"===o.body.procedure.type&&(i.token=o.body.procedure.value),i.position=o.body.procedure.position;for(var a=[],l=0;l<o.body.arguments.length;l++)a.push(yield*y(o.body.arguments[l],o.input,o.environment));o=yield*j(i,a,n,r)}return o}function*j(e,t,n,r){var o;try{var i=t;if(e&&(i=function(e,t,n){return void 0===e?t:e.validate(t,n)}(e.signature,t,n)),p(e))o=yield*function*(e,t){var n=D(e.environment);return e.arguments.forEach((function(e,r){n.bind(e.value,t[r])})),"function"==typeof e.body?yield*function*(e,t){var n=C(e).map((function(e){return t.lookup(e.trim())})),r={environment:t},o=e.apply(r,n);return d(o)&&(o=yield*o),o}(e.body,n):yield*y(e.body,e.input,n)}(e,i);else if(e&&!0===e._jsonata_function){var a={environment:r,input:n};o=e.implementation.apply(a,i),d(o)&&(o=yield*o)}else{if("function"!=typeof e)throw{code:"T1006",stack:(new Error).stack};o=e.apply(n,i),d(o)&&(o=yield*o)}}catch(t){throw e&&(void 0===t.token&&void 0!==e.token&&(t.token=e.token),t.position=e.position),t}return o}function L(e,t){var n=D(e.environment),r=[];return e.arguments.forEach((function(e,o){var i=t[o];i&&"operator"===i.type&&"?"===i.value?r.push(e):n.bind(e.value,i)})),{_jsonata_lambda:!0,input:e.input,environment:n,arguments:r,body:e.body}}function I(e,t){var n=C(e),r="function("+(n=n.map((function(e){return"$"+e.trim()}))).join(", ")+"){ _ }",o=a(r);return o.body=e,L(o,t)}function C(e){var t=e.toString();return/\(([^)]*)\)/.exec(t)[1].split(",")}function M(e,t){var n={_jsonata_function:!0,implementation:e};return void 0!==t&&(n.signature=l(t)),n}function D(e){var t={};return{bind:function(e,n){t[e]=n},lookup:function(n){var r;return t.hasOwnProperty(n)?r=t[n]:e&&(r=e.lookup(n)),r},timestamp:e?e.timestamp:null,async:!!e&&e.async,global:e?e.global:{ancestry:[null]}}}v.bind("sum",M(o.sum,"<a<n>:n>")),v.bind("count",M(o.count,"<a:n>")),v.bind("max",M(o.max,"<a<n>:n>")),v.bind("min",M(o.min,"<a<n>:n>")),v.bind("average",M(o.average,"<a<n>:n>")),v.bind("string",M(o.string,"<x-b?:s>")),v.bind("substring",M(o.substring,"<s-nn?:s>")),v.bind("substringBefore",M(o.substringBefore,"<s-s:s>")),v.bind("substringAfter",M(o.substringAfter,"<s-s:s>")),v.bind("lowercase",M(o.lowercase,"<s-:s>")),v.bind("uppercase",M(o.uppercase,"<s-:s>")),v.bind("length",M(o.length,"<s-:n>")),v.bind("trim",M(o.trim,"<s-:s>")),v.bind("pad",M(o.pad,"<s-ns?:s>")),v.bind("match",M(o.match,"<s-f<s:o>n?:a<o>>")),v.bind("contains",M(o.contains,"<s-(sf):b>")),v.bind("replace",M(o.replace,"<s-(sf)(sf)n?:s>")),v.bind("split",M(o.split,"<s-(sf)n?:a<s>>")),v.bind("join",M(o.join,"<a<s>s?:s>")),v.bind("formatNumber",M(o.formatNumber,"<n-so?:s>")),v.bind("formatBase",M(o.formatBase,"<n-n?:s>")),v.bind("formatInteger",M(r.formatInteger,"<n-s:s>")),v.bind("parseInteger",M(r.parseInteger,"<s-s:n>")),v.bind("number",M(o.number,"<(nsb)-:n>")),v.bind("floor",M(o.floor,"<n-:n>")),v.bind("ceil",M(o.ceil,"<n-:n>")),v.bind("round",M(o.round,"<n-n?:n>")),v.bind("abs",M(o.abs,"<n-:n>")),v.bind("sqrt",M(o.sqrt,"<n-:n>")),v.bind("power",M(o.power,"<n-n:n>")),v.bind("random",M(o.random,"<:n>")),v.bind("boolean",M(o.boolean,"<x-:b>")),v.bind("not",M(o.not,"<x-:b>")),v.bind("map",M(o.map,"<af>")),v.bind("zip",M(o.zip,"<a+>")),v.bind("filter",M(o.filter,"<af>")),v.bind("single",M(o.single,"<af?>")),v.bind("reduce",M(o.foldLeft,"<afj?:j>")),v.bind("sift",M(o.sift,"<o-f?:o>")),v.bind("keys",M(o.keys,"<x-:a<s>>")),v.bind("lookup",M(o.lookup,"<x-s:x>")),v.bind("append",M(o.append,"<xx:a>")),v.bind("exists",M(o.exists,"<x:b>")),v.bind("spread",M(o.spread,"<x-:a<o>>")),v.bind("merge",M(o.merge,"<a<o>:o>")),v.bind("reverse",M(o.reverse,"<a:a>")),v.bind("each",M(o.each,"<o-f:a>")),v.bind("error",M(o.error,"<s?:x>")),v.bind("assert",M(o.assert,"<bs?:x>")),v.bind("type",M(o.type,"<x:s>")),v.bind("sort",M(o.sort,"<af?:a>")),v.bind("shuffle",M(o.shuffle,"<a:a>")),v.bind("distinct",M(o.distinct,"<x:x>")),v.bind("base64encode",M(o.base64encode,"<s-:s>")),v.bind("base64decode",M(o.base64decode,"<s-:s>")),v.bind("encodeUrlComponent",M(o.encodeUrlComponent,"<s-:s>")),v.bind("encodeUrl",M(o.encodeUrl,"<s-:s>")),v.bind("decodeUrlComponent",M(o.decodeUrlComponent,"<s-:s>")),v.bind("decodeUrl",M(o.decodeUrl,"<s-:s>")),v.bind("eval",M((function*(e,t){if(void 0!==e){var n=this.input;void 0!==t&&(n=t,Array.isArray(n)&&!u(n)&&((n=s(n)).outerWrapper=!0));try{var r=a(e,!1)}catch(e){throw V(e),{stack:(new Error).stack,code:"D3120",value:e.message,error:e}}try{var o=yield*y(r,n,this.environment)}catch(e){throw V(e),{stack:(new Error).stack,code:"D3121",value:e.message,error:e}}return o}}),"<sx?:x>")),v.bind("toMillis",M(r.toMillis,"<s-s?:n>")),v.bind("fromMillis",M(r.fromMillis,"<n-s?s?:s>")),v.bind("clone",M((function(e){if(void 0!==e)return JSON.parse(o.string(e))}),"<(oa)-:o>"));var N={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function V(e){var t=N[e.code];if(void 0!==t){var n=t.replace(/\{\{\{([^}]+)}}}/g,(function(){return e[arguments[1]]}));n=n.replace(/\{\{([^}]+)}}/g,(function(){return JSON.stringify(e[arguments[1]])})),e.message=n}}function F(e,t){var n,o;try{n=a(e,t&&t.recover),o=n.errors,delete n.errors}catch(e){throw V(e),e}var i=D(v),l=new Date;return i.bind("now",M((function(e,t){return r.fromMillis(l.getTime(),e,t)}),"<s?s?:s>")),i.bind("millis",M((function(){return l.getTime()}),"<:n>")),t&&t.RegexEngine?F.RegexEngine=t.RegexEngine:F.RegexEngine=RegExp,{evaluate:function(e,t,r){if(void 0!==o){var a={code:"S0500",position:0};throw V(a),a}var c,p,d;if(void 0!==t)for(var f in c=D(i),t)c.bind(f,t[f]);else c=i;if(c.bind("$",e),l=new Date,c.timestamp=l,Array.isArray(e)&&!u(e)&&((e=s(e)).outerWrapper=!0),"function"==typeof r){c.async=!0;var h=function(e){V(e),r(e,null)},v=function(e){(p=d.next(e)).done?r(null,p.value):p.value.then(v).catch(h)};d=y(n,e,c),(p=d.next()).value.then(v).catch(h)}else try{for(d=y(n,e,c),p=d.next();!p.done;)p=d.next(p.value);return p.value}catch(a){throw V(a),a}},assign:function(e,t){i.bind(e,t)},registerFunction:function(e,t,n){var r=M(t,n);i.bind(e,r)},ast:function(){return n},errors:function(){return o}}}return F.parser=a,F}();t.exports=s},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(e,t,n){var r=e("./signature");const o=(()=>{"use strict";var e={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},n=function(n){var r=0,o=n.length,i=function(e,t){return{type:e,value:t,position:r}},a=function(l){if(r>=o)return null;for(var s=n.charAt(r);r<o&&" \t\n\r\v".indexOf(s)>-1;)r++,s=n.charAt(r);if("/"===s&&"*"===n.charAt(r+1)){var u=r;for(r+=2,s=n.charAt(r);"*"!==s||"/"!==n.charAt(r+1);)if(s=n.charAt(++r),r>=o)throw{code:"S0106",stack:(new Error).stack,position:u};return r+=2,s=n.charAt(r),a(l)}if(!0!==l&&"/"===s)return r++,i("regex",function(){for(var e,t,i=r,a=0;r<o;){var l=n.charAt(r);if("/"===l&&"\\"!==n.charAt(r-1)&&0===a){if(""===(e=n.substring(i,r)))throw{code:"S0301",stack:(new Error).stack,position:r};for(r++,l=n.charAt(r),i=r;"i"===l||"m"===l;)r++,l=n.charAt(r);return t=n.substring(i,r)+"g",new RegExp(e,t)}"("!==l&&"["!==l&&"{"!==l||"\\"===n.charAt(r-1)||a++,")"!==l&&"]"!==l&&"}"!==l||"\\"===n.charAt(r-1)||a--,r++}throw{code:"S0302",stack:(new Error).stack,position:r}}());if("."===s&&"."===n.charAt(r+1))return r+=2,i("operator","..");if(":"===s&&"="===n.charAt(r+1))return r+=2,i("operator",":=");if("!"===s&&"="===n.charAt(r+1))return r+=2,i("operator","!=");if(">"===s&&"="===n.charAt(r+1))return r+=2,i("operator",">=");if("<"===s&&"="===n.charAt(r+1))return r+=2,i("operator","<=");if("*"===s&&"*"===n.charAt(r+1))return r+=2,i("operator","**");if("~"===s&&">"===n.charAt(r+1))return r+=2,i("operator","~>");if(Object.prototype.hasOwnProperty.call(e,s))return r++,i("operator",s);if('"'===s||"'"===s){var c=s;r++;for(var p="";r<o;){if("\\"===(s=n.charAt(r)))if(r++,s=n.charAt(r),Object.prototype.hasOwnProperty.call(t,s))p+=t[s];else{if("u"!==s)throw{code:"S0103",stack:(new Error).stack,position:r,token:s};var d=n.substr(r+1,4);if(!/^[0-9a-fA-F]+$/.test(d))throw{code:"S0104",stack:(new Error).stack,position:r};var f=parseInt(d,16);p+=String.fromCharCode(f),r+=4}else{if(s===c)return r++,i("string",p);p+=s}r++}throw{code:"S0101",stack:(new Error).stack,position:r}}var h,v=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(n.substring(r));if(null!==v){var y=parseFloat(v[0]);if(!isNaN(y)&&isFinite(y))return r+=v[0].length,i("number",y);throw{code:"S0102",stack:(new Error).stack,position:r,token:v[0]}}if("`"===s){r++;var m=n.indexOf("`",r);if(-1!==m)return h=n.substring(r,m),r=m+1,i("name",h);throw r=o,{code:"S0105",stack:(new Error).stack,position:r}}for(var g,b=r;;)if(g=n.charAt(b),b===o||" \t\n\r\v".indexOf(g)>-1||Object.prototype.hasOwnProperty.call(e,g)){if("$"===n.charAt(r))return h=n.substring(r+1,b),r=b,i("variable",h);switch(h=n.substring(r,b),r=b,h){case"or":case"in":case"and":return i("operator",h);case"true":return i("value",!0);case"false":return i("value",!1);case"null":return i("value",null);default:return r===o&&""===h?null:i("name",h)}}else b++};return a};return function(t,o){var i,a,l={},s=[],u=function(){var e=[];"(end)"!==i.id&&e.push({type:i.type,value:i.value,position:i.position});for(var t=a();null!==t;)e.push(t),t=a();return e},c={nud:function(){var e={code:"S0211",token:this.value,position:this.position};if(o)return e.remaining=u(),e.type="error",s.push(e),e;throw e.stack=(new Error).stack,e}},p=function(e,t){var n=l[e];return t=t||0,n?t>=n.lbp&&(n.lbp=t):((n=Object.create(c)).id=n.value=e,n.lbp=t,l[e]=n),n},d=function(e){if(o){e.remaining=u(),s.push(e);var t=l["(error)"];return(i=Object.create(t)).error=e,i.type="(error)",i}throw e.stack=(new Error).stack,e},f=function(e,n){if(e&&i.id!==e){var r={code:"(end)"===i.id?"S0203":"S0202",position:i.position,token:i.value,value:e};return d(r)}var o=a(n);if(null===o)return(i=l["(end)"]).position=t.length,i;var s,u=o.value,c=o.type;switch(c){case"name":case"variable":s=l["(name)"];break;case"operator":if(!(s=l[u]))return d({code:"S0204",stack:(new Error).stack,position:o.position,token:u});break;case"string":case"number":case"value":s=l["(literal)"];break;case"regex":c="regex",s=l["(regex)"];break;default:return d({code:"S0205",stack:(new Error).stack,position:o.position,token:u})}return(i=Object.create(s)).value=u,i.type=c,i.position=o.position,i},h=function(e){var t,n=i;for(f(null,!0),t=n.nud();e<i.lbp;)n=i,f(),t=n.led(t);return t},v=function(e){p(e,0).nud=function(){return this}},y=function(t,n,r){var o=n||e[t],i=p(t,o);return i.led=r||function(e){return this.lhs=e,this.rhs=h(o),this.type="binary",this},i},m=function(e,t,n){var r=p(e,t);return r.led=n,r},g=function(e,t){var n=p(e);return n.nud=t||function(){return this.expression=h(70),this.type="unary",this},n};v("(end)"),v("(name)"),v("(literal)"),v("(regex)"),p(":"),p(";"),p(","),p(")"),p("]"),p("}"),p(".."),y("."),y("+"),y("-"),y("*"),y("/"),y("%"),y("="),y("<"),y(">"),y("!="),y("<="),y(">="),y("&"),y("and"),y("or"),y("in"),v("and"),v("or"),v("in"),g("-"),y("~>"),m("(error)",10,(function(e){return this.lhs=e,this.error=i.error,this.remaining=u(),this.type="error",this})),g("*",(function(){return this.type="wildcard",this})),g("**",(function(){return this.type="descendant",this})),g("%",(function(){return this.type="parent",this})),y("(",e["("],(function(e){if(this.procedure=e,this.type="function",this.arguments=[],")"!==i.id)for(;"operator"===i.type&&"?"===i.id?(this.type="partial",this.arguments.push(i),f("?")):this.arguments.push(h(0)),","===i.id;)f(",");if(f(")",!0),"name"===e.type&&("function"===e.value||""===e.value)){if(this.arguments.forEach((function(e,t){if("variable"!==e.type)return d({code:"S0208",stack:(new Error).stack,position:e.position,token:e.value,value:t+1})})),this.type="lambda","<"===i.id){for(var t=i.position,n=1,o="<";n>0&&"{"!==i.id&&"(end)"!==i.id;){var a=f();">"===a.id?n--:"<"===a.id&&n++,o+=a.value}f(">");try{this.signature=r(o)}catch(e){return e.position=t+e.offset,d(e)}}f("{"),this.body=h(0),f("}")}return this})),g("(",(function(){for(var e=[];")"!==i.id&&(e.push(h(0)),";"===i.id);)f(";");return f(")",!0),this.type="block",this.expressions=e,this})),g("[",(function(){var e=[];if("]"!==i.id)for(;;){var t=h(0);if(".."===i.id){var n={type:"binary",value:"..",position:i.position,lhs:t};f(".."),n.rhs=h(0),t=n}if(e.push(t),","!==i.id)break;f(",")}return f("]",!0),this.expressions=e,this.type="unary",this})),y("[",e["["],(function(t){if("]"===i.id){for(var n=t;n&&"binary"===n.type&&"["===n.value;)n=n.lhs;return n.keepArray=!0,f("]"),t}return this.lhs=t,this.rhs=h(e["]"]),this.type="binary",f("]",!0),this})),y("^",e["^"],(function(e){f("(");for(var t=[];;){var n={descending:!1};if("<"===i.id?f("<"):">"===i.id&&(n.descending=!0,f(">")),n.expression=h(0),t.push(n),","!==i.id)break;f(",")}return f(")"),this.lhs=e,this.rhs=t,this.type="binary",this}));var b=function(e){var t=[];if("}"!==i.id)for(;;){var n=h(0);f(":");var r=h(0);if(t.push([n,r]),","!==i.id)break;f(",")}return f("}",!0),void 0===e?(this.lhs=t,this.type="unary"):(this.lhs=e,this.rhs=t,this.type="binary"),this};g("{",b),y("{",e["{"],b),m(":=",e[":="],(function(t){return"variable"!==t.type?d({code:"S0212",stack:(new Error).stack,position:t.position,token:t.value}):(this.lhs=t,this.rhs=h(e[":="]-1),this.type="binary",this)})),y("@",e["@"],(function(t){return this.lhs=t,this.rhs=h(e["@"]),"variable"!==this.rhs.type?d({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)})),y("#",e["#"],(function(t){return this.lhs=t,this.rhs=h(e["#"]),"variable"!==this.rhs.type?d({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)})),y("?",e["?"],(function(e){return this.type="condition",this.condition=e,this.then=h(0),":"===i.id&&(f(":"),this.else=h(0)),this})),g("|",(function(){return this.type="transform",this.pattern=h(0),f("|"),this.update=h(0),","===i.id&&(f(","),this.delete=h(0)),f("|"),this}));var x=function(e){var t;if("function"!==e.type||e.predicate)if("condition"===e.type)e.then=x(e.then),void 0!==e.else&&(e.else=x(e.else)),t=e;else if("block"===e.type){var n=e.expressions.length;n>0&&(e.expressions[n-1]=x(e.expressions[n-1])),t=e}else t=e;else{var r={type:"lambda",thunk:!0,arguments:[],position:e.position};r.body=e,t=r}return t},E=0,_=0,w=[],O=function(e,t){switch(e.type){case"name":case"wildcard":t.level--,0===t.level&&(void 0===e.ancestor||(w[t.index].slot.label=e.ancestor.label),e.ancestor=t,e.tuple=!0);break;case"parent":t.level++;break;case"block":e.expressions.length>0&&(e.tuple=!0,t=O(e.expressions[e.expressions.length-1],t));break;case"path":e.tuple=!0;var n=e.steps.length-1;for(t=O(e.steps[n--],t);t.level>0&&n>=0;)t=O(e.steps[n--],t);break;default:throw{code:"S0217",token:e.type,position:e.position}}return t},k=function(e,t){if(void 0!==t.seekingParent||"parent"===t.type){var n=void 0!==t.seekingParent?t.seekingParent:[];"parent"===t.type&&n.push(t.slot),void 0===e.seekingParent?e.seekingParent=n:Array.prototype.push.apply(e.seekingParent,n)}},A=function(e){var t=e.steps.length-1,n=e.steps[t],r=void 0!==n.seekingParent?n.seekingParent:[];"parent"===n.type&&r.push(n.slot);for(var o=0;o<r.length;o++){var i=r[o];for(t=e.steps.length-2;i.level>0;){if(t<0){void 0===e.seekingParent?e.seekingParent=[i]:e.seekingParent.push(i);break}for(var a=e.steps[t--];t>=0&&a.focus&&e.steps[t].focus;)a=e.steps[t--];i=O(a,i)}}},S=function(e){var t;switch(e.type){case"binary":switch(e.value){case".":var n=S(e.lhs);t="path"===n.type?n:{type:"path",steps:[n]},"parent"===n.type&&(t.seekingParent=[n.slot]);var r=S(e.rhs);"function"===r.type&&"path"===r.procedure.type&&1===r.procedure.steps.length&&"name"===r.procedure.steps[0].type&&"function"===t.steps[t.steps.length-1].type&&(t.steps[t.steps.length-1].nextFunction=r.procedure.steps[0].value),"path"===r.type?Array.prototype.push.apply(t.steps,r.steps):(void 0!==r.predicate&&(r.stages=r.predicate,delete r.predicate),t.steps.push(r)),t.steps.filter((function(e){if("number"===e.type||"value"===e.type)throw{code:"S0213",stack:(new Error).stack,position:e.position,value:e.value};return"string"===e.type})).forEach((function(e){e.type="name"})),t.steps.filter((function(e){return!0===e.keepArray})).length>0&&(t.keepSingletonArray=!0);var i=t.steps[0];"unary"===i.type&&"["===i.value&&(i.consarray=!0);var a=t.steps[t.steps.length-1];"unary"===a.type&&"["===a.value&&(a.consarray=!0),A(t);break;case"[":var l=t=S(e.lhs),u="predicate";if("path"===t.type&&(l=t.steps[t.steps.length-1],u="stages"),void 0!==l.group)throw{code:"S0209",stack:(new Error).stack,position:e.position};void 0===l[u]&&(l[u]=[]);var c=S(e.rhs);void 0!==c.seekingParent&&(c.seekingParent.forEach((e=>{1===e.level?O(l,e):e.level--})),k(l,c)),l[u].push({type:"filter",expr:c,position:e.position});break;case"{":if(void 0!==(t=S(e.lhs)).group)throw{code:"S0210",stack:(new Error).stack,position:e.position};t.group={lhs:e.rhs.map((function(e){return[S(e[0]),S(e[1])]})),position:e.position};break;case"^":"path"!==(t=S(e.lhs)).type&&(t={type:"path",steps:[t]});var p={type:"sort",position:e.position};p.terms=e.rhs.map((function(e){var t=S(e.expression);return k(p,t),{descending:e.descending,expression:t}})),t.steps.push(p),A(t);break;case":=":(t={type:"bind",value:e.value,position:e.position}).lhs=S(e.lhs),t.rhs=S(e.rhs),k(t,t.rhs);break;case"@":if(t=S(e.lhs),l=t,"path"===t.type&&(l=t.steps[t.steps.length-1]),void 0!==l.stages||void 0!==l.predicate)throw{code:"S0215",stack:(new Error).stack,position:e.position};if("sort"===l.type)throw{code:"S0216",stack:(new Error).stack,position:e.position};e.keepArray&&(l.keepArray=!0),l.focus=e.rhs.value,l.tuple=!0;break;case"#":t=S(e.lhs),l=t,"path"===t.type?l=t.steps[t.steps.length-1]:(t={type:"path",steps:[t]},void 0!==l.predicate&&(l.stages=l.predicate,delete l.predicate)),void 0===l.stages?l.index=e.rhs.value:l.stages.push({type:"index",value:e.rhs.value,position:e.position}),l.tuple=!0;break;case"~>":(t={type:"apply",value:e.value,position:e.position}).lhs=S(e.lhs),t.rhs=S(e.rhs);break;default:(t={type:e.type,value:e.value,position:e.position}).lhs=S(e.lhs),t.rhs=S(e.rhs),k(t,t.lhs),k(t,t.rhs)}break;case"unary":t={type:e.type,value:e.value,position:e.position},"["===e.value?t.expressions=e.expressions.map((function(e){var n=S(e);return k(t,n),n})):"{"===e.value?t.lhs=e.lhs.map((function(e){var n=S(e[0]);k(t,n);var r=S(e[1]);return k(t,r),[n,r]})):(t.expression=S(e.expression),"-"===e.value&&"number"===t.expression.type?(t=t.expression).value=-t.value:k(t,t.expression));break;case"function":case"partial":(t={type:e.type,name:e.name,value:e.value,position:e.position}).arguments=e.arguments.map((function(e){var n=S(e);return k(t,n),n})),t.procedure=S(e.procedure);break;case"lambda":t={type:e.type,arguments:e.arguments,signature:e.signature,position:e.position};var d=S(e.body);t.body=x(d);break;case"condition":(t={type:e.type,position:e.position}).condition=S(e.condition),k(t,t.condition),t.then=S(e.then),k(t,t.then),void 0!==e.else&&(t.else=S(e.else),k(t,t.else));break;case"transform":(t={type:e.type,position:e.position}).pattern=S(e.pattern),t.update=S(e.update),void 0!==e.delete&&(t.delete=S(e.delete));break;case"block":(t={type:e.type,position:e.position}).expressions=e.expressions.map((function(e){var n=S(e);return k(t,n),(n.consarray||"path"===n.type&&n.steps[0].consarray)&&(t.consarray=!0),n}));break;case"name":t={type:"path",steps:[e]},e.keepArray&&(t.keepSingletonArray=!0);break;case"parent":t={type:"parent",slot:{label:"!"+E++,level:1,index:_++}},w.push(t);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":t=e;break;case"operator":if("and"===e.value||"or"===e.value||"in"===e.value)e.type="name",t=S(e);else{if("?"!==e.value)throw{code:"S0201",stack:(new Error).stack,position:e.position,token:e.value};t=e}break;case"error":t=e,e.lhs&&(t=S(e.lhs));break;default:var f="S0206";"(end)"===e.id&&(f="S0207");var h={code:f,position:e.position,token:e.value};if(o)return s.push(h),{type:"error",error:h};throw h.stack=(new Error).stack,h}return e.keepArray&&(t.keepArray=!0),t};a=n(t),f();var R=h(0);if("(end)"!==i.id){var P={code:"S0201",position:i.position,token:i.value};d(P)}if("parent"===(R=S(R)).type||void 0!==R.seekingParent)throw{code:"S0217",token:R.type,position:R.position};return s.length>0&&(R.errors=s),R}})();t.exports=o},{"./signature":5}],5:[function(e,t,n){var r=e("./utils");const o=(()=>{"use strict";var e={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};return function(t){for(var n=1,o=[],i={},a=i;n<t.length;){var l=t.charAt(n);if(":"===l)break;var s=function(){o.push(i),a=i,i={}},u=function(e,t,n,r){for(var o=1,i=t;i<e.length;)if(i++,(l=e.charAt(i))===r){if(0==--o)break}else l===n&&o++;return i};switch(l){case"s":case"n":case"b":case"l":case"o":i.regex="["+l+"m]",i.type=l,s();break;case"a":i.regex="[asnblfom]",i.type=l,i.array=!0,s();break;case"f":i.regex="f",i.type=l,s();break;case"j":i.regex="[asnblom]",i.type=l,s();break;case"x":i.regex="[asnblfom]",i.type=l,s();break;case"-":a.context=!0,a.contextRegex=new RegExp(a.regex),a.regex+="?";break;case"?":case"+":a.regex+=l;break;case"(":var c=u(t,n,"(",")"),p=t.substring(n+1,c);if(-1!==p.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:p,offset:n};i.regex="["+p+"m]",i.type="("+p+")",n=c,s();break;case"<":if("a"!==a.type&&"f"!==a.type)throw{code:"S0401",stack:(new Error).stack,value:a.type,offset:n};var d=u(t,n,"<",">");a.subtype=t.substring(n+1,d),n=d}n++}var f="^"+o.map((function(e){return"("+e.regex+")"})).join("")+"$",h=new RegExp(f),v=function(e){var t;if(r.isFunction(e))t="f";else switch(typeof e){case"string":t="s";break;case"number":t="n";break;case"boolean":t="b";break;case"object":t=null===e?"l":Array.isArray(e)?"a":"o";break;default:t="m"}return t};return{definition:t,validate:function(t,n){var r="";t.forEach((function(e){r+=v(e)}));var i=h.exec(r);if(i){var a=[],l=0;return o.forEach((function(r,o){var s=t[l],u=i[o+1];if(""===u)if(r.context&&r.contextRegex){var c=v(n);if(!r.contextRegex.test(c))throw{code:"T0411",stack:(new Error).stack,value:n,index:l+1};a.push(n)}else a.push(s),l++;else u.split("").forEach((function(n){if("a"===r.type){if("m"===n)s=void 0;else{s=t[l];var o=!0;if(void 0!==r.subtype)if("a"!==n&&u!==r.subtype)o=!1;else if("a"===n&&s.length>0){var i=v(s[0]);o=i===r.subtype.charAt(0)&&0===s.filter((function(e){return v(e)!==i})).length}if(!o)throw{code:"T0412",stack:(new Error).stack,value:s,index:l+1,type:e[r.subtype]};"a"!==n&&(s=[s])}a.push(s),l++}else a.push(s),l++}))})),a}!function(e,t){for(var n="^",r=0,i=0;i<o.length;i++){n+=o[i].regex;var a=t.match(n);if(null===a)throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1};r=a[0].length}throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1}}(t,r)}}}})();t.exports=o},{"./utils":6}],6:[function(e,t,n){const r=(()=>{"use strict";function e(e){var t=!1;if("number"==typeof e&&(t=!isNaN(e))&&!isFinite(e))throw{code:"D1001",value:e,stack:(new Error).stack};return t}var t=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";return{isNumeric:e,isArrayOfStrings:function(e){var t=!1;return Array.isArray(e)&&(t=0===e.filter((function(e){return"string"!=typeof e})).length),t},isArrayOfNumbers:function(t){var n=!1;return Array.isArray(t)&&(n=0===t.filter((function(t){return!e(t)})).length),n},createSequence:function(){var e=[];return e.sequence=!0,1===arguments.length&&e.push(arguments[0]),e},isSequence:function(e){return!0===e.sequence&&Array.isArray(e)},isFunction:function(e){return e&&(!0===e._jsonata_function||!0===e._jsonata_lambda)||"function"==typeof e},isLambda:function(e){return e&&!0===e._jsonata_lambda},isIterable:function(e){return"object"==typeof e&&null!==e&&t in e&&"next"in e&&"function"==typeof e.next},getFunctionArity:function(e){return"number"==typeof e.arity?e.arity:"function"==typeof e.implementation?e.implementation.length:"number"==typeof e.length?e.length:e.arguments.length},isDeepEqual:function e(t,n){if(t===n)return!0;if("object"==typeof t&&"object"==typeof n&&null!==t&&null!==n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}var o=Object.getOwnPropertyNames(t),i=Object.getOwnPropertyNames(n);if(o.length!==i.length)return!1;for(o=o.sort(),i=i.sort(),r=0;r<o.length;r++)if(o[r]!==i[r])return!1;for(r=0;r<o.length;r++){var a=o[r];if(!e(t[a],n[a]))return!1}return!0}return!1},stringToArray:function(e){var t=[];for(let n of e)t.push(n);return t}}})();t.exports=r},{}]},{},[3])(3)},1989:(e,t,n)=>{var r=n(1789),o=n(401),i=n(7667),a=n(1327),l=n(1866);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},8407:(e,t,n)=>{var r=n(7040),o=n(4125),i=n(2117),a=n(7518),l=n(4705);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),o=n(1285),i=n(6e3),a=n(9916),l=n(5265);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,e.exports=s},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),o=n(619),i=n(2385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},7443:(e,t,n)=>{var r=n(2118);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},9932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1848:e=>{e.exports=function(e,t,n,r){for(var o=e.length,i=n+(r?1:-1);r?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},7786:(e,t,n)=>{var r=n(1811),o=n(327);e.exports=function(e,t){for(var n=0,i=(t=r(t,e)).length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},4239:(e,t,n)=>{var r=n(2705),o=n(9607),i=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},2118:(e,t,n)=>{var r=n(1848),o=n(2722),i=n(2351);e.exports=function(e,t,n){return t==t?i(e,t,n):r(e,o,n)}},2722:e=>{e.exports=function(e){return e!=e}},8458:(e,t,n)=>{var r=n(3560),o=n(5346),i=n(3218),a=n(346),l=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,c=s.toString,p=u.hasOwnProperty,d=RegExp("^"+c.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:l).test(a(e))}},531:(e,t,n)=>{var r=n(2705),o=n(9932),i=n(1469),a=n(3448),l=r?r.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(a(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},5652:(e,t,n)=>{var r=n(8668),o=n(7443),i=n(1196),a=n(4757),l=n(3593),s=n(1814);e.exports=function(e,t,n){var u=-1,c=o,p=e.length,d=!0,f=[],h=f;if(n)d=!1,c=i;else if(p>=200){var v=t?null:l(e);if(v)return s(v);d=!1,c=a,h=new r}else h=t?[]:f;e:for(;++u<p;){var y=e[u],m=t?t(y):y;if(y=n||0!==y?y:0,d&&m==m){for(var g=h.length;g--;)if(h[g]===m)continue e;t&&h.push(m),f.push(y)}else c(h,m,n)||(h!==f&&h.push(m),f.push(y))}return f}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,n)=>{var r=n(1469),o=n(5403),i=n(5514),a=n(9833);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(a(e))}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},3593:(e,t,n)=>{var r=n(8525),o=n(308),i=n(1814),a=r&&1/i(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=a},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),o=n(7801);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[l]=n:delete e[l]),o}},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5403:(e,t,n)=>{var r=n(1469),o=n(3448),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||a.test(e)||!i.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,o=n(4429),i=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!i&&i in e}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),o=n(8407),i=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},4523:(e,t,n)=>{var r=n(8306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:(e,t,n)=>{var r=n(1957),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},2351:e=>{e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},5514:(e,t,n)=>{var r=n(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,(function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)})),t}));e.exports=a},327:(e,t,n)=>{var r=n(3448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,n)=>{var r=n(7786);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},1469:e=>{var t=Array.isArray;e.exports=t},3560:(e,t,n)=>{var r=n(4239),o=n(3218);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),o=n(7005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},8306:(e,t,n)=>{var r=n(3369);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},308:e=>{e.exports=function(){}},9833:(e,t,n)=>{var r=n(531);e.exports=function(e){return null==e?"":r(e)}},4908:(e,t,n)=>{var r=n(5652);e.exports=function(e){return e&&e.length?r(e):[]}},466:function(e){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test;var a=/\S/;function l(e){return!function(e,t){return i.call(e,t)}(a,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,c=/\s+/,p=/\s*=/,d=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,r,i,a=this.cache;if(a.hasOwnProperty(e))t=a[e];else{for(var l,s,u,c=this,p=!1;c;){if(e.indexOf(".")>0)for(l=c.view,s=e.split("."),u=0;null!=l&&u<s.length;)u===s.length-1&&(p=o(l,s[u])||(r=l,i=s[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(i))),l=l[s[u++]];else l=c.view[e],p=o(c.view,e);if(p){t=l;break}c=c.parent}a[e]=t}return n(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,n){var o=this.templateCache,i=e+":"+(n||m.tags).join(":"),a=void 0!==o,s=a?o.get(i):void 0;return null==s&&(s=function(e,n){if(!e)return[];var o,i,a,s=!1,v=[],y=[],g=[],b=!1,x=!1,E="",_=0;function w(){if(b&&!x)for(;g.length;)delete y[g.pop()];else g=[];b=!1,x=!1}function O(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),i=new RegExp("\\s*"+r(e[1])),a=new RegExp("\\s*"+r("}"+e[1]))}O(n||m.tags);for(var k,A,S,R,P,T,j=new h(e);!j.eos();){if(k=j.pos,S=j.scanUntil(o))for(var L=0,I=S.length;L<I;++L)l(R=S.charAt(L))?(g.push(y.length),E+=R):(x=!0,s=!0,E+=" "),y.push(["text",R,k,k+1]),k+=1,"\n"===R&&(w(),E="",_=0,s=!1);if(!j.scan(o))break;if(b=!0,A=j.scan(f)||"name",j.scan(u),"="===A?(S=j.scanUntil(p),j.scan(p),j.scanUntil(i)):"{"===A?(S=j.scanUntil(a),j.scan(d),j.scanUntil(i),A="&"):S=j.scanUntil(i),!j.scan(i))throw new Error("Unclosed tag at "+j.pos);if(P=">"==A?[A,S,k,j.pos,E,_,s]:[A,S,k,j.pos],_++,y.push(P),"#"===A||"^"===A)v.push(P);else if("/"===A){if(!(T=v.pop()))throw new Error('Unopened section "'+S+'" at '+k);if(T[1]!==S)throw new Error('Unclosed section "'+T[1]+'" at '+k)}else"name"===A||"{"===A||"&"===A?x=!0:"="===A&&O(S)}if(w(),T=v.pop())throw new Error('Unclosed section "'+T[1]+'" at '+j.pos);return function(e){for(var t,n=[],r=n,o=[],i=0,a=e.length;i<a;++i)switch((t=e[i])[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":o.pop()[5]=t[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(y))}(e,n),a&&o.set(i,s)),s},y.prototype.render=function(e,t,n,r){var o=this.getConfigTags(r),i=this.parse(e,o),a=t instanceof v?t:new v(t,void 0);return this.renderTokens(i,a,n,e,r)},y.prototype.renderTokens=function(e,t,n,r,o){for(var i,a,l,s="",u=0,c=e.length;u<c;++u)l=void 0,"#"===(a=(i=e[u])[0])?l=this.renderSection(i,t,n,r,o):"^"===a?l=this.renderInverted(i,t,n,r,o):">"===a?l=this.renderPartial(i,t,n,o):"&"===a?l=this.unescapedValue(i,t):"name"===a?l=this.escapedValue(i,t,o):"text"===a&&(l=this.rawValue(i)),void 0!==l&&(s+=l);return s},y.prototype.renderSection=function(e,r,o,i,a){var l=this,s="",u=r.lookup(e[1]);if(u){if(t(u))for(var c=0,p=u.length;c<p;++c)s+=this.renderTokens(e[4],r.push(u[c]),o,i,a);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],r.push(u),o,i,a);else if(n(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(r.view,i.slice(e[3],e[5]),(function(e){return l.render(e,r,o,a)})))&&(s+=u)}else s+=this.renderTokens(e[4],r,o,i,a);return s}},y.prototype.renderInverted=function(e,n,r,o,i){var a=n.lookup(e[1]);if(!a||t(a)&&0===a.length)return this.renderTokens(e[4],n,r,o,i)},y.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),o=e.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},y.prototype.renderPartial=function(e,t,r,o){if(r){var i=this.getConfigTags(o),a=n(r)?r(e[1]):r[e[1]];if(null!=a){var l=e[6],s=e[5],u=e[4],c=a;0==s&&u&&(c=this.indentPartial(a,u,l));var p=this.parse(c,i);return this.renderTokens(p,t,r,c,o)}}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||m.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&r===m.escape?String(o):r(o)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){g.templateCache=e},get templateCache(){return g.templateCache}},g=new y;return m.clearCache=function(){return g.clearCache()},m.parse=function(e,t){return g.parse(e,t)},m.render=function(e,n,r,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)'));var i;return g.render(e,n,r,o)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},m.Scanner=h,m.Context=v,m.Writer=y,m}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var r={};(()=>{"use strict";var e=r,t=n(5318);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"APP_SLUG_BLACKLIST",{enumerable:!0,get:function(){return i.APP_SLUG_BLACKLIST}}),Object.defineProperty(e,"PAGE_SLUG_BLACKLIST",{enumerable:!0,get:function(){return i.PAGE_SLUG_BLACKLIST}}),Object.defineProperty(e,"SUBDOMAIN_BLACKLIST",{enumerable:!0,get:function(){return i.SUBDOMAIN_BLACKLIST}}),e.default=void 0;var o=t(n(1209)),i=n(8061),a=o.default;e.default=a})(),module.exports=r})();