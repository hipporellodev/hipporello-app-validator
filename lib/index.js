/*! For license information please see index.js.LICENSE.txt */
(()=>{var e={7228:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},2858:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},3646:(e,t,n)=>{var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},1506:e=>{e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},8926:e=>{function t(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function l(e){t(o,i,a,l,s,"next",e)}function s(e){t(o,i,a,l,s,"throw",e)}l(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},4575:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},3913:e=>{function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},9713:e=>{e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},6525:(e,t,n)=>{var r=n(8331);function i(t,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},e.exports.default=e.exports,e.exports.__esModule=!0),i(t,n,a||t)}e.exports=i,e.exports.default=e.exports,e.exports.__esModule=!0},9754:e=>{function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},2205:(e,t,n)=>{var r=n(9489);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},6860:e=>{e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},3884:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},8206:e=>{e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},8585:(e,t,n)=>{var r=n(8).default,i=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},9489:e=>{function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},3038:(e,t,n)=>{var r=n(2858),i=n(3884),a=n(379),o=n(521);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},8331:(e,t,n)=>{var r=n(9754);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},319:(e,t,n)=>{var r=n(3646),i=n(6860),a=n(379),o=n(8206);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},379:(e,t,n)=>{var r=n(7228);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},1553:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r=d;return function(i,a){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw a;return P()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var l=k(o,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var s=c(e,t,n);if("normal"===s.type){if(r=n.done?h:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",h="completed",v={};function y(){}function m(){}function g(){}var b={};s(b,a,(function(){return this}));var _=Object.getPrototypeOf,E=_&&_(_(R([])));E&&E!==n&&r.call(E,a)&&(b=E);var x=g.prototype=y.prototype=Object.create(b);function O(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,o,l){var s=c(e[i],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function R(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return m.prototype=g,s(x,"constructor",g),s(g,"constructor",m),m.displayName=s(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},O(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},O(x),s(x,l,"Generator"),s(x,a,(function(){return this})),s(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=R,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return l.type="throw",l.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],l=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},7757:(e,t,n)=>{e.exports=n(1553)},1209:(e,t,n)=>{"use strict";var r=n(5318),i=n(8);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(7757)),o=r(n(319)),l=r(n(9713)),s=r(n(8926)),u=r(n(8)),c=r(n(4575)),d=r(n(3913)),p=r(n(3754)),f=n(1614);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){return e.cardTypes?e.cardTypes.default={id:"default",name:"Default"}:e.cardTypes={default:{id:"default",name:"Default"}},e}var b=function(){function e(t,r){var i=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";(0,c.default)(this,e),this.validate=function(e){if(!i.data||"object"!=(0,u.default)(i.data))throw new TypeError("Invalid json data");return i.newValidate(e)},this.newValidate=function(){var e=(0,s.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=[];i.inplaceErrorMessage=!!t;var a=new p.default(i.data,i.entities);a.init([]),a.validate(r,t),r.length>0?n({type:"ValidationException",errors:i.convertErrors(r)}):e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getViewIds=function(e){var t,n,r;return e?null===(t=Object.keys((null===(n=i.data)||void 0===n?void 0:n.views)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name})):Object.keys((null===(r=i.data)||void 0===r?void 0:r.views)||{})},this.getPageIds=function(e){var t,n,r;return e?null===(t=Object.values((null===(n=i.data)||void 0===n?void 0:n.views)||{}).filter((function(e){return"page"===e.type})))||void 0===t?void 0:t.map((function(e){var t;return(null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)||""})):Object.values((null===(r=i.data)||void 0===r?void 0:r.views)||{}).filter((function(e){return"page"===e.type})).map((function(e){return e.id}))},this.getActions=function(e){var t,n,r;return e?null===(t=Object.values((null===(n=i.data)||void 0===n?void 0:n.actionGroups)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.name})):Object.keys((null===(r=i.data)||void 0===r?void 0:r.actionGroups)||{})},this.getCardTypes=function(e){var t,n,r;return e?null===(t=Object.values((null===(n=i.data)||void 0===n?void 0:n.cardTypes)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null===(r=i.data)||void 0===r?void 0:r.cardTypes)||{})},this.getOneOfMessage=function(e,t){return"".concat((null==t?void 0:t.label)||(null==t?void 0:t.path)," one of ").concat(null==e?void 0:e.join(", "))},this.getFormIds=function(e){var t,n,r,a,o;return e?null===(t=Object.values((null===(n=i.data)||void 0===n||null===(r=n.integrations)||void 0===r?void 0:r.incoming)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null===(a=i.data)||void 0===a||null===(o=a.integrations)||void 0===o?void 0:o.incoming)||{})},this.getRoles=function(e){var t,n,r;return e?null===(t=Object.values((null==i||null===(n=i.data)||void 0===n?void 0:n.roles)||{}))||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.name})):Object.keys((null==i||null===(r=i.data)||void 0===r?void 0:r.roles)||{})},this.getFieldDefinitions=function(e){var t,n,r,a,o,l,s=(null==i||null===(t=i.data)||void 0===t||null===(n=t.fieldDefinitions)||void 0===n?void 0:n.appVariables)||{},u=(null===(r=i.entities)||void 0===r?void 0:r.customFields)||{},c=null==i||null===(a=i.data)||void 0===a||null===(o=a.fieldDefinitions)||void 0===o?void 0:o.hippoFields,d=m(m(m({},s),c),u);return e?null===(l=Object.values(d))||void 0===l?void 0:l.map((function(e){return null==e?void 0:e.label})):Object.keys(d)},this.getEnvironments=function(){var e;return Object.keys(null==i||null===(e=i.data)||void 0===e?void 0:e.environments)},this.getComponents=function(e){var t,n;return e?Object.values((null==i||null===(t=i.data)||void 0===t?void 0:t.components)||{}).map((function(e){return null==e?void 0:e.type})):Object.keys((null==i||null===(n=i.data)||void 0===n?void 0:n.components)||{})},this.errorFlat=function(e){return e.reduce((function(e,t){return null!=e&&e.some((function(e){return(null==e?void 0:e.code)===(null==t?void 0:t.code)&&(null==e?void 0:e.path)===(null==t?void 0:t.path)}))||e.push(t),e}),[])},this.getInvalidValueErrorTitle=function(e,t){switch(e){case"oneOf":case"enumValue":return"'".concat(i.camelCaseToNormal(t),"' value is deleted");case"required":return"'".concat(i.camelCaseToNormal(t),"' value is required");default:return""}},this.errorHumanize=function(e){return null==e?void 0:e.map((function(e){var t,n,r=(null==e?void 0:e.message)||"";return r.includes(null==e?void 0:e.path)&&(r=r.replace(null==e?void 0:e.path,i.getLabel(null==e?void 0:e.path,null==e||null===(t=e.params)||void 0===t?void 0:t.label))),r.includes(null==e?void 0:e.relativePath)&&(r=r.replace(null==e?void 0:e.relativePath,i.getLabel(null==e?void 0:e.relativePath,null==e||null===(n=e.params)||void 0===n?void 0:n.label))),m(m({},e),{},{message:r,errorTitle:null!=e&&e.fieldLabel?i.getInvalidValueErrorTitle(null==e?void 0:e.code,null==e?void 0:e.fieldLabel):i.camelCaseToNormal("".concat(null==e?void 0:e.code,"Error"))})}))},this.convertErrors=function(t){return t=t.map((function(t){return{code:i.convertErrorCode(t.type),message:i.convertMessage(t),path:e.normalizePath(t.path),fieldLabel:i.searchForLabelRegex(null==t?void 0:t.message),relativePath:null==t?void 0:t.relativePath,params:{value:null==t?void 0:t.actual,originalValue:null==t?void 0:t.actual,label:t.field,path:e.normalizePath(t.path),values:i.convertActualValues(t),resolved:i.convertActualResolved(t)}}})),t=i.errorFlat(t),i.errorHumanize(t)},this.convertErrorCode=function(e){return"enumValue"===e?"oneOf":e},this.convertActualValues=function(e){var t,n,r,a,l,s,c,d,p,f,h,v,y,m,g,b,_,E,x,O,w,k,S,A,T,R,P,j,L,I,C,M,D=function(e,t){return{id:e,label:t}},N=null===(t=Object.values((null===(n=i.data)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.cardCollections)||{}))||void 0===t?void 0:t.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),F=null===(a=Object.values((null===(l=i.data)||void 0===l||null===(s=l.app)||void 0===s?void 0:s.roles)||{}))||void 0===a?void 0:a.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),V=null===(c=Object.values((null===(d=i.data)||void 0===d||null===(p=d.app)||void 0===p?void 0:p.views)||{}))||void 0===c?void 0:c.map((function(e){var t;return D(null==e?void 0:e.id,null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)})),B=null===(f=Object.values((null===(h=i.data)||void 0===h||null===(v=h.app)||void 0===v||null===(y=v.integrations)||void 0===y?void 0:y.incoming)||{}))||void 0===f?void 0:f.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),J=null===(m=Object.values((null===(g=i.data)||void 0===g||null===(b=g.app)||void 0===b||null===(_=b.fieldDefinitions)||void 0===_?void 0:_.hippoFields)||{}))||void 0===m?void 0:m.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.label)})),U=null===(E=Object.values((null===(x=i.data)||void 0===x||null===(O=x.app)||void 0===O||null===(w=O.fieldDefinitions)||void 0===w?void 0:w.appVariableFields)||{}))||void 0===E?void 0:E.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.label)})),q=null===(k=Object.values((null===(S=i.data)||void 0===S||null===(A=S.app)||void 0===A?void 0:A.automations)||{}))||void 0===k?void 0:k.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),Y=null===(T=(null===(R=i.entities)||void 0===R?void 0:R.trelloLists)||[])||void 0===T?void 0:T.map((function(e){return D(null==e?void 0:e.hippoId,null==e?void 0:e.name)})),z=null===(P=(null===(j=i.entities)||void 0===j?void 0:j.trelloLabels)||[])||void 0===P?void 0:P.map((function(e){return D(null==e?void 0:e.hippoId,(null==e?void 0:e.name)||(null==e?void 0:e.color)||!1)})),$=null===(L=(null===(I=i.entities)||void 0===I?void 0:I.members)||[])||void 0===L?void 0:L.map((function(e){return D((null==e?void 0:e.hippoId)||(null==e?void 0:e.id),null==e?void 0:e.name)})),H=null===(C=(null===(M=i.entities)||void 0===M?void 0:M.apps)||[])||void 0===C?void 0:C.map((function(e){return D(null==e?void 0:e.id,null==e?void 0:e.name)})),G=[].concat((0,o.default)(F||[]),(0,o.default)(H||[]),(0,o.default)(N||[]),(0,o.default)(V||[]),(0,o.default)(B||[]),(0,o.default)(J||[]),(0,o.default)(U||[]),(0,o.default)(q||[]),(0,o.default)(Y||[]),(0,o.default)(z||[]),(0,o.default)($||[])).filter(Boolean),W=null==e?void 0:e.expected,K=(0,u.default)(W);if(Array.isArray(W)||"string"===K){var X=null!=W&&W.includes(", ")?null==W?void 0:W.split(", "):null==e?void 0:e.expected;if(Array.isArray(X)){var Z;X=(X=null===(Z=X)||void 0===Z?void 0:Z.map((function(e){var t;return(null==G||null===(t=G.find((function(t){return(null==t?void 0:t.id)===e})))||void 0===t?void 0:t.label)||e}))).join(", ")}else{var Q,ee=(X||"").trim();X=(null==G||null===(Q=G.find((function(e){return(null==e?void 0:e.id)===ee})))||void 0===Q?void 0:Q.label)||X}return X}return W},this.convertActualResolved=function(e){var t=e.expected;return t&&"string"==typeof t&&(t=t.split(",")),t},this.searchForLabelRegex=function(e){var t=new RegExp(/{{{label\:(.*)\}\}\}/gm).exec(e||"");return(null==t?void 0:t[1])||!1},this.labelOneOfMultipleSelect=function(e){return["label","member"].includes(e)},this.convertMessage=function(e){var t=i.searchForLabelRegex(null==e?void 0:e.message);if(t)switch(e.type){case"oneOf":case"enumValue":return i.labelOneOfMultipleSelect(t)?"Remove the deleted ".concat(t):"Choose another ".concat(t);case"notOneOf":return'"'.concat((null==e?void 0:e.label)||e.field,'" must not be one of ').concat(i.convertActualValues(e));case"notExists":return"The value used in '".concat(null==e?void 0:e.path,"' could not be found");case"required":return"Select a ".concat(t);default:return e.message}else switch(e.type){case"oneOf":case"enumValue":return'"'.concat((null==e?void 0:e.label)||e.field,'" must be one of ').concat(i.convertActualValues(e));case"notOneOf":return'"'.concat((null==e?void 0:e.label)||e.field,'" must not be one of ').concat(i.convertActualValues(e));case"notExists":return"The value used in '".concat(null==e?void 0:e.path,"' could not be found");case"uniqueValue":return'"'.concat((null==e?void 0:e.label)||e.field,'" must be unique.');default:return e.message}},this.lang=d,Promise.resolve("./localize/".concat(d,".json")).then((function(e){return v(n(875)(e))})).then((function(e){f.TransText.addContent((0,l.default)({},d,e)),f.TransText.setLanguage(d)})),this.data=this.jsonTraverse(t),this.data.appJson?this.data.appJson={app:g(this.data.appJson)}:this.data={app:g(this.data)},this.entities=r,this.inplaceErrorMessage=!1}return(0,d.default)(e,[{key:"jsonTraverse",value:function(t){for(var n in t){var r=t[n];e.isEmpty(r)?delete t[n]:"object"===(0,u.default)(r)&&this.jsonTraverse(r)}return t}},{key:"getLabel",value:function(e){var t=new RegExp(/\.?([a-zA-Z0-9]+)[\W\d]*?$/gm).exec(e||""),n=(null==t?void 0:t[1])||e||"";return this.camelCaseToNormal(n)}},{key:"camelCaseToNormal",value:function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))}}],[{key:"isEmpty",value:function(e){return void 0===e||"function"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e&&"[object Date]"!==Object.prototype.toString.call(e)&&(null==e||0===e.length||"object"==(0,u.default)(e)&&0===Object.keys(e).length)}},{key:"jsonPatchPathToQueryPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=e.split(t);n=n.filter(Boolean);for(var r="",i=/^\d+$/,a=0;a<n.length;a++){var o=n[a],l=null;"["===(l=i.test(o)?"["+o+"]":o).charAt(0)?r+=l:r+=0===r.length?l:"."+l}return r}},{key:"queryPathToJsonPath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";if(!e)return null;var n=(e||"").split(t);n=n.filter(Boolean);for(var r="",i=0;i<n.length;i++){var a=n[i];r+="/"+a.replace(/\[(\d*)\]/g,(function(e,t){return"/"+t}))}return r}}]),e}();t.default=b,b.normalizePath=function(e){var t=e;return t=b.queryPathToJsonPath(t),b.jsonPatchPathToQueryPath(t)}},4752:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(7361)),l=function(){function e(){(0,i.default)(this,e)}return(0,a.default)(e,null,[{key:"query",value:function(e,t){return null==t?e:(0,o.default)(e,t)}}]),e}();t.default=l},4770:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionValueCheckFunc=function(e,t,n,r,a,o,l){if(!["empty","notempty"].includes(null==l?void 0:l.operator))if("[[[nullValue]]]"===n&&"value"===(null==l?void 0:l.valueType))r.push({type:"required"});else if("value"===(null==l?void 0:l.valueType)&&n){var s=(null==l?void 0:l.field).replace(/\.(hippoId|id)$/g,""),u=new i.default(e,"",s);u.init(null,t);var c=u.getRightValues();null!=c&&(Array.isArray(n)?!n.every((function(e){return c.includes(e)})):!c.includes(n))&&r.push({type:"enumValue",label:u.createMustacheLabel(u.getRightValueEntityName()),value:n,expected:c})}return n};var i=r(n(7041))},3598:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionsWithOr=void 0,r(n(7799));var i=n(4770),a=n(8061),o=r(n(9400));t.conditionsWithOr=function(e,t){return(0,o.default)({useNewCustomCheckerFunction:!0}).compile({conditions:{type:"array",optional:!0,items:{type:"array",items:{type:"object",props:{field:"string|empty:false",operator:{type:"enum",values:a.OPERATORS},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:i.conditionValueCheckFunc.bind(void 0,e,t)},valueType:{type:"enum",values:["variable","value"]}}}}}})}},3282:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.conditionsWithAnd=void 0,r(n(7799));var i=n(4770),a=n(8061),o=r(n(9400));t.conditionsWithAnd=function(e,t){return(0,o.default)({useNewCustomCheckerFunction:!0}).compile({conditions:{type:"array",optional:!0,items:{type:"array",items:{type:"object",props:{field:"string|empty:false",operator:{type:"enum",values:a.OPERATORS},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:i.conditionValueCheckFunc.bind(void 0,e,t)},valueType:{type:"enum",values:["variable","value"]}}}}}})}},7076:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.formConditionsWithAnd=t.formConditionRule=void 0,r(n(7799));var i=r(n(1209)),a=r(n(9400)),o=(0,a.default)().compile({conjunction:{type:"enum",values:["AND","OR","NOR"]},rules:{type:"array",optional:!0}});t.formConditionsWithAnd=o;var l=(0,a.default)({useNewCustomCheckerFunction:!0}).compile({field:"string|empty:false",operator:{type:"enum",values:["equal","not_equal","less","less_or_equal","greater","greater_or_equal","between","not_between","select_equals","select_not_equals","select_not_any_in","any_in","not_any_in","multiselect_equals","multiselect_not_equals","is_empty","is_not_empty","select_any_in"]},value:{type:"custom",default:"[[[nullValue]]]",custom:function(e,t,n,r,a,o){var l=(null==o?void 0:o.data)||{},s=l.operator,u=l.value,c=i.default.isEmpty(u);return["is_empty","is_not_empty"].includes(s)||("[[[nullValue]]]"===u||c)&&t.push({type:"required"}),u}}});t.formConditionRule=l},6009:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORM_INPUT_NAMES=void 0,t.FORM_INPUT_NAMES={ATTACHMENT_SELECTOR:"AttachmentSelector",TRELLO_LABEL_SELECTOR:"TrelloLabelSelector",FIELD_SELECTOR:"FieldSelector",USER_SELECTOR:"UserSelector",SHORT_TEXT:"EditText",LONG_TEXT:"LongText",EMAIL:"Email",NUMBER:"Number",WEBSITE:"Website",PHONE:"Phone",BUTTON:"Button",ATTACHMENT:"Attachment",DATE_PICKER_ITEM:"Date",DATE_TIME_PICKER_ITEM:"DateTime",TIME_PICKER:"Time",RADIO_BUTTON:"RadioButton",SELECT_BOX:"SelectBox",CAPTCHA:"Captcha",HORIZONTAL_LINE:"HorizontalLine",PARAGRAPH:"Paragraph",TITLE:"Title",RATING_ITEM:"Rating",CHECKBOX:"Checkbox",MULTISELECTBOX:"MultiSelectBox",RICH_TEXT_INPUT:"RichTextInput",BOOLEAN:"Boolean"}},9400:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(3038)),o=r(n(7799)),l=n(1614);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}t.default=function(e){var t=l.TransText.getLanguageString(l.TransText.getLanguage()),n=Object.entries(t).reduce((function(e,t){var n=(0,a.default)(t,2),r=n[0],i=n[1];return r.startsWith("validate.")&&(e[r]=i),e}),{});return new o.default(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({messages:n},e))}},8061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VARIABLE_TYPES=t.SUBDOMAIN_BLACKLIST=t.RESOLVE_TYPES=t.PAGE_SLUG_BLACKLIST=t.OPERATORS=t.LATEST_APP_SCHEMA_VERSION=t.APP_SLUG_BLACKLIST=void 0,t.SUBDOMAIN_BLACKLIST=["playground","console","hippo","admin"],t.PAGE_SLUG_BLACKLIST=["forms","form","page","signin","signup","forgot"],t.APP_SLUG_BLACKLIST=["hippo","trello","hipporello","onboarding"],t.LATEST_APP_SCHEMA_VERSION=4,t.VARIABLE_TYPES=["string","double","long","boolean","attachment","date","datetime","time"],t.RESOLVE_TYPES={RESOLVE_LIST_BY_HIPPO_ID:"RESOLVE_LIST_BY_HIPPO_ID",RESOLVE_LABEL_BY_HIPPO_ID:"RESOLVE_LABEL_BY_HIPPO_ID",RESOLVE_MEMBER_BY_TRELLO_ID:"RESOLVE_MEMBER_BY_TRELLO_ID",RESOLVE_USER_BY_USER_ID:"RESOLVE_USER_BY_USER_ID",RESOLVE_BOARD_BY_TRELLO_BOARD_ID:"RESOLVE_BOARD_BY_TRELLO_BOARD_ID",RESOLVE_CARD_BY_CARD_ID:"RESOLVE_CARD_BY_CARD_ID",RESOLVE_FIELD_DEFINITION_BY_ID:"RESOLVE_FIELD_DEFINITION_BY_ID"},t.OPERATORS=["equals","notequals","contains","notcontains","startswith","notstartswith","endswith","notendswith","lessthan","lessthanequals","greaterthan","greaterthanequals","in","allin","anyin","notin","empty","notempty","has","hasall","hasany","hasnone","doesnthave"]},1614:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.TransText=void 0;var i=r(n(9713)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(2903)),d=r(n(4704));function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){(0,l.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function i(){return(0,a.default)(this,i),r.apply(this,arguments)}return(0,o.default)(i,[{key:"getLanguageString",value:function(e){var t=this.getContent();return t.hasOwnProperty(e)?t[e]:this.default}},{key:"getTranslate",value:function(e){if(!this.isTag(e))return"HIPPO-TEX-[".concat(e,"]");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?this.formatString.apply(this,[this.getKeyString(e)].concat(n)):this.getKeyString(e)}},{key:"addContent",value:function(e){this.setContent(f(f({},this.getContent()),e))}},{key:"getKeyString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r,i=this;if(null!==(r=i)&&void 0!==r&&r[e])return i[e];for(var a=e.split("."),o=0;o<a.length;o+=1){if(void 0===i[a[o]])throw Error(a[o]);i=i[a[o]]}return i}catch(r){!n&&this._opts.logsEnabled&&console.debug("No localization found for key '"+e+"' and language '"+t+"', failed on "+r.message)}return null}},{key:"getOrjTranslate",value:function(e){if(!this.getString(e,"en"))return"HIPPO-TEX-[".concat(e,"]");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.length?this.formatString.apply(this,[this.getString(e,"en")].concat(n)):this.getString(e,"en")}},{key:"isTag",value:function(e){return!!this.getKeyString(e)}}]),i}(c.default),v=h;t.default=v;var y=new h({en:d.default},{logsEnabled:!1});t.TransText=y},5584:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(4575)),o=r(n(3913)),l=r(n(319)),s=r(n(4752));function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Array.prototype.pushArray=function(e){return Array.isArray(e)?(this.splice.apply(this,[this.length,0].concat((0,l.default)(e))),this):this};var p=function(){function e(t,n){var r=this;(0,a.default)(this,e),this.childNodes=[],this.deleted=!1,this.initialValidate=!0,this.checkedPaths={},this.lists=[],this.members=[],this.entries=[],this.actions=[],this.getViewIds=function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0,a=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.views)||{}).filter((function(e){return!e.deleted}));return"function"==typeof i&&(a=a.filter(i)),n?a.map((function(e){return null==e?void 0:e.id})):a},this.getPageIds=function(e){var t,n,i,a,o;return e?null===(t=Object.values((null===(n=r.appJson)||void 0===n||null===(i=n.app)||void 0===i?void 0:i.views)||{}).filter((function(e){return"page"===e.type&&!e.deleted})))||void 0===t?void 0:t.map((function(e){var t;return(null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name)||""})):Object.values((null===(a=r.appJson)||void 0===a||null===(o=a.app)||void 0===o?void 0:o.views)||{}).filter((function(e){return"page"===e.type&&!e.deleted})).map((function(e){return e.id}))},this.getActions=function(e){var t,n,i,a,o;return e?null===(t=Object.values((null===(n=r.appJson)||void 0===n||null===(i=n.app)||void 0===i?void 0:i.actionGroups)||{}))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.name})):Object.keys((null===(a=r.appJson)||void 0===a||null===(o=a.app)||void 0===o?void 0:o.actionGroups)||{})},this.getCollections=function(){var e,t,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0,o=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.cardCollections)||{}).filter((function(e){return!e.deleted}));return a&&(o=o.filter(a)),i?null===(n=o)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):o},this.getAutomations=function(){var e,t,n,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1?arguments[1]:void 0,o=Object.values((null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.automations)||{}).filter((function(e){return!e.deleted}));return a&&(o=o.filter(a)),i?null===(n=o)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):o},this.getOneOfMessage=function(e,t){return"".concat((null==t?void 0:t.label)||(null==t?void 0:t.path)," one of ").concat(null==e?void 0:e.join(", "))},this.getFormIds=function(e,t){var n,i,a,o,l=Object.values((null===(n=r.appJson)||void 0===n||null===(i=n.app)||void 0===i||null===(a=i.integrations)||void 0===a?void 0:a.incoming)||{}).filter((function(e){return!e.deleted}));return t&&(l=l.filter(t)),e?l:null===(o=l)||void 0===o?void 0:o.map((function(e){return null==e?void 0:e.id}))},this.getRoles=function(e){var t,n,i=Object.values((null===(t=r.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.roles)||{}).filter((function(e){return!(null!=e&&e.deleted)}));return e?null==i?void 0:i.map((function(e){return null==e?void 0:e.id})):i},this.getCustomFields=function(e,t,n){var i,a=((null===(i=r.entities)||void 0===i?void 0:i.customFields)||[]).map((function(e){return d(d({},e),{},{id:null==e?void 0:e.hippoId})}));return t&&(a=a.filter(t)),e?a.map((function(e){return null==e?void 0:e.hippoId})):a},this.getAppParameters=function(e,t,n){var i,a,o,l,s=Object.values((null===(i=r.appJson)||void 0===i||null===(a=i.app)||void 0===a||null===(o=a.fieldDefinitions)||void 0===o?void 0:o.appVariableFields)||{});return n||(s=s.filter((function(e){return!(null!=e&&e.deleted)}))),t&&(s=s.filter(t)),e?null===(l=s)||void 0===l?void 0:l.map((function(e){return null==e?void 0:e.id})):s},this.getHippoFields=function(e,t,n){var i,a,o,l,s=Object.values((null===(i=r.appJson)||void 0===i||null===(a=i.app)||void 0===a||null===(o=a.fieldDefinitions)||void 0===o?void 0:o.hippoFields)||{});return n||(s=s.filter((function(e){return!(null!=e&&e.deleted)}))),t&&(s=s.filter(t)),e?null===(l=s)||void 0===l?void 0:l.map((function(e){return null==e?void 0:e.id})):s},this.getStaticFields=function(){return[{id:"member",label:"Members",type:e.RESOLVE_MEMBER_BY_TRELLO_ID},{id:"card",label:"Cards",type:e.RESOLVE_CARD_BY_CARD_ID},{id:"user",label:"User Fields",type:e.RESOLVE_USER_BY_USER_ID},{id:"triggeringUser",label:"Triggering User Fields",type:e.RESOLVE_USER_BY_USER_ID,resolveBy:e.RESOLVE_USER_BY_USER_ID},{id:"portal",label:"Workspace Fields",type:e.RESOLVE_PORTAL},{id:"role",label:"Roles & Groups",type:e.RESOLVE_ROLE_BY_ROLE_BY_ID},{id:"list",label:"List",type:e.RESOLVE_LIST_BY_HIPPO_ID},{id:"label",label:"Label",type:e.RESOLVE_LABEL_BY_HIPPO_ID},{id:"board",label:"Board",type:e.RESOLVE_BOARD_BY_TRELLO_BOARD_ID},{id:"system",label:"System",type:e.RESOLVE_SYSTEM},{id:"app",label:"Power-Up",type:e.RESOLVE_SYSTEM},{id:"appVariables",label:"App Variables",type:e.RESOLVE_APP_VARS},{id:"appVariables",label:"App Variables",type:e.RESOLVE_PORTAL},{id:"card.c_boardOrder",label:"Trello Board Order",type:"long",multiple:!1,sortable:!0,onlySortable:!0},{id:"card.c_userId",label:"Owner",type:"string",resolveBy:e.RESOLVE_USER_BY_USER_ID,multiple:!1,sortable:!0},{id:"card.c_parentCardId",label:"Parent Card",type:"string",resolveBy:e.RESOLVE_CARD_BY_CARD_ID,multiple:!1,sortable:!0},{id:"card.c_id",label:"Id",type:"string",multiple:!1,sortable:!0},{id:"card.c_boardId",label:"Board Id",type:"string",multiple:!1,sortable:!0},{id:"card.c_shortId",label:"Short Id",type:"string",multiple:!1,sortable:!0},{id:"card.tc_closed",label:"Is Archived",type:"boolean",multiple:!1,sortable:!0},{id:"card.c_insertedAt",label:"Creation Time",type:"datetime",multiple:!1,sortable:!0},{id:"card.c_updatedAt",label:"Last Update Time",type:"datetime",multiple:!1,sortable:!0},{id:"card.c_attachments",label:"All Trello Attachments",type:"attachment",multiple:!0,sortable:!1},{id:"card.c_parentCardId",label:"Parent Card",type:"string",resolveBy:e.RESOLVE_CARD_BY_CARD_ID,multiple:!1,sortable:!0,disabledDisplay:!0},{id:"card.c_coverAttachment",label:"Trello Card Cover",type:"attachment",multiple:!1,sortable:!1},{id:"card.c_ticketId",label:"Card Ticket Id",type:"string",multiple:!1,sortable:!0},{id:"card.tc_desc",label:"Card Description",type:"string",multiple:!1,sortable:!0},{id:"card.tc_name",label:"Card Name",type:"string",multiple:!1,sortable:!0},{id:"card.label",label:"Label",type:"string",resolveBy:e.RESOLVE_LABEL_BY_HIPPO_ID,multiple:!0,sortable:!1,disabledDisplay:!0},{id:"card.name",label:"Card Name",type:"string",multiple:!1,sortable:!1,disabledDisplay:!0},{id:"card.description",label:"Card Description",type:"string",multiple:!1,sortable:!1,disabledDisplay:!0},{id:"card.tc_labelHippoIds",label:"Labels",type:"string",multiple:!0,sortable:!1},{id:"card.tc_labelHippoIds",label:"Labels",type:"string",resolveBy:e.RESOLVE_LABEL_BY_HIPPO_ID,multiple:!0,sortable:!1},{id:"card.tc_idMembers",label:"Members",type:"string",multiple:!0,sortable:!1},{id:"card.tc_idMembers",label:"Members",type:"string",resolveBy:e.RESOLVE_MEMBER_BY_TRELLO_ID,multiple:!0,sortable:!1},{id:"card.tc_listHippoId",label:"Trello List",type:"string",multiple:!1,sortable:!0},{id:"card.tc_listHippoId",label:"Trello List",type:"string",resolveBy:e.RESOLVE_LIST_BY_HIPPO_ID,multiple:!1,sortable:!0},{id:"card.tc_startDate",label:"Start Date",type:"date",multiple:!1,sortable:!0},{id:"card.tc_dueDate",label:"Due Date",type:"datetime",multiple:!1,sortable:!0},{id:"card.tc_dueDateReminder",label:"Due Reminder (Minutes)",type:"double",multiple:!1,sortable:!0},{id:"card.tc_dueComplete",label:"Due Complete",type:"boolean",multiple:!1,sortable:!0},{id:"card.tc_shortUrl",label:"Card Short URL",type:"string",multiple:!1,sortable:!0},{id:"card.tc_url",label:"Card URL",type:"string",multiple:!1,sortable:!0},{id:"label.name",label:"Label Name",type:"string",multiple:!1,sortable:!1},{id:"label.hippoId",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"label.color",label:"Color",type:"string",multiple:!1,sortable:!1},{id:"list.name",label:"List Name",type:"string",multiple:!1,sortable:!1},{id:"list.hippoId",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"member.id",label:"Member ID",type:"string",multiple:!1,sortable:!1},{id:"member.fullName",label:"Full Name",type:"string",multiple:!1,sortable:!1},{id:"user.id",label:"User ID",type:"string",multiple:!1,sortable:!1},{id:"user.name",label:"Full Name",type:"string",multiple:!1,sortable:!1},{id:"member.username",label:"Username",type:"string",multiple:!1,sortable:!1},{id:"user.firstName",label:"First Name",type:"string",multiple:!1,sortable:!1},{id:"user.roleIds",label:"Roles & Groups",type:"string",resolveBy:e.RESOLVE_ROLE_BY_ROLE_BY_ID,multiple:!0,sortable:!0},{id:"user.lastName",label:"Last Name",type:"string",multiple:!1,sortable:!1},{id:"user.email",label:"Email",type:"string",multiple:!1,sortable:!1},{id:"user.emailDomain",label:"Email Domain",type:"string",multiple:!1,sortable:!1},{id:"user.tags",label:"Segments",type:"string",multiple:!0,sortable:!1},{id:"user.loggedIn",label:"Logged in",type:"boolean",multiple:!1,sortable:!1},{id:"system.currentTimeMillis",label:"Current Time",type:"datetime",multiple:!1,sortable:!1},{id:"system.environment",label:"Environment",type:"string",multiple:!1,sortable:!1},{id:"portal.name",label:"Workspace Name",type:"string",multiple:!1,sortable:!1},{id:"portal.url",label:"Portal URL",type:"string",multiple:!1,sortable:!1},{id:"portal.consoleUrl",label:"Hipporello Console URL",type:"string",multiple:!1,sortable:!1},{id:"board.name",label:"Board Name",type:"string",multiple:!1,sortable:!1},{id:"board.desc",label:"Board Description",type:"string",multiple:!1,sortable:!1},{id:"portal.name",label:"Workspace Name",type:"string",multiple:!1,sortable:!1},{id:"role.name",label:"Name",type:"string",multiple:!1,sortable:!1},{id:"role.id",label:"Role Id",type:"string",multiple:!1,sortable:!1},{id:"field.id",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"field.name",label:"Name",type:"string",multiple:!1,sortable:!1},{id:"app.name",label:"Power-Up Name",type:"string",multiple:!1,sortable:!1},{id:"app.url",label:"Power-Up URL",type:"string",multiple:!1,sortable:!1},{id:"ref_cfdditem.id",label:"ID",type:"string",multiple:!1,sortable:!1},{id:"ref_cfdditem.name",label:"Name",type:"string",multiple:!1,sortable:!1},{id:"ref_cfdditem.color",label:"Color",type:"string",multiple:!1,sortable:!1,resolveBy:e.RESOLVE_COLOR_BY_CUSTOM_FIELD_ITEM_COLOR}]},this.getObjectKey=function(e){var t=e.id;return null!=e&&e.resolveBy&&(t+="Object",e.multiple),t},this.getAccessibleFieldTypes=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=r.getHippoFields(!1,null,t),i=r.getStaticFields(),a=r.getAppParameters(!1,null,t),o=r.getCustomFields(!1,null,t),l={};i.forEach((function(e){l[e.id]=e})),n.forEach((function(t){l["card."+t.id]={id:"card."+t.id,type:t.type,label:t.label,resolveBy:e.FIELD_RESOLVE_BY_TO_VALIDATOR[t.resolveBy],multiple:t.multiple}})),a.forEach((function(t){l["appVariables."+t.id]={id:"appVariables."+t.id,type:t.type,label:t.label,resolveBy:e.FIELD_RESOLVE_BY_TO_VALIDATOR[t.resolveBy],multiple:t.multiple}})),o.forEach((function(t){l["card.tcf_"+t.id]={id:"card.tcf_"+t.id,type:t.type,label:t.label,resolveBy:e.FIELD_RESOLVE_BY_TO_VALIDATOR[t.resolveBy],multiple:t.multiple}}));var s={};return Object.values(l).forEach((function(e){if(s[null==e?void 0:e.id]=e,null!=e&&e.resolveBy){var t=r.getObjectKey(e);s[t]=d(d({},e),{},{id:t})}})),s},this.getCardFieldsWithContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["parentCard","card"],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=r.getHippoFields(!1),a=r.getStaticFields(),o=r.getAppParameters().map((function(e){return d(d({},e),{},{id:"appVariables."+(null==e?void 0:e.id)})})),s=[].concat((0,l.default)(i),(0,l.default)(a),(0,l.default)(o));n&&(s=s.filter(n));var u={};return s.forEach((function(t){t.id.startsWith("tc_")||t.id.startsWith("hf_")||t.id.startsWith("c_")?e.forEach((function(e){var n=e+"."+(null==t?void 0:t.id);u[n]=d(d({},t),{},{field:n})})):u[null==t?void 0:t.id]=t})),t?Object.keys(u):u},this.getAllHippoAttachmentFields=function(){return r.getCardFieldsWithContext(["card","parentCard"],!0,(function(e){return"attachment"===(null==e?void 0:e.type)}))},this.getEnvironments=function(){var e,t;return Object.keys(null===(e=r.appJson)||void 0===e||null===(t=e.app)||void 0===t?void 0:t.environments)},this.getComponents=function(e){var t,n,i;return e?Object.values((null===(t=r.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.components)||{}).map((function(e){return null==e?void 0:e.type})):Object.keys((null==r||null===(i=r.data)||void 0===i?void 0:i.components)||{})},this.getCollectionValidateJson=function(){return{collections:{type:"array",optional:!0,items:{type:"enum",values:r.getCollections()}},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]}}},this.createMustacheLabel=function(e){return"".concat("{{{label:"+e+"}}}")},t.appJson?(this.appJson=t.appJson,this.lists=t.lists||[],this.members=t.members||[]):this.appJson=t,this.path=n,this.validatorPath=n,this.exists=!0,this.jsonPatchPath=n?"/"+n.replace(/"/g,"").replace(/]/g,"").replace(/\[/g,".").replace(/\./g,"/"):null,e.counter||(e.counter=0)}return(0,o.default)(e,[{key:"init",value:function(e,t){var n,r,i,a,o,l=this;e&&(this.actions=e),t&&(this.entities=t),this.entitiesIds={trelloLists:null===(n=(null===(r=this.entities)||void 0===r?void 0:r.trelloLists)||[])||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})),trelloLabels:null===(i=(null===(a=this.entities)||void 0===a?void 0:a.trelloLabels)||[])||void 0===i?void 0:i.map((function(e){return null==e?void 0:e.hippoId}))},this.childNodes=[],this.nodeJson=s.default.query(this.appJson,this.path),this.nodeJson?(this.id=this.generateNodeId(this.nodeJson),this.deleted=!(null===(o=this.nodeJson)||void 0===o||!o.deleted),this.process(this.appJson,this.path,this.nodeJson),this.childNodes.forEach((function(e){e.init(l.actions,l.entities)}))):this.exists=!1}},{key:"generateNodeId",value:function(e){return e.id}},{key:"addChildNode",value:function(e){e.parentNode=this,this.childNodes.push(e)}},{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return function(e){}}},{key:"findNodeWithPath",value:function(e){var t=null;if(e===this.path)t=this;else{var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(this.childNodes);try{for(r.s();!(n=r.n()).done&&!(t=n.value.findNodeWithPath(e)););}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"validate",value:function(t,n){var r=this;if(n){var i=this.findNodeWithPath(n);return!!i&&i.validate(t)}if(!this.checkedPaths[this.path]&&!this.deleted)if(this.checkedPaths[this.path]=!0,this.exists||!this.initialValidate){var a=this.getValidatorFunction();if(null!=a){e.counter+=1;var o=a,l="function"==typeof o?o(this.nodeJson):o;l&&Array.isArray(l)&&l.length>0&&(l.forEach((function(e){e.path=e.path?e.path:"".concat(r.validatorPath,".").concat(e.field),e.relativePath=null==e?void 0:e.field})),t.pushArray(l))}this.exists&&this.childNodes.forEach((function(e){return e.validate(t)}))}else this.isMandatory()&&t.push({path:null==this?void 0:this.path,type:"notExists"})}},{key:"isMandatory",value:function(){return!0}},{key:"getApps",value:function(e,t){var n,r=(null===(n=this.entities)||void 0===n?void 0:n.apps)||[];return t&&(r=r.filter(t)),e?r.map((function(e){return null==e?void 0:e.id})):r}},{key:"getTrelloList",value:function(){var e,t,n,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=(null===(e=this.entities)||void 0===e?void 0:e.trelloLists)||[];return a&&(o=null===(t=o||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.closed)}))),i&&(o=[].concat((0,l.default)(o),[{hippoId:"{{{card.c_parentCardIdObject.tc_listHippoIdObject.hippoId}}}",value:"{{{card.c_parentCardIdObject.tc_listHippoIdObject.hippoId}}}"}])),r?null===(n=o)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})):o}},{key:"getTrelloLabels",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(null===(e=this.entities)||void 0===e?void 0:e.trelloLabels)||[];return i&&(a=null===(t=a||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.deleted)}))),r?null===(n=a)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.hippoId})):a}},{key:"getTrelloMembers",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,a=(null===(e=this.entities)||void 0===e?void 0:e.members)||[];return i&&(a=null===(t=a||[])||void 0===t?void 0:t.filter((function(e){return!(null!=e&&e.deleted)}))),r?null===(n=a)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.id})):a.map((function(e){return d(d({},e),{},{label:null==e?void 0:e.fullName})}))}},{key:"getPageNames",value:function(){var e,t,n,r;return this.viewNames||(this.viewNames=null===(e=Object.values(null===(n=this.appJson)||void 0===n||null===(r=n.app)||void 0===r?void 0:r.views)||[])||void 0===e||null===(t=e.filter((function(e){return"page"===e.type})))||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.name}))),this.viewNames}},{key:"createValidationError",value:function(e,t,n,r,i,a){return{type:e,message:a,field:t,actual:n,expectedMeaningful:i||r,expected:r}}}]),e}();t.default=p,p.RESOLVE_LIST_BY_HIPPO_ID="list",p.RESOLVE_LABEL_BY_HIPPO_ID="label",p.RESOLVE_MEMBER_BY_TRELLO_ID="member",p.RESOLVE_USER_BY_USER_ID="user",p.RESOLVE_BOARD_BY_TRELLO_BOARD_ID="board",p.RESOLVE_CARD_BY_CARD_ID="card",p.RESOLVE_ROLE_BY_ROLE_BY_ID="role",p.RESOLVE_APP_BY_APP_ID="app",p.RESOLVE_FIELD_DEFINITION_BY_ID="field",p.RESOLVE_CUSTOM_FIELD_ITEM_BY_TRELLO_ID="ref_cfdditem",p.RESOLVE_COLOR_BY_CUSTOM_FIELD_ITEM_COLOR="color",p.RESOLVE_APP_VARS="appVariables",p.RESOLVE_SYSTEM="system",p.RESOLVE_PORTAL="portal",p.RESOLVE_FORM="form",p.FIELD_RESOLVE_BY_TO_VALIDATOR={RESOLVE_LIST_BY_HIPPO_ID:p.RESOLVE_LIST_BY_HIPPO_ID,RESOLVE_LABEL_BY_HIPPO_ID:p.RESOLVE_LABEL_BY_HIPPO_ID,RESOLVE_MEMBER_BY_TRELLO_ID:p.RESOLVE_MEMBER_BY_TRELLO_ID,RESOLVE_USER_BY_USER_ID:p.RESOLVE_USER_BY_USER_ID,RESOLVE_BOARD_BY_TRELLO_BOARD_ID:p.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,RESOLVE_CARD_BY_CARD_ID:p.RESOLVE_CARD_BY_CARD_ID,RESOLVE_ROLE_BY_ROLE_BY_ID:p.RESOLVE_ROLE_BY_ROLE_BY_ID,RESOLVE_APP_BY_APP_ID:p.RESOLVE_APP_BY_APP_ID,RESOLVE_FIELD_DEFINITION_BY_ID:p.RESOLVE_FIELD_DEFINITION_BY_ID,RESOLVE_CUSTOM_FIELD_ITEM_BY_TRELLO_ID:p.RESOLVE_CUSTOM_FIELD_ITEM_BY_TRELLO_ID,RESOLVE_COLOR_BY_CUSTOM_FIELD_ITEM_COLOR:""}},6423:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=(r(n(7799)),r(n(9400)));var d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){var n;return(0,i.default)(this,u),(n=r.call(this,e,t)).initialValidate=!1,n}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e=[],t=this.getCollectionValidateJson();t.collections.optional=!1;var n=(0,c.default)().compile(t);return e.pushArray(n((null==this?void 0:this.nodeJson)||{})),e}}]),u}(u.default);t.default=d},775:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=n(3598),d=n(3282);var p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e,t,n,r,i=[];return(null==this||null===(e=this.nodeJson)||void 0===e||null===(t=e.conditions)||void 0===t?void 0:t.length)>1?i.pushArray((0,c.conditionsWithOr)(this.appJson,this.entities)(null==this?void 0:this.nodeJson)):null!=this&&null!==(n=this.nodeJson)&&void 0!==n&&null!==(r=n.conditions)&&void 0!==r&&r.length&&i.pushArray((0,d.conditionsWithAnd)(this.appJson,this.entities)(null==this?void 0:this.nodeJson)),i}}]),u}(u.default);t.default=p},2746:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(4504)),d=(r(n(7799)),r(n(9400)));var p=(0,d.default)().compile({id:{type:"string"},shared:{type:"boolean"},title:{type:"string",optional:!0},name:{type:"string",optional:!0},actions:{type:"object"}}),f=(0,d.default)().compile({name:"string|min:1"}),h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r=this;this.shared=n.shared,n.actions&&Object.keys(n.actions).length>0&&Object.keys(n.actions).forEach((function(t){r.addChildNode(new c.default(e,"app.actionGroups.".concat(n.id,".actions.").concat(t)))}))}},{key:"getValidatorFunction",value:function(){var e=[],t=p(this.nodeJson);if(Array.isArray(t)&&e.pushArray(t),this.nodeJson.shared){var n=f(this.nodeJson);Array.isArray(n)&&e.pushArray(n)}return e}}]),u}(u.default);t.default=h},4504:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(319)),o=r(n(4575)),l=r(n(3913)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),d=r(n(5584)),p=(r(n(7799)),n(6550),n(3598)),f=n(3282),h=r(n(9400));function v(e){var t,n,r,i=(e||{}).query,a=this.getCollectionValidateJson(),o=(0,h.default)({useNewCustomCheckerFunction:!0}).compile({query:{type:"object",props:a}})(e);return null!=o&&o.length?o:(null==i||null===(t=i.conditions)||void 0===t?void 0:t.length)>1?(0,p.conditionsWithOr)(this.appJson,this.entities)(i):null!=i&&null!==(n=i.conditions)&&void 0!==n&&null!==(r=n.conditions)&&void 0!==r&&r.length?(0,f.conditionsWithAnd)(this.appJson,this.entities)(i):[]}var y=(0,h.default)().compile({id:"string|optional",type:{type:"enum",values:["send-conversation-message","update-hipporello-card","update-trello-card","add-comment","open-form","open-page","open-url","navigate-to-card","find-to-card","update-card-members","update-card-labels","move-card","archive-card","send-card-to-board","conversation-get-board-members","conversation-get-contacts","conversation-get-roles","conversation-reply","conversation-delete-message","conversation-delete-thread","conversation-update-members","conversation-get-card-fields","conversation-new-thread","conversation-reply","UpdateAppVariable","UpdateHippoField","UpdateCustomField","user-management-add-user","user-management-update-user","user-management-check-user"]},props:{type:"object",optional:!0,props:{onSuccess:{type:"object",optional:!0,props:{id:"string",required:"string"}},params:{type:"object",optional:!0,props:{context:{type:"enum",values:["parent","self","children"]}}}}}}),m=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,g=(0,h.default)().compile({id:"string",order:"number",type:{type:"enum",values:["send-conversation-message","update-hipporello-card","update-trello-card","add-comment","open-form","open-page","open-url","navigate-to-card","find-to-card","update-card-members","update-card-labels","move-card","archive-card","send-card-to-board","copy-to-clipboard","feedback-message","confirmation-box"]},props:{type:"object",optional:!0,props:{onSuccess:{type:"object",optional:!0,props:{id:"string",required:"string"}},params:{type:"object",optional:!0,props:{context:{type:"enum",values:["parent","self","children"]}}}}}}),b=["nextListOnBoard","previousListOnBoard"],_=(0,h.default)().compile({target:{type:"object",props:{type:{type:"enum",values:["_self","_blank"]}}},url:"string|empty:false"}),E=(0,h.default)().compile({url:"string|empty:false"}),x=(0,h.default)().compile({params:{type:"object",props:{context:{type:"enum",values:["parent","self","children"]}}},cardUpdateFields:{type:"object"}}),O=(0,h.default)().compile({title:"string|optional",size:{optional:!0,type:"enum",values:["small","medium","large","fullscreen"]}}),w=(0,h.default)().compile({dataToBeCopied:{type:"string",messages:{required:"Source can not be empty."}}}),k=(0,h.default)().compile({title:{type:"string",messages:{required:"Title can not be empty."}},type:{type:"enum",values:["info","error","warning","success"]},icon:{type:"enum",values:["check-circle","exclamation-circle","exclamation-triangle","info-circle"]},message:{type:"string",optional:!0},duration:{type:"number",min:0,max:20},position:{type:"enum",values:["top-left","top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"]}}),S=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var i=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function d(e,t,n){var i;return(0,o.default)(this,d),(i=r.call(this,e,t)).external=n,i}return(0,l.default)(d,[{key:"process",value:function(e,t,n){var r;this.formId=null===(r=n.props)||void 0===r?void 0:r.formId}},{key:"getValidatorFunction",value:function(){var e,t,n,r,o,l,s,u,c,d,p=this.getTrelloList(!0,!0,!1),f=null===(e=this.entitiesIds)||void 0===e?void 0:e.trelloLabels,S=b.concat(p),A=this.getHippoFields(!0),T=Object.values((null===(t=this.appJson)||void 0===t||null===(n=t.app)||void 0===n?void 0:n.roles)||{}).map((function(e){return null==e?void 0:e.id})),R=this.getCardFieldsWithContext(["card","parentCard"],!0,(function(e){return"string"===(null==e?void 0:e.type)})),P=(0,h.default)({useNewCustomCheckerFunction:!0}).compile({listHippoId:{type:"string",label:"List",custom:function(e,t){/\{\{\{.*}}}/gi.test(String(e))||S.includes(e)||t.push({type:"enum",expected:S,actual:e,message:"Choose another List"})},messages:{required:this.createMustacheLabel("list")}}}),j=(0,h.default)().compile({updateLabelActionType:{type:"enum",values:["remove-all-labels","remove-labels","set-labels","add-labels"]},labels:{type:"array",optional:"remove-all-labels"===(null===(r=this.nodeJson.props)||void 0===r?void 0:r.updateLabelActionType),items:{type:"enum",values:f||[],messages:{enumValue:this.createMustacheLabel("label"),required:this.createMustacheLabel("label")}}}}),L=(0,h.default)().compile({updateMemberActionType:{type:"enum",values:["add-members","set-members","remove-members","remove-all-members"]},members:{type:"array",items:{type:"object",props:{type:{type:"enum",values:["trelloMember","trelloRole"]},value:{type:"enum",values:[].concat((0,a.default)(null===(o=(null===(l=this.entities)||void 0===l?void 0:l.members)||[])||void 0===o?void 0:o.map((function(e){return null==e?void 0:e.id}))),["all","allTrelloCardMembers","allTrelloBoardMembers","allTrelloBoardAdminMembers","allTrelloNormalMembers","allTrelloObserverMembers"]),messages:{enumValue:this.createMustacheLabel("member"),required:this.createMustacheLabel("member")}}}}}}),I=(0,h.default)({useNewCustomCheckerFunction:!0}).compile({message:"string",subject:"string",conversationMembers:{type:"array",items:{type:"custom",check:function(e,t,n){var r,i,a,o,l,s;if(((null==n||null===(r=n.props)||void 0===r||null===(i=r.type)||void 0===i?void 0:i.values)||[]).includes(null==e?void 0:e.type)||t.push({type:"enumValue",actual:null==e?void 0:e.type,field:"type",expected:(null==n||null===(a=n.props)||void 0===a||null===(o=a.type)||void 0===o?void 0:o.values)||[]}),"email"===(null==e?void 0:e.type))m.test(null==e?void 0:e.id)||t.push({type:"email",actual:null==e?void 0:e.id,field:"id"});else if("cardField"===(null==e?void 0:e.type));else if(!((null==n||null===(l=n.props)||void 0===l||null===(s=l.id)||void 0===s?void 0:s.values)||[]).includes(null==e?void 0:e.id)){var u,c;t.push({type:"enumValue",actual:null==e?void 0:e.id,field:"id",expected:(null==n||null===(u=n.props)||void 0===u||null===(c=u.id)||void 0===c?void 0:c.values)||[]})}return e},props:{type:{type:"enum",values:["trelloMember","cardField","trelloRoles","submissionOwner","hipporelloMember","hipporelloRole","email"]},id:{type:"enum",values:[].concat((0,a.default)(null===(s=(null===(u=this.entities)||void 0===u?void 0:u.members)||[])||void 0===s?void 0:s.map((function(e){return null==e?void 0:e.id}))),(0,a.default)(T||[]),(0,a.default)(R||[]),["allTrelloCardMembers","allTrelloBoardMembers","allTrelloBoardAdminMembers","allTrelloNormalMembers","allTrelloObserverMembers","submissionOwner"])},isContributor:"boolean|optional"}}}}),C=(0,h.default)().compile({viewId:{type:"enum",values:this.getPageIds(),messages:{enumValue:this.createMustacheLabel("page"),required:this.createMustacheLabel("page")}},target:{type:"object",props:{type:{type:"enum",values:["_self","_blank","_modal"]}}},type:{type:"enum",values:["internal","external"]}}),M=(0,h.default)().compile({formId:{type:"enum",values:this.getFormIds(!1,(function(e){var t;return null===(t=["form","updateform"])||void 0===t?void 0:t.includes(null==e?void 0:e.type)})),messages:{enumValue:this.createMustacheLabel("form"),required:this.createMustacheLabel("form")}},target:{type:"object",props:{type:{type:"enum",values:["_modal","_blank","_self"]}}}}),D=[];if(this.external?D.pushArray(y(this.nodeJson)):D.pushArray(g(this.nodeJson)),this.validatorPath="".concat(this.path,".props"),"move-card"===this.nodeJson.type)D.pushArray(P(this.nodeJson.props||{}));else if("find-to-card"===this.nodeJson.type)D.pushArray(v.call(this,this.nodeJson.props||{}));else if("update-card-labels"===this.nodeJson.type)D.pushArray(j(this.nodeJson.props||{}));else if("update-card-members"===this.nodeJson.type)D.pushArray(L(this.nodeJson.props||{}));else if("send-conversation-message"===this.nodeJson.type)D.pushArray(I(this.nodeJson.props||{}));else if("update-hipporello-card"===this.nodeJson.type||"update-trello-card"===this.nodeJson.type){var N,F,V=null===(N=Object.keys((null===(F=this.nodeJson.props)||void 0===F?void 0:F.cardUpdateFields)||{}))||void 0===N?void 0:N[0];A.includes(V)?(this.validatorPath="".concat(this.path,".props.cardUpdateFields.").concat(V),D.pushArray((c=V,d=(0,h.default)({useNewCustomCheckerFunction:!0}).compile({cardUpdateFields:{type:"object",props:(0,i.default)({},c,{type:"object",optional:!0,props:{type:{type:"enum",optional:!0,values:["replacement","minus","plus","multiply","remove"]},valueType:{type:"enum",optional:!0,values:["value","variable"]},value:{type:"custom",nullable:!0,default:"[[[nullValue]]]",check:function(e,t,n,r,i){return"[[[nullValue]]]"===e&&"variable"===(null==i?void 0:i.valueType)&&t.push({type:"required",field:"value"}),!!Array.isArray(e)&&Object.values(e).length!==e.length&&"value"===(null==i?void 0:i.valueType)&&t.push({type:"required",field:"value",message:"Any of the added items must not be empty"}),e}}}})},params:{type:"object",props:{context:{type:"enum",values:["parent","self","children"]}}}}),d)(this.nodeJson.props||{}))):(this.validatorPath="".concat(this.path,".props.cardUpdateFields"),D.pushArray(x(this.nodeJson.props||{})))}else if("open-page"===this.nodeJson.type)D.pushArray(C(this.nodeJson.props||{})),"external"===this.nodeJson.props.type&&D.pushArray(E(this.nodeJson.props||{}));else if("open-url"===this.nodeJson.type)D.pushArray(_(this.nodeJson.props||{}));else if("open-form"===this.nodeJson.type){var B,J;D.pushArray(M(this.nodeJson.props||{})),"_modal"===(null===(B=this.nodeJson.props)||void 0===B||null===(J=B.target)||void 0===J?void 0:J.type)&&(this.validatorPath="".concat(this.path,".props.target"),D.pushArray(O(this.nodeJson.props.target)))}else"copy-to-clipboard"===this.nodeJson.type?D.pushArray(w(this.nodeJson.props||{})):"feedback-message"===this.nodeJson.type&&D.pushArray(k(this.nodeJson.props||{}));return D}}]),d}(d.default);t.default=S},3754:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(3038)),a=r(n(319)),o=r(n(4575)),l=r(n(3913)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),d=r(n(5584)),p=r(n(6474)),f=r(n(702)),h=r(n(6550)),v=r(n(2241)),y=r(n(4050)),m=r(n(8417)),g=r(n(9379)),b=r(n(887)),_=r(n(6946)),E=r(n(8536)),x=r(n(4752)),O=r(n(825)),w=(r(n(7799)),n(8061)),k=r(n(7041)),S=r(n(466)),A=r(n(9400));var T=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var i=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function d(e,t){var n;return(0,o.default)(this,d),n=r.call(this,e,"app"),t&&(n.entities=t),n}return(0,l.default)(d,[{key:"getValidatorFunction",value:function(){var e=(0,A.default)({useNewCustomCheckerFunction:!0}).compile({id:"string",schemaVersion:{type:"number",equal:w.LATEST_APP_SCHEMA_VERSION},name:"string|empty:false|trim",slug:{type:"custom",check:function(e,t){return w.APP_SLUG_BLACKLIST.includes(e)&&t.push({type:"notOneOf",label:"App Slug",expected:w.APP_SLUG_BLACKLIST}),e}},description:"string|optional|empty:false|trim",type:{type:"enum",values:["defaultApp","homeApp"]},boards:"array|optional"})(this.appJson.app),t=Array.isArray(e)?e:[];return this.variableNodes.forEach((function(e){var n=e.getValidatorFunction();n&&n.length>0&&(console.log(),t.splice.apply(t,[t.length,0].concat((0,a.default)(n))))})),t}},{key:"process",value:function(e,t,n){var r,i,a,o=this;this.addChildNode(new p.default(e,"app.environments.webView")),this.addChildNode(new f.default(e,"app.environments.trelloCardBack")),null!=e&&null!==(r=e.app)&&void 0!==r&&null!==(i=r.environments)&&void 0!==i&&null!==(a=i.trelloBoardView)&&void 0!==a&&a.enabled&&this.addChildNode(new O.default(e,"app.environments.trelloBoardView")),this.addChildNode(new g.default(e,"app.cardCollections")),this.addChildNode(new b.default(e,"app.roles")),this.addChildNode(new y.default(e,"app.viewSettings")),x.default.query(e,"app.fieldDefinitions.appVariableFields")&&this.addChildNode(new m.default(e,"app.fieldDefinitions.appVariableFields"));var l=this.getAutomations(!0);null!=l&&l.length&&l.forEach((function(t){o.addChildNode(new h.default(e,"app.automations."+t))}));var s=this.getHippoFields(!0);null!=s&&s.length&&s.forEach((function(t){o.addChildNode(new v.default(e,"app.fieldDefinitions.hippoFields."+t))}));var u=this.getFormIds(!0);null!=u&&u.length&&u.forEach((function(t){["form","updateform"].includes(t.type)?o.addChildNode(new _.default(e,"app.integrations.incoming."+t.id)):"email"===t.type&&o.addChildNode(new E.default(e,"app.integrations.incoming."+t.id))})),this.generateVariableNodes(n)}},{key:"generateVariableNodes",value:function(e){this.variableNodes=[],this._generateVariableNodes("app",e,this.variableNodes)}},{key:"_generateVariableNodes",value:function(e,t,n){var r=this;if(null!=t&&t.deleted||!1===(null==t?void 0:t.enabled))return!1;if(Array.isArray(t))t.forEach((function(t,i){r._generateVariableNodes(e+"."+i,t,n)}));else if("string"==typeof t){if(t.indexOf("{{")>=0)try{S.default.parse(t||"").forEach((function(t){if("name"===t[0]||"&"===t[0]){var i=t[1],a=new k.default(r.appJson,e,i);a.init(r.actions,r.entities),n.push(a)}}))}catch(e){}}else t instanceof Object&&Object.entries(t).forEach((function(t){var a=(0,i.default)(t,2),o=a[0],l=a[1];r._generateVariableNodes(e+"."+o,l,n)}))}}]),d}(d.default);t.default=T,T.INSTANCE=null},6550:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(301)),p=(r(n(7799)),r(n(9400)));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){(0,l.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function i(e,t){return(0,a.default)(this,i),r.call(this,e,t)}return(0,o.default)(i,[{key:"process",value:function(e,t,n){var r=this,i=Object.values((null==n?void 0:n.rules)||{});null!=i&&i.length&&null!=n&&n.enabled&&i.forEach((function(t){r.addChildNode(new d.default(e,"app.automations.".concat(null==n?void 0:n.id,".rules.").concat(null==t?void 0:t.id)))}))}},{key:"getValidatorFunction",value:function(){var e,t,n,r=this.getTrelloList(!0),i={type:"enum",values:r,optional:!0},a={type:"array",items:{type:"enum",values:r},optional:!0},o={type:{type:"enum",values:["card-created","moved","commented","archived"]}};switch(null===(e=this.nodeJson)||void 0===e||null===(t=e.trigger)||void 0===t?void 0:t.type){case"card-created":o.lists=a;break;case"moved":o.fromList=i,o.toList=i;break;case"commented":o.list=i}var l=(0,p.default)().compile({id:"string|empty:false",name:"string|empty:false",order:"number",trigger:{type:"object",props:h({},o)}}),s=[];return s.pushArray(l(this.nodeJson)),null!==(n=this.nodeJson)&&void 0!==n&&n.enabled?s:[]}}]),i}(c.default);t.default=v},301:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(5266)),d=(r(n(7799)),n(3598)),p=n(3282),f=r(n(9400));var h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r=this,i=null==n?void 0:n.events;if(i){var a=t+".events";Object.entries(i).forEach((function(t){r.addChildNode(new c.default(e,a+"."+t[0]))}))}}},{key:"getValidatorFunction",value:function(){var e,t,n,r,i,a,o,l=[],s=(0,f.default)().compile({id:"string",order:"number",enabled:"boolean|optional",filter:{type:"object",optional:!0,props:this.getCollectionValidateJson()}});if(l.pushArray(s(this.nodeJson)),(null===(e=this.nodeJson)||void 0===e||null===(t=e.filter)||void 0===t||null===(n=t.conditions)||void 0===n?void 0:n.length)>1)l.pushArray((0,d.conditionsWithOr)(this.appJson,this.entities)(null===(o=this.nodeJson)||void 0===o?void 0:o.filter));else if(null!==(r=this.nodeJson)&&void 0!==r&&null!==(i=r.filter)&&void 0!==i&&null!==(a=i.conditions)&&void 0!==a&&a.length){var u;l.pushArray((0,p.conditionsWithAnd)(this.appJson,this.entities)(null===(u=this.nodeJson)||void 0===u?void 0:u.filter))}return l}}]),u}(u.default);t.default=h},5150:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584));r(n(7799));var c=(0,r(n(9400)).default)().compile({id:"string",name:"string",collections:{type:"array",optional:!0,items:{type:"string"}},conditions:{type:"array",optional:!0}}),d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return c}}]),u}(u.default);t.default=d},9379:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(5150));r(n(4752));var p=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,a.default)(this,c),r.call(this,e,t)}return(0,o.default)(c,[{key:"process",value:function(e,t,n){var r=this,i=this.getCollections();i&&i.forEach((function(t){r.addChildNode(new d.default(e,"app.cardCollections."+t))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,i.default)(this.nodeJson))return[this.createValidationError("object","cardCollections",(0,i.default)(this.nodeJson))]}},{key:"isMandatory",value:function(){return!1}}]),c}(c.default);t.default=p},4244:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(5266)),d=r(n(103)),p=(r(n(7799)),r(n(775))),f=r(n(9400));var h={id:"string|empty:false",type:{type:"enum",values:["header","paragraph","list","icon","appList","formList","sidebar","hyperlink","image","video","hippoFields","appVariables","label","button","TrelloCardSharing","table","date","dropdown","row","Image","AppVariables","Header","horizontalline","html","dropdownItem","attachmentList","menuItem","cardMenuItem","tableColumn","menu","HippoFields","Conversation","column","columns","userManagement","shareButton","customFields","trelloActivities"]},viewProps:{type:"object",optional:!0,props:{name:"string|optional",gap:"number|optional",align:{type:"enum",values:["left","right","center"],optional:!0}}},accessRight:"object|optional"},v=(0,f.default)().compile(h);function y(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.type),r=this.getFormIds();return(0,f.default)().compile({viewType:{type:"enum",values:["grid","list"]},type:{type:"enum",values:["all","selected","allCreatingForms","allUpdatingForms"]},showDescription:"boolean|optional",selectedForms:{type:"array",optional:!n,items:{type:"enum",values:r}}})}function m(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.type),r=this.getApps(!0);return(0,f.default)().compile({viewType:{type:"enum",values:["grid","list"]},type:{type:"enum",values:["all","selected"]},showDescription:"boolean|optional",selectedApps:{type:"array",optional:!n,label:"Selected Power-Ups",items:{type:"enum",values:r}}})}function g(){var e,t,n=null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.displayedTextLimit,r=n?1:null;return(0,f.default)().compile({text:"string",alignment:{type:"enum",values:["left","right","center","justify"],optional:!0},displayedTextLimit:{type:"enum",values:[!0,!1],optional:!0},maxCharacter:{optional:!n,type:"number",min:r,label:"Maximum Character"}})}var b=(0,f.default)().compile({text:"string",heading:{type:"enum",values:["h1","h2","h3","h4","h5","h6"]},alignment:{type:"enum",values:["left","right","center","justify"],optional:!0}}),_=((0,f.default)().compile({text:"string",alignment:{type:"enum",values:["left","right","center","justify"],optional:!0}}),(0,f.default)().compile({text:"string",url:"string|optional"})),E=(0,f.default)().compile({pageSize:"number|optional",query:{type:"object",optional:!0,props:{collections:{type:"array",items:{type:"string"},optional:!0},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]},type:{type:"enum",optional:!0,values:["basic"]}}},showExport:"boolean|optional",showSearch:"boolean|optional"}),x=(0,f.default)().compile({columns:{optional:!0,type:"array",items:{type:"object",props:{header:"string",view:{type:"object",props:h}}}}}),O=(0,f.default)().compile({text:"string",format:"string"}),w=(0,f.default)().compile({text:"string"}),k=(0,f.default)().compile({text:"string",query:{type:"object",optional:!0,props:{collections:{type:"array",optional:!0,items:{type:"string"}},includeArchived:{type:"enum",optional:!0,values:["all","archived","notarchived"]},type:{optional:!0,type:"enum",values:["basic"]}}}}),S=(0,f.default)().compile({name:"string|empty:false",family:"string|optional",size:"number|optional"}),A=(0,f.default)().compile({allowDeleteMessage:"boolean|optional",allowDeleteThread:"boolean|optional",allowGetBoardMembers:"boolean|optional",allowGetContacts:"boolean|optional",allowGetRoles:"boolean|optional",allowMembersUpdate:"boolean|optional",allowNewThread:"boolean|optional",allowQuickText:"boolean|optional",allowReply:"boolean|optional",canAddQuickText:"boolean|optional",canDeleteQuickText:"boolean|optional",canEditQuickText:"boolean|optional",canReply:"boolean|optional",canUploadAttachment:"boolean|optional",canUseQuickText:"boolean|optional",showMeta:"boolean|optional",showMetaDetail:"boolean|optional"}),T=(0,f.default)().compile({field:"string|optional",header:"string|optional",sortable:"boolean|optional"}),R=(0,f.default)().compile({css:"string|optional",html:"string",name:"string|empty:false"});function P(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.source);return(0,f.default)().compile({downloadCsvFile:"boolean",hideEmptyFields:"boolean",excerptContent:"boolean|optional",allowEdit:"boolean|optional",allowCopy:"boolean|optional",selectedFields:{type:"array",optional:!n,items:{type:"enum",values:this.getHippoFields(!0)}},showHippoFieldIcon:"boolean",showSearch:"boolean",showUpdateWith:"boolean",source:{type:"enum",values:["all","selected"]}})}function j(){var e,t,n="selected"===(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.source);return(0,f.default)().compile({downloadCsvFile:"boolean|optional",hideEmptyFields:"boolean|optional",excerptContent:"boolean|optional",allowEdit:"boolean|optional",selectedFields:{type:"array",optional:!n,items:{type:"enum",values:this.getAppParameters(!0)}},showIcon:"boolean|optional",showSearch:"boolean|optional",source:{type:"enum",values:["all","selected"]}})}var L=(0,f.default)().compile({text:"string"});function I(){return(0,f.default)().compile({field:{type:"string"}})}function C(){var e,t,n,r;return(0,f.default)().compile({attachmentListId:{type:"string",label:"Source",optional:"attachment"!==(null===(e=this.nodeJson)||void 0===e||null===(t=e.viewProps)||void 0===t?void 0:t.sourceType)},src:{type:"string",label:"Source",optional:"url"!==(null===(n=this.nodeJson)||void 0===n||null===(r=n.viewProps)||void 0===r?void 0:r.sourceType)}})}function M(){return(0,f.default)().compile({source:"string",displayOptions:{type:"array",items:{type:"enum",values:["all","comment","member","move","copy","archiveAndSendBoard","fieldUpdate","attachment","date"]}}})}function D(){var e;return(0,f.default)({useNewCustomCheckerFunction:!0}).compile({urlSource:{type:"enum",values:["current","custom"],optional:!0},customUrl:{type:"string",optional:"custom"!==(null===(e=this.nodeJson.viewProps)||void 0===e?void 0:e.urlSource)},align:{type:"enum",values:["left","center","right"]},viewType:{type:"enum",values:["horizontal","floating"]},style:{type:"enum",values:["circle","square"]},size:{type:"enum",values:["small","medium","large"]},color:"string",message:{type:"string",messages:{required:"'Share Message' field is required."}},services:{type:"array",items:{type:"custom",props:{id:"string",message:"string|optional",media:{type:"custom",default:"[[[nullValue]]]"},content:{type:"custom",default:"[[[nullValue]]]"}},custom:function(e,t,n,r,i,a){if("pinterest"===(null==e?void 0:e.id)&&(null==e||!e.media)){var o=(Object.values(null==i?void 0:i.services)||[]).findIndex((function(e){return"pinterest"===(null==e?void 0:e.id)}));t.push({type:"required",field:"services[".concat(o,"].media"),message:"Media field required on Pinterest service."})}if("copy"===(null==e?void 0:e.id)&&null!=e&&e.content&&(null==e||!e.message)){var l=(Object.values(null==i?void 0:i.services)||[]).findIndex((function(e){return"copy"===(null==e?void 0:e.id)}));t.push({type:"required",field:"services[".concat(l,"].message"),message:"Content field required on Copy service."})}return e}}},title:"string|optional"})}var N=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"getValidatorFunction",value:function(){var e=[];switch(e.pushArray(v(this.nodeJson)),this.validatorPath="".concat(this.path,".viewProps"),this.nodeJson.type){case"attachmentList":e.pushArray(I.call(this)(this.nodeJson.viewProps||{}));break;case"image":e.pushArray(C.call(this)(this.nodeJson.viewProps||{}));break;case"formList":e.pushArray(y.call(this)(this.nodeJson.viewProps||{}));break;case"appList":e.pushArray(m.call(this)(this.nodeJson.viewProps||{}));break;case"header":e.pushArray(b(this.nodeJson.viewProps||{}));break;case"paragraph":e.pushArray(g.call(this)(this.nodeJson.viewProps||{}));break;case"hyperLink":e.pushArray(_(this.nodeJson.viewProps||{}));break;case"TrelloCardSharing":e.pushArray(E(this.nodeJson.viewProps||{}));break;case"table":e.pushArray(x(this.nodeJson.viewProps||{}));break;case"date":e.pushArray(O(this.nodeJson.viewProps||{}));break;case"menuItem":e.pushArray(w(this.nodeJson.viewProps||{}));break;case"cardMenuItem":e.pushArray(k(this.nodeJson.viewProps||{}));break;case"icon":e.pushArray(S(this.nodeJson.viewProps||{}));break;case"Conversation":e.pushArray(A(this.nodeJson.viewProps||{}));break;case"tableColumn":e.pushArray(T(this.nodeJson.viewProps||{}));break;case"snippet":e.pushArray(R(this.nodeJson.viewProps||{}));break;case"hippoFields":e.pushArray(P.call(this)(this.nodeJson.viewProps||{}));break;case"appVariables":e.pushArray(j.call(this)(this.nodeJson.viewProps||{}));break;case"label":e.pushArray(L(this.nodeJson.viewProps||{}));case"shareButton":e.pushArray(D.call(this)(this.nodeJson.viewProps||{}));break;case"trelloActivities":e.pushArray(M.call(this)(this.nodeJson.viewProps||{}))}return e}},{key:"process",value:function(e,t,n){var r,i,a,o,l=this;this.id=n.id,null!=n&&null!==(r=n.viewProps)&&void 0!==r&&r.children&&this.addChildNode(new d.default(e,t+".viewProps.children"));var s=null==n||null===(i=n.viewProps)||void 0===i?void 0:i.events;s&&Object.entries(s).forEach((function(n){l.addChildNode(new c.default(e,t+".viewProps.events."+n[0]))})),null!=n&&null!==(a=n.accessRight)&&void 0!==a&&null!==(o=a.dataRule)&&void 0!==o&&o.conditions&&this.addChildNode(new p.default(e,"".concat(t,".accessRight.dataRule")))}}]),u}(u.default);t.default=N},5266:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(2746)),d=(r(n(7799)),r(n(4504)));var p=(0,r(n(9400)).default)().compile({id:"string"}),f=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){n.actionGroupId?this.addChildNode(new c.default(e,"app.actionGroups."+n.actionGroupId)):"string"==typeof n.action?this.addChildNode(new c.default(e,"app.actionGroups."+n.action)):this.addChildNode(new d.default(e,"".concat(this.path,".action"),!0))}},{key:"getValidatorFunction",value:function(){return p}}]),u}(u.default);t.default=f},8536:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(7632));var d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r,i=this;null!=n&&n.enabled&&(null==n||null===(r=n.body)||void 0===r||r.rows.forEach((function(t,r){var a;null!=t&&null!==(a=t.columns)&&void 0!==a&&a.length&&(null==t||t.columns.forEach((function(t,a){var o;i.addChildNode(new c.default(e,"".concat(i.path,".body.rows.").concat(r,".columns.").concat(a,".element"),null==t||null===(o=t.element)||void 0===o?void 0:o.id,n))})))})))}},{key:"getValidatorFunction",value:function(){var e,t,n=this,r=this.getFormIds(!0,(function(e){var t;return"email"===(null==e?void 0:e.type)&&(null==e?void 0:e.id)!==(null==n||null===(t=n.nodeJson)||void 0===t?void 0:t.id)})).map((function(e){return null==e?void 0:e.email})),i=[];return null!==(e=this.nodeJson)&&void 0!==e&&e.enabled?((r||[]).includes(null==this||null===(t=this.nodeJson)||void 0===t?void 0:t.email)&&i.push({type:"unique",message:"Email must be unique"}),i):[]}}]),u}(u.default);t.default=d},7632:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(2746)),p=(r(n(7799)),n(6009)),f=r(n(4876)),h=r(n(4908)),v=r(n(9400));function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=(0,v.default)().compile({input:"string",id:"string|empty:false",props:{type:"object",props:{value:"string|optional",label:"string|optional",name:"string",settings:"any|optional"}}}),b=function(e){(0,l.default)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function i(e,t,n,o){var l;return(0,a.default)(this,i),(l=r.call(this,e,t)).id=n,l.formJson=o,l}return(0,o.default)(i,[{key:"process",value:function(e,t,n){var r,i,a,o;if("Button"===(null==n?void 0:n.input)&&null!=n&&null!==(r=n.props)&&void 0!==r&&r["optional-actionGroupId"]){var l,s=null==n||null===(l=n.props)||void 0===l?void 0:l["optional-actionGroupId"];this.addChildNode(new d.default(e,"app.actionGroups."+s))}null!==(i=n.props)&&void 0!==i&&null!==(a=i.visibilityRules)&&void 0!==a&&null!==(o=a.rules)&&void 0!==o&&o.length&&this.addChildNode(new f.default(e,"".concat(this.path,".props.visibilityRules")))}},{key:"getValidatorFunction",value:function(){var e,t,n,r,i,a,o,l,s,u,c,d,f,y,b,_,E,x,O,w,k,S,A,T,R,P,j,L,I,C,M,D,N,F,V,B,J,U,q,Y,z,$,H,G,W,K,X,Z,Q,ee,te,ne,re,ie,ae,oe,le,se,ue,ce,de,pe,fe,he,ve,ye,me,ge,be,_e,Ee,xe,Oe,we,ke=this,Se="updateform"===(null==this||null===(e=this.parentNode)||void 0===e||null===(t=e.nodeJson)||void 0===t?void 0:t.type)||(null==this||null===(n=this.parentNode)||void 0===n||null===(r=n.nodeJson)||void 0===r?void 0:r.usesParent),Ae=this.parentNode.nodeJson.body.fieldMapping||{};for(var Te in Ae){var Re,Pe;"c_parentCardId"===(null===(Re=Ae[Te])||void 0===Re||null===(Pe=Re.cardField)||void 0===Pe?void 0:Pe.targetField)&&(Se=!0)}var je=this.getTrelloList(!0,Se),Le=!1,Ie=null==this||null===(i=this.parentNode)||void 0===i||null===(a=i.nodeJson)||void 0===a||null===(o=a.body)||void 0===o?void 0:o.fieldMapping;Object.values(Ie||{}).forEach((function(e){var t;null!=e&&e.trelloCardField&&"name"===(null===(t=e.trelloCardField)||void 0===t?void 0:t.targetField)&&(Le=!0)}));var Ce={type:"object",optional:!0,props:{required:{type:"boolean",optional:!0},minLength:{type:"number",optional:!0,nullable:!0,min:0,max:null===(l=this.nodeJson)||void 0===l||null===(s=l.props)||void 0===s||null===(u=s.validationRules)||void 0===u?void 0:u.maxLength,label:"Min Length"},maxLength:{type:"number",optional:!0,nullable:!0,min:null===(c=this.nodeJson)||void 0===c||null===(d=c.props)||void 0===d||null===(f=d.validationRules)||void 0===f?void 0:f.minLength,label:"Max Length"},minItems:{type:"number",optional:!0,nullable:!0,min:0,max:null===(y=this.nodeJson)||void 0===y||null===(b=y.props)||void 0===b||null===(_=b.validationRules)||void 0===_?void 0:_.maxItems,label:"Min Items"},maxItems:{type:"number",optional:!0,nullable:!0,min:null===(E=this.nodeJson)||void 0===E||null===(x=E.props)||void 0===x||null===(O=x.validationRules)||void 0===O?void 0:O.minItems,label:"Max Items"}}},Me={"mandatory-action":{type:"object",optional:"updateform"===(null==this||null===(w=this.parentNode)||void 0===w||null===(k=w.nodeJson)||void 0===k?void 0:k.type),nullable:"updateform"===(null==this||null===(S=this.parentNode)||void 0===S||null===(A=S.nodeJson)||void 0===A?void 0:A.type),props:{type:{type:"enum",values:["create-card","update-card"]},variables:{type:"object",props:{cardCollection:{type:"string",optional:!0,nullable:!0},name:{type:"string",empty:!1,optional:Le,messages:{required:"Card Name is a required field"}},listHippoId:{type:"enum",values:je},description:"string|optional"}}}}},De={label:"string",name:"string",schema:"object",settings:"object",validationRules:Ce,elementData:{type:"object",props:{include:{type:"object",props:{type:{type:"enum",values:["selected","all","variable"]},variable:{type:"string",optional:"variable"!==(null===(T=this.nodeJson)||void 0===T||null===(R=T.props)||void 0===R||null===(P=R.elementData)||void 0===P||null===(j=P.include)||void 0===j?void 0:j.type),label:"Variable"},selected:{type:"array",nullable:"selected"!==(null===(L=this.nodeJson)||void 0===L||null===(I=L.props)||void 0===I||null===(C=I.elementData)||void 0===C||null===(M=C.include)||void 0===M?void 0:M.type),optional:"selected"!==(null===(D=this.nodeJson)||void 0===D||null===(N=D.props)||void 0===N||null===(F=N.elementData)||void 0===F||null===(V=F.include)||void 0===V?void 0:V.type),minItems:1,messages:{required:"No label selected for Trello Label Selector"}}}}}}},Ne={label:"string",name:"string",schema:"object",settings:"object",validationRules:Ce,elementData:{type:"object",props:{include:{type:"object",props:{type:{type:"enum",values:["selected","all","variable"]},variable:{type:"string",optional:"variable"!==(null===(B=this.nodeJson)||void 0===B||null===(J=B.props)||void 0===J||null===(U=J.elementData)||void 0===U||null===(q=U.include)||void 0===q?void 0:q.type),label:"Variable"},entities:{type:"array",nullable:"all"!==(null===(Y=this.nodeJson)||void 0===Y||null===(z=Y.props)||void 0===z||null===($=z.elementData)||void 0===$||null===(H=$.include)||void 0===H?void 0:H.type),optional:"all"!==(null===(G=this.nodeJson)||void 0===G||null===(W=G.props)||void 0===W||null===(K=W.elementData)||void 0===K||null===(X=K.include)||void 0===X?void 0:X.type),items:{type:"enum",minItems:1,values:["hippoFields","appParameters","customFields"]}},selected:{type:"array",nullable:"selected"!==(null===(Z=this.nodeJson)||void 0===Z||null===(Q=Z.props)||void 0===Q||null===(ee=Q.elementData)||void 0===ee||null===(te=ee.include)||void 0===te?void 0:te.type),optional:"selected"!==(null===(ne=this.nodeJson)||void 0===ne||null===(re=ne.props)||void 0===re||null===(ie=re.elementData)||void 0===ie||null===(ae=ie.include)||void 0===ae?void 0:ae.type),minItems:1,messages:{required:"No label selected for Trello Label Selector"}}}},fields:"array"}}},Fe={label:"string",name:"string",schema:"object",settings:"object",validationRules:Ce,allowAddUser:"boolean|optional",elementData:{type:"object",props:{userGroups:{type:"array",minItems:1,items:{type:"object",props:{type:{type:"enum",values:["hipporelloRole","consoleRoles","trelloRoles"]},id:"string"},custom:function(e,t){var n,r=ke.getRoles(!0);return"hipporelloRole"===(null==e?void 0:e.type)&&(r.includes(null==e?void 0:e.id)||t.push({type:"enumValue",expected:null===(n=ke.getRoles())||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name}))})),e}},messages:{required:"At least 1 group must be selected",minItems:"At least 1 group must be selected"}},creatingGroups:{optional:!(null!==(oe=this.nodeJson)&&void 0!==oe&&null!==(le=oe.props)&&void 0!==le&&le.allowAddUser),type:"array",minItems:1,items:{type:"enum",values:this.getRoles(!0)},messages:{required:"At least 1 role must be selected for the user to be created.",minItems:"At least 1 role must be selected for the user to be created."}}}}},Ve={label:"string",description:"string|optional",name:"string",schema:"object",validationRules:Ce,settings:{type:"object",props:{inputType:"string",noText:{type:"string",optional:"selectBox"!==(null===(se=this.nodeJson)||void 0===se||null===(ue=se.props)||void 0===ue||null===(ce=ue.settings)||void 0===ce?void 0:ce.inputType),messages:{required:"The 'No' field is required."}},yesText:{type:"string",optional:"selectBox"!==(null===(de=this.nodeJson)||void 0===de||null===(pe=de.props)||void 0===pe||null===(fe=pe.settings)||void 0===fe?void 0:fe.inputType),messages:{required:"The 'Yes' field is required."}},placeholder:"string|optional",descriptionSwitch:"boolean",defaultValue:"boolean|optional"}}},Be=[],Je=[];if(Be.pushArray(g(this.nodeJson)),(null===(he=this.nodeJson)||void 0===he?void 0:he.input)===p.FORM_INPUT_NAMES.BUTTON){var Ue,qe=(0,v.default)().compile(Me);Je.pushArray(qe(null===(Ue=this.nodeJson)||void 0===Ue?void 0:Ue.props))}if((null===(ve=this.nodeJson)||void 0===ve?void 0:ve.input)===p.FORM_INPUT_NAMES.RADIO_BUTTON||(null===(ye=this.nodeJson)||void 0===ye?void 0:ye.input)===p.FORM_INPUT_NAMES.MULTISELECTBOX||(null===(me=this.nodeJson)||void 0===me?void 0:me.input)===p.FORM_INPUT_NAMES.CHECKBOX||(null===(ge=this.nodeJson)||void 0===ge?void 0:ge.input)===p.FORM_INPUT_NAMES.SELECT_BOX){var Ye=(0,v.default)().compile({label:"string|optional",description:"string|optional",name:"string",schema:"object",validationRules:"object",settings:"object",data:{type:"array",items:{type:"object",props:{value:{type:"string",optional:!1,minLength:1,messages:{required:"Option cannot be empty"}}}}}});Je.pushArray(Ye(this.nodeJson.props))}if((null===(be=this.nodeJson)||void 0===be?void 0:be.input)===p.FORM_INPUT_NAMES.TRELLO_LABEL_SELECTOR){var ze=(0,v.default)().compile(De);Je.pushArray(ze(this.nodeJson.props))}if((null===(_e=this.nodeJson)||void 0===_e?void 0:_e.input)===p.FORM_INPUT_NAMES.FIELD_SELECTOR){var $e=(0,v.default)().compile(Ne);Je.pushArray($e(this.nodeJson.props))}if((null===(Ee=this.nodeJson)||void 0===Ee?void 0:Ee.input)===p.FORM_INPUT_NAMES.USER_SELECTOR){var He=(0,v.default)({useNewCustomCheckerFunction:!0}).compile(Fe);Je.pushArray(He(this.nodeJson.props))}if((null===(xe=this.nodeJson)||void 0===xe?void 0:xe.input)===p.FORM_INPUT_NAMES.ATTACHMENT_SELECTOR){var Ge=(0,v.default)().compile({label:"string",name:"string",schema:"object",settings:"object",elementData:{type:"object",props:{source:"string"}}});Je.pushArray(Ge(this.nodeJson.props))}if((null===(Oe=this.nodeJson)||void 0===Oe?void 0:Oe.input)===p.FORM_INPUT_NAMES.BOOLEAN){var We=(0,v.default)().compile(Ve);Je.pushArray(We(this.nodeJson.props))}if([p.FORM_INPUT_NAMES.RADIO_BUTTON,p.FORM_INPUT_NAMES.SELECT_BOX,p.FORM_INPUT_NAMES.MULTISELECTBOX,p.FORM_INPUT_NAMES.CHECKBOX].includes(null===(we=this.nodeJson)||void 0===we?void 0:we.input)){var Ke,Xe,Ze,Qe=(null==this||null===(Ke=this.nodeJson)||void 0===Ke||null===(Xe=Ke.props)||void 0===Xe||null===(Ze=Xe.data)||void 0===Ze?void 0:Ze.map((function(e){return e.value})))||[];Qe.length!==(0,h.default)(Qe).length&&Be.push({type:"uniqueValue",label:"Option values",actual:JSON.stringify(Qe),field:"props.data"})}return Je=Je.map((function(e){return m(m({},e),{},{field:"props.".concat(null==e?void 0:e.field)})})),Be.pushArray(Je),Be}}]),i}(c.default);t.default=b},4876:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=n(7076),d=r(n(8328));var p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(){return(0,i.default)(this,u),r.apply(this,arguments)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r,i=this;null!=n&&null!==(r=n.rules)&&void 0!==r&&r.length&&n.rules.map((function(t,n){i.addChildNode(new d.default(e,"".concat(i.path,".rules.").concat(n)))}))}},{key:"getValidatorFunction",value:function(){var e=[];return e.pushArray((0,c.formConditionsWithAnd)(null==this?void 0:this.nodeJson)),e}}]),u}(u.default);t.default=p},6946:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(9713)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(2954)),p=(r(n(7799)),r(n(7632))),f=r(n(775)),h=r(n(6423)),v=r(n(9400));var y=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,a.default)(this,c),r.call(this,e,t)}return(0,o.default)(c,[{key:"process",value:function(e,t,n){var r=this;if(null!=n&&n.enabled){var i,a,o,l,s,u,c,v=(null===(i=n.body)||void 0===i?void 0:i.successViews)||{},y=Object.values(v||{});if(y&&"view"===(null==y||null===(a=y[0])||void 0===a||null===(o=a.props)||void 0===o?void 0:o.type)||"view"===(null==y||null===(l=y[0])||void 0===l?void 0:l.type)){var m,g,b,_=null==y||null===(m=y[0])||void 0===m||null===(g=m.props)||void 0===g||null===(b=g.view)||void 0===b?void 0:b.id;this.addChildNode(new d.default(e,"app.views."+_))}null!=n&&null!==(s=n.accessRight)&&void 0!==s&&null!==(u=s.dataRule)&&void 0!==u&&u.conditions&&this.addChildNode(new f.default(e,"".concat(t,".accessRight.dataRule"))),("update"===(null==n?void 0:n.type)||null!=n&&n.usesParent)&&this.addChildNode(new h.default(e,"".concat(t,".accessRight.dataRule"))),null==n||null===(c=n.body)||void 0===c||c.rows.forEach((function(t,i){var a;null!=t&&null!==(a=t.columns)&&void 0!==a&&a.length&&(null==t||t.columns.forEach((function(t,a){var o;r.addChildNode(new p.default(e,"".concat(r.path,".body.rows.").concat(i,".columns.").concat(a,".element"),null==t||null===(o=t.element)||void 0===o?void 0:o.id,n))})))}))}}},{key:"getValidatorFunction",value:function(){var e,t,n,r,a,o,l,s,u,c,d,p,f,h,y=this,m=this.getHippoFields(!0),g=(this.getCollections(),this.getFormIds(!0,(function(e){var t;return(null==e?void 0:e.id)!==(null==y||null===(t=y.nodeJson)||void 0===t?void 0:t.id)}))),b=null==g?void 0:g.map((function(e){return null==e?void 0:e.slug})),_=null===(e=this.childNodes)||void 0===e||null===(t=e.find((function(e){var t;return"Button"===(null===(t=e.nodeJson)||void 0===t?void 0:t.input)})))||void 0===t?void 0:t.nodeJson,E=null===(n=this.childNodes)||void 0===n?void 0:n.reduce((function(e,t){var n,r,i,a,o,l,s;return null!==(n=t.nodeJson)&&void 0!==n&&null!==(r=n.props)&&void 0!==r&&null!==(i=r.schema)&&void 0!==i&&i.type&&"Captcha"!==(null===(a=t.nodeJson)||void 0===a||null===(o=a.props)||void 0===o?void 0:o.name)?(e[null==t?void 0:t.id]={type:"object",label:null==t||null===(l=t.nodeJson)||void 0===l||null===(s=l.props)||void 0===s?void 0:s.label,props:{hippoField:{type:"object",optional:!0,props:{targetField:{type:"enum",values:m},operation:{type:"enum",values:["set"]}}},trelloCardField:{type:"object",optional:!0,props:{targetField:{type:"enum",values:["userselector","label","name","description","startDate","dueDate"]},operation:{type:"enum",values:["set","keepexcluded"]}}},trelloCardCustomField:{type:"object",optional:!0}}},e):e}),{});h="page"===(null===(r=this.nodeJson)||void 0===r||null===(a=r.body)||void 0===a||null===(o=a.successViews)||void 0===o||null===(l=o[null==_?void 0:_.id])||void 0===l?void 0:l.type)?{page:{type:"object",props:{url:{type:"custom",check:function(e,t){return null!==/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/.exec(e)?e:(t.push({type:"not valid",message:"External URL is not valid"}),"")}},target:{type:"enum",optional:!0,values:["_self","_blank"]}}}}:{view:{type:"object",props:{id:"string",target:{type:"object",props:{type:"string"}}}}};var x=(0,v.default)({useNewCustomCheckerFunction:!0}).compile({id:"string|empty:false",anonymous:"boolean|optional",enabled:"boolean|optional",formatVersion:"number",icon:"string|empty:false",name:"string|empty:false",type:{type:"enum",values:["form","updateform"]},aliases:"array|optional",usesParent:"boolean|optional",slug:{type:"custom",check:function(e,t,n,r,i){return b.includes(e)&&t.push({type:"unique",message:"Form slug must be unique"}),e}},boardId:"string|optional|empty:false",showInTrello:"boolean|optional",body:{type:"object",props:{formAutoIncrementId:"number",readOnly:"boolean|optional",rows:{type:"array",min:2,messages:{arrayMin:"At least 1 element required to create form"},items:{type:"object",props:{id:"string",columns:{type:"array",items:{type:"object",props:{id:"string",element:{type:"object",props:{id:"string"}}}}}}}},successViews:{type:"object",props:(0,i.default)({},null==_?void 0:_.id,{type:"object",props:{id:"string|optional",type:{type:"enum",values:["page","view"]},props:{type:"object",props:h}}})},fieldMapping:null!=Object&&null!==(s=Object.keys(E))&&void 0!==s&&s.length?{type:"object",props:E}:{type:"object",optional:!0}}},submitter:{type:"object",optional:!0,props:{type:"string"}}}),O=[],w=(0,v.default)().compile({submitter:{type:"object",props:{type:"string",field:"string"}}});return"specifiedEmail"!==(null===(u=this.nodeJson)||void 0===u||null===(c=u.submitter)||void 0===c?void 0:c.type)||null!=this&&null!==(d=this.nodeJson)&&void 0!==d&&null!==(p=d.submitter)&&void 0!==p&&p.field||O.pushArray(w(this.nodeJson)),null!==(f=this.nodeJson)&&void 0!==f&&f.enabled&&(this.nodeJson.body.fieldMapping||(this.nodeJson.body.fieldMapping={}),O.pushArray(x(this.nodeJson))),O}}]),c}(c.default);t.default=y},8328:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(319)),a=r(n(4575)),o=r(n(3913)),l=r(n(6525)),s=r(n(2205)),u=r(n(8585)),c=r(n(9754)),d=r(n(5584)),p=n(7076);var f=function(e){(0,s.default)(d,e);var t,n,r=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.default)(t);if(n){var i=(0,c.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,u.default)(this,e)});function d(e,t){return(0,a.default)(this,d),r.call(this,e,t)}return(0,o.default)(d,[{key:"process",value:function(e,t,n){(0,l.default)((0,c.default)(d.prototype),"process",this).call(this,e,t,n)}},{key:"getValidatorFunction",value:function(){var e=this,t=[];if(t.pushArray((0,p.formConditionRule)(null==this?void 0:this.nodeJson)),"select"===this.nodeJson.valueType&&Array.isArray(this.nodeJson.value)){var n,r=this.getFormElements(),i=null==r?void 0:r.find((function(t){return t.id===e.nodeJson.field}));if(null==i||null===(n=i.props)||void 0===n||!n.elementData){var a,o,l,s,u=null==i||null===(a=i.props)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.map((function(e){return e.value}));null===(l=this.nodeJson)||void 0===l||null===(s=l.value)||void 0===s||s.forEach((function(n){null!=u&&u.includes(n)||t.push(e.createValidationError("oneOf","value",e.nodeJson.value,u,u))}))}}return t}},{key:"getFormElements",value:function(){var e,t,n,r,a,o=null===(e=this.parentNode)||void 0===e||null===(t=e.parentNode)||void 0===t||null===(n=t.parentNode)||void 0===n?void 0:n.nodeJson;return null===(r=(null==o||null===(a=o.body)||void 0===a?void 0:a.rows)||[])||void 0===r?void 0:r.reduce((function(e,t){var n;return[].concat((0,i.default)(e),(0,i.default)(null==t||null===(n=t.columns)||void 0===n?void 0:n.map((function(e){return e.element}))))}),[])}}]),d}(d.default);t.default=f},2241:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=(r(n(7799)),n(8061));var d=(0,r(n(9400)).default)().compile({id:"string|empty:false",label:"string|empty:false",multiple:"boolean",resolveBy:{type:"enum",optional:!0,values:[c.RESOLVE_TYPES.RESOLVE_LIST_BY_HIPPO_ID,c.RESOLVE_TYPES.RESOLVE_LABEL_BY_HIPPO_ID,c.RESOLVE_TYPES.RESOLVE_MEMBER_BY_TRELLO_ID,c.RESOLVE_TYPES.RESOLVE_USER_BY_USER_ID,c.RESOLVE_TYPES.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,c.RESOLVE_TYPES.RESOLVE_CARD_BY_CARD_ID,c.RESOLVE_TYPES.RESOLVE_FIELD_DEFINITION_BY_ID]},type:{type:"enum",values:c.VARIABLE_TYPES}}),p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return d}}]),u}(u.default);t.default=p},9305:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584));r(n(7799));var c=(0,r(n(9400)).default)().compile({id:"string",name:"string"}),d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return c}}]),u}(u.default);t.default=d},887:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(9305)),p=r(n(4752));var f=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,a.default)(this,c),r.call(this,e,t)}return(0,o.default)(c,[{key:"process",value:function(e,t,n){var r=this,i=p.default.query(e,"app.roles");i&&(i=Object.values(i)).forEach((function(t){r.addChildNode(new d.default(e,"app.roles."+t.id))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,i.default)(this.nodeJson))return[this.createValidationError("object",null,(0,i.default)(this.nodeJson))]}},{key:"isMandatory",value:function(){return!1}}]),c}(c.default);t.default=f},8417:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(9049));r(n(4752));var p=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){return(0,a.default)(this,c),r.call(this,e,t)}return(0,o.default)(c,[{key:"process",value:function(e,t,n){var r=this,i=this.getAppParameters(!0);i&&i.forEach((function(t){r.addChildNode(new d.default(e,"app.fieldDefinitions.appVariableFields."+t))}))}},{key:"getValidatorFunction",value:function(){if("object"!==(0,i.default)(this.nodeJson))return[this.createValidationError("object",null,(0,i.default)(this.nodeJson))]}}]),c}(c.default);t.default=p},9049:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=(r(n(7799)),n(8061)),d=r(n(9400));var p={id:"string",label:"string",multiple:"boolean",resolveBy:{type:"enum",optional:!0,values:[c.RESOLVE_TYPES.RESOLVE_LIST_BY_HIPPO_ID,c.RESOLVE_TYPES.RESOLVE_LABEL_BY_HIPPO_ID,c.RESOLVE_TYPES.RESOLVE_MEMBER_BY_TRELLO_ID,c.RESOLVE_TYPES.RESOLVE_USER_BY_USER_ID,c.RESOLVE_TYPES.RESOLVE_BOARD_BY_TRELLO_BOARD_ID,c.RESOLVE_TYPES.RESOLVE_CARD_BY_CARD_ID,c.RESOLVE_TYPES.RESOLVE_FIELD_DEFINITION_BY_ID]},type:{type:"enum",values:c.VARIABLE_TYPES}},f=(0,d.default)().compile(p),h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){return f}}]),u}(u.default);t.default=h},4050:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=(r(n(7799)),r(n(9400)));var d=(0,c.default)().compile({appViewSettings:{type:"object",props:{icon:{type:"object",props:{name:"string|optional",url:"string|optional",background:"string",iconSet:{type:"enum",values:["fontAwesome"]},type:{type:"enum",values:["image","icon"]}}}}},portalViewSettingOverrides:{type:"object",optional:!0,nullable:!0,props:{type:{type:"enum",values:["custom"]},css:{type:"object",optional:!0,props:{simple:{type:"object",props:{"body-text-color":"string|optional","font-family":"string|optional","primary-color":"string|optional"}}}},images:{type:"object",optional:!0,props:{banner:"string|optional",logo:"string|optional",socialShareImage:"string|optional"}}}}}),p=(0,c.default)().compile({url:{type:"string",messages:{required:"The 'Image' is required."}}}),f=(0,c.default)().compile({name:"string"}),h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"getValidatorFunction",value:function(){var e=[],t=d(this.nodeJson);if(Array.isArray(t)&&e.pushArray(t),"image"===this.nodeJson.appViewSettings.icon.type){var n=p(this.nodeJson.appViewSettings.icon);Array.isArray(n)&&(this.validatorPath="".concat(this.path,".appViewSettings.icon"),e.pushArray(n))}else if("icon"===this.nodeJson.appViewSettings.icon.type){var r=f(this.nodeJson.appViewSettings.icon);Array.isArray(r)&&(this.validatorPath="".concat(this.path,".appViewSettings.icon"),e.pushArray(r))}return e}}]),u}(u.default);t.default=h},825:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(2205)),o=r(n(8585)),l=r(n(9754)),s=r(n(7845));r(n(7799));var u=(0,r(n(9400)).default)().compile({enabled:"boolean",id:"string",type:"string"}),c=function(e){(0,a.default)(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var i=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,o.default)(this,e)});function s(e,t){var n;return(0,i.default)(this,s),(n=r.call(this,e,t)).getValidatorFunction=function(){var e,t,r=[],i=u(n.nodeJson);Array.isArray(i)&&r.pushArray(i);var a=n.getViewIds(!1,(function(e){var t,r,i;return null==e||null===(t=e.viewProps)||void 0===t||null===(r=t.environments)||void 0===r?void 0:r.includes(null===(i=n.nodeJson)||void 0===i?void 0:i.type)}));return null!=a&&a.length||r.push(n.createValidationError("required","views",n.nodeJson.views,null,null,"You must create at least one page for the Board View.")),null!==(e=n.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[n.nodeJson.home]||r.push(n.createValidationError("required","home",n.nodeJson.home,null,null,"One of the Board View pages should be the home page.")),function(){return r}},n}return s}(s.default);t.default=c},702:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(7845));r(n(7799));var c=(0,r(n(9400)).default)().compile({enabled:"boolean",id:"string",type:"string"}),d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"getValidatorFunction",value:function(){var e,t,n=[],r=c(this.nodeJson);return Array.isArray(r)&&n.pushArray(r),!this.nodeJson.appHeader||null!==(e=this.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[this.nodeJson.appHeader]||n.push(this.createValidationError("oneOf","appHeader",this.nodeJson.appHeader,"Error Message")),function(){return n}}}]),u}(u.default);t.default=d},7041:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(8998));var d=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t,n,a){var o;return(0,i.default)(this,u),(o=r.call(this,e,t)).expression=n,o.entries=n,o}return(0,a.default)(u,[{key:"process",value:function(e,t,n){}},{key:"findFieldByPath",value:function(){var e=this.getAccessibleFieldTypes(!1),t=this.expression.replace("[]",[]),n=(t=t.replace("Object.",".")).split(".").filter(Boolean),r=null,i=(null==n?void 0:n[0])||"";return n.forEach((function(t){null!=r&&(i=r.resolveBy?r.resolveBy+"."+t:r.id+"."+t);var n=null==e?void 0:e[i];n&&(null!=r&&null==(null==n?void 0:n.resolveBy)||(r=n))})),this.activeContext=r,r}},{key:"getRightValueEntityName",value:function(){var e;return this.getAccessibleFieldTypes(!1),null===(e=this.activeContext)||void 0===e?void 0:e.label}},{key:"getRightValues",value:function(){var e=this.findFieldByPath();return e.resolveBy===u.RESOLVE_LABEL_BY_HIPPO_ID?this.getTrelloLabels(!0):e.resolveBy===u.RESOLVE_LIST_BY_HIPPO_ID?this.getTrelloList(!0):e.resolveBy===u.RESOLVE_MEMBER_BY_TRELLO_ID?this.getTrelloMembers(!0):e.resolveBy===u.RESOLVE_FIELD_DEFINITION_BY_ID?this.getFieldDefinitions(!0):null}},{key:"getValidatorFunction",value:function(){var e=u.createJsonataExpression(this.expression),t=[],n=this.getAccessibleFieldTypes(!0),r=this.getAccessibleFieldTypes(!1),i=this,a=null,o=new Proxy({},{get:function(e,l){var s=["createLinkEnc","createLink","form."].some((function(e){return i.expression.includes(e)}));if(0===t.length&&"sequence"!==l&&!s){var u=l;null!=a&&(u=a.resolveBy?a.resolveBy+"."+u:a.id+"."+u);var c=null==r?void 0:r[u],d=null==n?void 0:n[u],p=(null==d?void 0:d.label)||"";c?null!=a&&null==c.resolveBy||(a=c):d?t.push({path:i.validatorPath,type:"invalidVariable",message:'The variable named **"'.concat(p,'"** has been deleted and is currently unavailable.'),args:[p,i.expression]}):t.push({path:i.validatorPath,type:"invalidVariable",message:"The variable used cannot be found. Please remove or replace.",args:[p,i.expression]})}return o}});try{e.evaluate(o)}catch(e){}return null!=t&&t.length&&console.log(t),t}}],[{key:"createJsonataExpression",value:function(e){var t=this.ALL_JSONATA_EXPRESSIONS[e];return null==t&&((t=(0,c.default)(e)).registerFunction("createLinkEnc",(function(){}),"<ssssssa:s>"),t.registerFunction("createLink",(function(){}),"<ssssssa:s>"),t.registerFunction("toString",(function(){}),"<s-a:s>"),this.ALL_JSONATA_EXPRESSIONS[e]=t),t}}]),u}(u.default);t.default=d,d.firstLevel={system:!0,portal:!0,user:!0,board:!0,card:!0,parentCard:!0,appParameters:!0},d.ALL_JSONATA_EXPRESSIONS={}},6282:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(4244));r(n(7799));var d=(0,r(n(9400)).default)().compile({id:"string",view:{type:"object",optional:!0,props:{id:"string",children:"array|optional"}}}),p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t,n,a){var o;return(0,i.default)(this,u),(o=r.call(this,e,t)).index=a,o.rootNode=n,o}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r=this,i=n.id;this.rootNode.childNodeRegistry[i]=this;var a="app.components."+i;this.addChildNode(new c.default(e,a)),null!=n&&n.children?n.children.forEach((function(n,i){r.addChildNode(new u(e,t+".children["+i+"]",r.rootNode,i))})):null!=n&&n.view?this.addChildNode(new u(e,t+".view",this.rootNode,0)):null!=n&&n.columns&&n.columns.forEach((function(n,i){r.addChildNode(new u(e,t+".columns["+i+"]",r.rootNode,i))}))}},{key:"getValidatorFunction",value:function(){var e,t,n,r,i=[],a=d(this.nodeJson);Array.isArray(a)&&i.pushArray(a);var o=null==this||null===(e=this.nodeJson)||void 0===e?void 0:e.id;return null!==(t=this.appJson)&&void 0!==t&&null!==(n=t.app)&&void 0!==n&&null!==(r=n.components)&&void 0!==r&&r[o]||i.push(this.createValidationError("oneOf","id",this.nodeJson.id)),i}}]),u}(u.default);t.default=p},103:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(8)),a=r(n(4575)),o=r(n(3913)),l=r(n(2205)),s=r(n(8585)),u=r(n(9754)),c=r(n(5584)),d=r(n(6282));var p=function(e){(0,l.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var i=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,s.default)(this,e)});function c(e,t){var n;return(0,a.default)(this,c),(n=r.call(this,e,t)).childNodeRegistry={},n}return(0,o.default)(c,[{key:"process",value:function(e,t,n){var r=this;n.forEach((function(n,i){r.addChildNode(new d.default(e,t+"["+i+"]",r,i))}))}},{key:"getValidatorFunction",value:function(){return Array.isArray(this.nodeJson)?null:[this.createValidationError("array",null,(0,i.default)(this.nodeJson),"array")]}}]),c}(c.default);t.default=p},1190:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103));r(n(7799));var d=(0,r(n(9400)).default)().compile({id:"string",viewProps:{type:"object",props:{login:"boolean|optional",menu:"boolean|optional",logo:"boolean|optional"}}}),p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r,i;null!=n&&null!==(r=n.viewProps)&&void 0!==r&&null!==(i=r.children)&&void 0!==i&&i.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}},{key:"getValidatorFunction",value:function(){return d}}]),u}(u.default);t.default=p},2954:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103)),d=(r(n(7799)),r(n(775))),p=r(n(6423)),f=n(8061);var h=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"getValidatorFunction",value:function(){var e,t,n,r,i,a,o,l=this,s=!(null!==(e=this.nodeJson)&&void 0!==e&&null!==(t=e.viewProps)&&void 0!==t&&null!==(n=t.environments)&&void 0!==n&&n.length),u=this.getViewIds(!1,(function(e){var t;return(null==e?void 0:e.id)!==(null==l||null===(t=l.nodeJson)||void 0===t?void 0:t.id)})).map((function(e){var t;return null==e||null===(t=e.viewProps)||void 0===t?void 0:t.slug})),c=getValidator().compile({enabled:"boolean",id:"string",viewProps:{type:"object",props:{name:"string",align:{type:"enum",values:["left","center","right"],optional:!0},cardAware:"boolean|optional",children:"array|optional",title:s?"string|optional":"string"}}}),d=getValidator({useNewCustomCheckerFunction:!0}).compile({viewProps:{type:"object",props:{slug:{type:"custom",check:function(e,t,n){return f.PAGE_SLUG_BLACKLIST.includes(e)?t.push({type:"notOneOf",label:"Page Slug",expected:f.PAGE_SLUG_BLACKLIST}):u.includes(e)&&t.push({type:"unique",message:"Page slug must be unique"}),e}}}}}),p=[],h=c(this.nodeJson);if(Array.isArray(h)&&p.pushArray(h),null!==(r=this.nodeJson)&&void 0!==r&&null!==(i=r.viewProps)&&void 0!==i&&null!==(a=i.environments)&&void 0!==a&&a.some((function(e){return["webView","trelloBoardView"].includes(e)}))){var v=d(this.nodeJson);p.pushArray(v)}return null!==(o=this.nodeJson)&&void 0!==o&&o.enabled?function(){return p}:function(){return[]}}},{key:"process",value:function(e,t,n){var r,i,a,o,l,s,u,f,h;this.env=(null===(r=n.viewProps)||void 0===r||null===(i=r.environments)||void 0===i?void 0:i[0])||"webView",null!=n&&null!==(a=n.accessRight)&&void 0!==a&&null!==(o=a.dataRule)&&void 0!==o&&o.conditions&&this.addChildNode(new d.default(e,"".concat(t,".accessRight.dataRule"))),null!=n&&null!==(l=n.viewProps)&&void 0!==l&&l.cardAware&&null!=n&&null!==(s=n.viewProps)&&void 0!==s&&null!==(u=s.environments)&&void 0!==u&&u.length&&this.addChildNode(new p.default(e,"".concat(t,".accessRight.dataRule"))),null!=n&&null!==(f=n.viewProps)&&void 0!==f&&null!==(h=f.children)&&void 0!==h&&h.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}}]),u}(u.default);t.default=h},4754:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(103));r(n(7799));var d=(0,r(n(9400)).default)().compile({id:"string",viewProps:{type:"object",props:{login:"boolean|optional",menu:"boolean|optional",logo:"boolean|optional"}}}),p=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r,i;null!=n&&null!==(r=n.viewProps)&&void 0!==r&&null!==(i=r.children)&&void 0!==i&&i.length&&this.addChildNode(new c.default(e,t+".viewProps.children"))}},{key:"getValidatorFunction",value:function(){return d}}]),u}(u.default);t.default=p},7845:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(3913)),o=r(n(2205)),l=r(n(8585)),s=r(n(9754)),u=r(n(5584)),c=r(n(2954)),d=r(n(1190)),p=(r(n(4752)),r(n(4754)));var f=function(e){(0,o.default)(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,s.default)(t);if(n){var i=(0,s.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.default)(this,e)});function u(e,t){return(0,i.default)(this,u),r.call(this,e,t)}return(0,a.default)(u,[{key:"process",value:function(e,t,n){var r=this,i=n.type,a=n.appHeader,o=n.sidebar,l=this.getViewIds(!1);null!=l&&l.length&&l.forEach((function(t){null==t||!t.enabled||null!=t&&t.deleted?t.id===a?r.addChildNode(new d.default(e,"app.views."+t.id)):t.id===o&&r.addChildNode(new p.default(e,"app.views."+t.id)):"page"===t.type&&null!=t.viewProps.environments&&t.viewProps.environments.indexOf(i)>=0&&r.addChildNode(new c.default(e,"app.views."+t.id))}))}}]),u}(u.default);t.default=f},6474:(e,t,n)=>{"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(4575)),a=r(n(2205)),o=r(n(8585)),l=r(n(9754)),s=r(n(7845));r(n(7799));var u=(0,r(n(9400)).default)().compile({enabled:"boolean",id:"string",type:"string"}),c=function(e){(0,a.default)(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var i=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,o.default)(this,e)});function s(e,t){var n;return(0,i.default)(this,s),(n=r.call(this,e,t)).getValidatorFunction=function(){var e,t,r,i,a=[],o=u(n.nodeJson);return Array.isArray(o)&&a.pushArray(o),null!==(e=n.appJson)&&void 0!==e&&null!==(t=e.app)&&void 0!==t&&t.views[n.nodeJson.appHeader]||a.push(n.createValidationError("oneOf","appHeader",n.nodeJson.appHeader,"Errore Message")),null!==(r=n.appJson)&&void 0!==r&&null!==(i=r.app)&&void 0!==i&&i.views[n.nodeJson.home]||a.push(n.createValidationError("oneOf","home",n.nodeJson.home,"Errore Message")),function(){return a}},n}return s}(s.default);t.default=c},7799:function(e,t,n){"use strict";var r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.ISOLATE_POLYFILLS=!1,r.FORCE_POLYFILL_PROMISE=!1,r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},r.global=r.getGlobal(this),r.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),r.TRUST_ES6_POLYFILLS=!r.ISOLATE_POLYFILLS||r.IS_SYMBOL_NATIVE,r.polyfills={},r.propertyToPolyfillSymbol={},r.POLYFILL_PREFIX="$jscp$",r.polyfill=function(e,t,n,i){t&&(r.ISOLATE_POLYFILLS?r.polyfillIsolated(e,t,n,i):r.polyfillUnisolated(e,t,n,i))},r.polyfillUnisolated=function(e,t){var n=r.global;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in n))return;n=n[a]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},r.polyfillIsolated=function(e,t,n){var i=e.split(".");e=1===i.length;var a=i[0];a=!e&&a in r.polyfills?r.polyfills:r.global;for(var o=0;o<i.length-1;o++){var l=i[o];if(!(l in a))return;a=a[l]}i=i[i.length-1],null!=(t=t(n=r.IS_SYMBOL_NATIVE&&"es6"===n?a[i]:null))&&(e?r.defineProperty(r.polyfills,i,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===r.propertyToPolyfillSymbol[i]&&(e=1e9*Math.random()>>>0,r.propertyToPolyfillSymbol[i]=r.IS_SYMBOL_NATIVE?r.global.Symbol(i):r.POLYFILL_PREFIX+e+"$"+i),r.defineProperty(a,r.propertyToPolyfillSymbol[i],{configurable:!0,writable:!0,value:t})))},r.initSymbol=function(){},r.polyfill("Symbol",(function(e){function t(e,t){this.$jscomp$symbol$id_=e,r.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.$jscomp$symbol$id_};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}}),"es6","es3"),r.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=r.global[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&r.defineProperty(i.prototype,e,{configurable:!0,writable:!0,value:function(){return r.iteratorPrototype(r.arrayIteratorImpl(this))}})}return e}),"es6","es3"),r.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},r.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i},r.polyfill("Array.prototype.keys",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),r.polyfill("Array.prototype.values",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),r.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var i=n.length,a=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<a&&t<i;)if(n[t++]!=e[o++])return!1;return o>=a}}),"es6","es3"),r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.assign=r.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var a in i)r.owns(i,a)&&(e[a]=i[a])}return e},r.polyfill("Object.assign",(function(e){return e||r.assign}),"es6","es3"),r.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new r.global.Proxy(e,{get:function(n,r,i){return n==e&&"q"==r&&i==t}}));return!0===t.q}catch(e){return!1}},r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,r.ES6_CONFORMANCE=r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&r.checkEs6ConformanceViaProxy(),r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.polyfill("WeakMap",(function(e){function t(e){if(this.id_=(s+=Math.random()+1).toString(),e){e=r.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function a(e){if(!r.owns(e,l)){var t=new n;r.defineProperty(e,l,{value:t})}}function o(e){if(!r.ISOLATE_POLYFILLS){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&a(e),t(e))})}}if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var l="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var s=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(a(e),!r.owns(e,l))throw Error("WeakMap key fail: "+e);return e[l][this.id_]=t,this},t.prototype.get=function(e){return i(e)&&r.owns(e,l)?e[l][this.id_]:void 0},t.prototype.has=function(e){return i(e)&&r.owns(e,l)&&r.owns(e[l],this.id_)},t.prototype.delete=function(e){return!!(i(e)&&r.owns(e,l)&&r.owns(e[l],this.id_))&&delete e[l][this.id_]},t}),"es6","es3"),r.MapEntry=function(){},r.polyfill("Map",(function(e){function t(){var e={};return e.previous=e.next=e.head=e}function n(e,t){var n=e.head_;return r.iteratorPrototype((function(){if(n){for(;n.head!=e.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++l,o.set(t,n)):n="p_"+t;var i=e.data_[n];if(i&&r.owns(e.data_,n))for(e=0;e<i.length;e++){var a=i[e];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:e,entry:a}}return{id:n,list:i,index:-1,entry:void 0}}function a(e){if(this.data_={},this.head_=t(),this.size=0,e){e=r.makeIterator(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(r.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&r.ES6_CONFORMANCE)return e}else if(function(){if(r.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(r.makeIterator([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),a=i.next();return!a.done&&a.value[0]==t&&"s"==a.value[1]&&!((a=i.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!i.next().done)}catch(e){return!1}}())return e;var o=new WeakMap;a.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.data_[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},n.list.push(n.entry),this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++),this},a.prototype.delete=function(e){return!(!(e=i(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,0))},a.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=t(),this.size=0},a.prototype.has=function(e){return!!i(this,e).entry},a.prototype.get=function(e){return(e=i(this,e).entry)&&e.value},a.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},a.prototype.keys=function(){return n(this,(function(e){return e.key}))},a.prototype.values=function(){return n(this,(function(e){return e.value}))},a.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var l=0;return a}),"es6","es3"),r.polyfill("String.prototype.endsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"endsWith");e+="",void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var i=e.length;0<i&&0<t;)if(n[--t]!=e[--i])return!1;return 0>=i}}),"es6","es3"),r.polyfill("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),"es6","es3"),r.polyfill("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)r.owns(e,t)&&n.push([t,e[t]]);return n}}),"es8","es3"),e.exports=function(){function e(e){if(this.opts={},this.defaults={},this.messages=Object.assign({},R),this.rules={any:w,array:O,boolean:x,class:E,custom:_,currency:b,date:g,email:m,enum:y,equal:v,forbidden:h,function:f,multi:p,number:d,object:c,objectID:u,record:s,string:l,tuple:o,url:a,uuid:i,mac:r,luhn:n},this.aliases={},this.cache=new Map,e){if(S(this.opts,e),e.defaults&&S(this.defaults,e.defaults),e.messages)for(var k in e.messages)this.addMessage(k,e.messages[k]);if(e.aliases)for(var A in e.aliases)this.alias(A,e.aliases[A]);if(e.customRules)for(var T in e.customRules)this.add(T,e.customRules[T]);if(e.plugins){if(e=e.plugins,!Array.isArray(e))throw Error("Plugins type must be array");e.forEach(this.plugin.bind(this))}this.opts.debug&&(e=function(e){return e},"undefined"==typeof window&&(e=t),this._formatter=e)}}function t(e){return P||(P=T(),j={parser:"babel",useTabs:!1,printWidth:120,trailingComma:"none",tabWidth:4,singleQuote:!1,semi:!0,bracketSpacing:!0},L=T(),I={language:"js",theme:L.fromJson({keyword:["white","bold"],built_in:"magenta",literal:"cyan",number:"magenta",regexp:"red",string:["yellow","bold"],symbol:"plain",class:"blue",attr:"plain",function:["white","bold"],title:"plain",params:"green",comment:"grey"})}),e=P.format(e,j),L.highlight(e,I)}function n(e){return e.schema,e=e.messages,{source:'\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+'\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (typeof value !== "string")\n\t\t\t\tvalue = String(value);\n\n\t\t\tval = value.replace(/\\D+/g, "");\n\n\t\t\tvar array = [0, 2, 4, 6, 8, 1, 3, 5, 7, 9];\n\t\t\tvar len = val ? val.length : 0,\n\t\t\t\tbit = 1,\n\t\t\t\tsum = 0;\n\t\t\twhile (len--) {\n\t\t\t\tsum += !(bit ^= 1) ? parseInt(val[len], 10) : array[val[len]];\n\t\t\t}\n\n\t\t\tif (!(sum % 10 === 0 && sum > 0)) {\n\t\t\t\t'+this.makeError({type:"luhn",actual:"value",messages:e})+"\n\t\t\t}\n\n\t\t\treturn value;\n\t\t"}}function r(e){return e.schema,e=e.messages,{source:'\n\t\t\tif (typeof value !== "string") {\n\t\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar v = value.toLowerCase();\n\t\t\tif (!"+$.toString()+".test(v)) {\n\t\t\t\t"+this.makeError({type:"mac",actual:"value",messages:e})+"\n\t\t\t}\n\t\t\t\n\t\t\treturn value;\n\t\t"}}function i(e){var t=e.schema;e=e.messages;var n=[];return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar val = value.toLowerCase();\n\t\tif (!"+z.toString()+".test(val)) {\n\t\t\t"+this.makeError({type:"uuid",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tconst version = val.charAt(14) | 0;\n\t"),7>parseInt(t.version)&&n.push("\n\t\t\tif ("+t.version+" !== version) {\n\t\t\t\t"+this.makeError({type:"uuidVersion",expected:t.version,actual:"version",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),n.push('\n\t\tswitch (version) {\n\t\tcase 0:\n\t\tcase 1:\n\t\tcase 2:\n\t\tcase 6:\n\t\t\tbreak;\n\t\tcase 3:\n\t\tcase 4:\n\t\tcase 5:\n\t\t\tif (["8", "9", "a", "b"].indexOf(val.charAt(19)) === -1) {\n\t\t\t\t'+this.makeError({type:"uuid",actual:"value",messages:e})+"\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function a(e){var t=e.schema;e=e.messages;var n=[];return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),t.empty?n.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):n.push("\n\t\t\tif (value.length === 0) {\n\t\t\t\t"+this.makeError({type:"urlEmpty",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),n.push("\n\t\tif (!"+Y.toString()+".test(value)) {\n\t\t\t"+this.makeError({type:"url",actual:"value",messages:e})+"\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function o(e,t,n){var r=e.schema,i=e.messages;if(e=[],null!=r.items){if(!Array.isArray(r.items))throw Error("Invalid '"+r.type+"' schema. The 'items' field must be an array.");if(0===r.items.length)throw Error("Invalid '"+r.type+"' schema. The 'items' field must not be an empty array.")}if(e.push("\n\t\tif (!Array.isArray(value)) {\n\t\t\t"+this.makeError({type:"tuple",actual:"value",messages:i})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t"),!1===r.empty&&e.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"tupleEmpty",actual:"value",messages:i})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),null!=r.items){for(e.push("\n\t\t\tif ("+r.empty+" !== false && len === 0) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (len !== "+r.items.length+") {\n\t\t\t\t"+this.makeError({type:"tupleLength",expected:r.items.length,actual:"len",messages:i})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),e.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t"),i=0;i<r.items.length;i++){e.push("\n\t\t\tvalue = arr["+i+"];\n\t\t");var a=t+"["+i+"]",o=this.getRuleFromSchema(r.items[i]);e.push(this.compileRule(o,n,a,"\n\t\t\tarr["+i+"] = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](arr["+i+'], (parentField ? parentField : "") + "[" + '+i+' + "]", parent, errors, context);\n\t\t',"arr["+i+"]"))}e.push("\n\t\treturn arr;\n\t")}else e.push("\n\t\treturn value;\n\t");return{source:e.join("\n")}}function l(e){var t=e.schema;e=e.messages;var n=[],r=!1;if(!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "string") {\n\t\t\t\tvalue = String(value);\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar origValue = value;\n\t"),t.trim&&(r=!0,n.push("\n\t\t\tvalue = value.trim();\n\t\t")),t.trimLeft&&(r=!0,n.push("\n\t\t\tvalue = value.trimLeft();\n\t\t")),t.trimRight&&(r=!0,n.push("\n\t\t\tvalue = value.trimRight();\n\t\t")),t.padStart&&(r=!0,n.push("\n\t\t\tvalue = value.padStart("+t.padStart+", "+JSON.stringify(null!=t.padChar?t.padChar:" ")+");\n\t\t")),t.padEnd&&(r=!0,n.push("\n\t\t\tvalue = value.padEnd("+t.padEnd+", "+JSON.stringify(null!=t.padChar?t.padChar:" ")+");\n\t\t")),t.lowercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLowerCase();\n\t\t")),t.uppercase&&(r=!0,n.push("\n\t\t\tvalue = value.toUpperCase();\n\t\t")),t.localeLowercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLocaleLowerCase();\n\t\t")),t.localeUppercase&&(r=!0,n.push("\n\t\t\tvalue = value.toLocaleUpperCase();\n\t\t")),n.push("\n\t\t\tvar len = value.length;\n\t"),!1===t.empty?n.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"stringEmpty",actual:"value",messages:e})+"\n\t\t\t}\n\t\t"):!0===t.empty&&n.push("\n\t\t\tif (len === 0) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),null!=t.min&&n.push("\n\t\t\tif (len < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"stringMin",expected:t.min,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (len > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"stringMax",expected:t.max,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.length&&n.push("\n\t\t\tif (len !== "+t.length+") {\n\t\t\t\t"+this.makeError({type:"stringLength",expected:t.length,actual:"len",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.pattern){var i=t.pattern;"string"==typeof t.pattern&&(i=new RegExp(t.pattern,t.patternFlags)),n.push("\n\t\t\tif (!"+i.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringPattern",expected:'"'+i.toString().replace(/"/g,"\\$&")+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t")}return null!=t.contains&&n.push('\n\t\t\tif (value.indexOf("'+t.contains+'") === -1) {\n\t\t\t\t'+this.makeError({type:"stringContains",expected:'"'+t.contains+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.enum&&(i=JSON.stringify(t.enum),n.push("\n\t\t\tif ("+i+".indexOf(value) === -1) {\n\t\t\t\t"+this.makeError({type:"stringEnum",expected:'"'+t.enum.join(", ")+'"',actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t")),!0===t.numeric&&n.push("\n\t\t\tif (!"+F.toString()+".test(value) ) {\n\t\t\t\t"+this.makeError({type:"stringNumeric",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alpha&&n.push("\n\t\t\tif(!"+V.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlpha",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alphanum&&n.push("\n\t\t\tif(!"+B.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlphanum",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.alphadash&&n.push("\n\t\t\tif(!"+J.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringAlphadash",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.hex&&n.push("\n\t\t\tif(value.length % 2 !== 0 || !"+U.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringHex",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.singleLine&&n.push('\n\t\t\tif(value.includes("\\n")) {\n\t\t\t\t'+this.makeError({type:"stringSingleLine",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.base64&&n.push("\n\t\t\tif(!"+q.toString()+".test(value)) {\n\t\t\t\t"+this.makeError({type:"stringBase64",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function s(e,t,n){var r=e.schema,i=[];for(var a in i.push('\n\t\tif (typeof value !== "object" || value === null || Array.isArray(value)) {\n\t\t\t'+this.makeError({type:"record",actual:"value",messages:e.messages})+"\n\t\t\treturn value;\n\t\t}\n\t"),e=r.key||"string",r=r.value||"any",i.push("\n\t\tconst record = value;\n\t\tlet sanitizedKey, sanitizedValue;\n\t\tconst result = {};\n\t\tfor (let key in value) {\n\t"),i.push("sanitizedKey = value = key;"),(e=this.getRuleFromSchema(e)).messages)a.startsWith("string")&&(e.messages[a]=e.messages[a].replace(" field "," key "));return i.push(this.compileRule(e,n,null,"\n\t\tsanitizedKey = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](key, field ? field + "." + key : key, record, errors, context);\n\t',"sanitizedKey")),i.push("sanitizedValue = value = record[key];"),a=this.getRuleFromSchema(r),i.push(this.compileRule(a,n,t+"[key]","\n\t\tsanitizedValue = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](value, field ? field + "." + key : key, record, errors, context);\n\t',"sanitizedValue")),i.push("result[sanitizedKey] = sanitizedValue;"),i.push("\n\t\t}\n\t"),i.push("return result;"),{source:i.join("\n")}}function u(e,t,n){t=e.schema;var r=e.messages;e=e.index;var i=[];return n.customs[e]?n.customs[e].schema=t:n.customs[e]={schema:t},i.push("\n\t\tconst ObjectID = context.customs["+e+"].schema.ObjectID;\n\t\tif (!ObjectID.isValid(value)) {\n\t\t\t"+this.makeError({type:"objectID",actual:"value",messages:r})+"\n\t\t\treturn;\n\t\t}\n\t"),!0===t.convert?i.push("return new ObjectID(value)"):"hexString"===t.convert?i.push("return value.toString()"):i.push("return value"),{source:i.join("\n")}}function c(e,t,n){var r=e.schema;e=e.messages;var i=[];i.push('\n\t\tif (typeof value !== "object" || value === null || Array.isArray(value)) {\n\t\t\t'+this.makeError({type:"object",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t");var a=r.properties||r.props;if(a){i.push("var parentObj = value;"),i.push("var parentField = field;");for(var o=Object.keys(a),l=0;l<o.length;l++){var s=o[l],u=A(s),c=D.test(u)?"."+u:"['"+u+"']",d="parentObj"+c,p=(t?t+".":"")+s,f=a[s].label;f=f?"'"+A(f)+"'":void 0,i.push("\n// Field: "+A(p)),i.push('field = parentField ? parentField + "'+c+'" : "'+u+'";'),i.push("value = "+d+";"),i.push("label = "+f),s=this.getRuleFromSchema(a[s]),i.push(this.compileRule(s,n,p,"\n\t\t\t\t"+d+" = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](value, field, parentObj, errors, context, label);\n\t\t\t",d)),!0===this.opts.haltOnFirstError&&i.push("if (errors.length) return parentObj;")}r.strict&&(t=Object.keys(a),i.push("\n\t\t\t\tfield = parentField;\n\t\t\t\tvar invalidProps = [];\n\t\t\t\tvar props = Object.keys(parentObj);\n\n\t\t\t\tfor (let i = 0; i < props.length; i++) {\n\t\t\t\t\tif ("+JSON.stringify(t)+".indexOf(props[i]) === -1) {\n\t\t\t\t\t\tinvalidProps.push(props[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (invalidProps.length) {\n\t\t\t"),"remove"===r.strict?(i.push("\n\t\t\t\t\tif (errors.length === 0) {\n\t\t\t\t"),i.push("\n\t\t\t\t\t\tinvalidProps.forEach(function(field) {\n\t\t\t\t\t\t\tdelete parentObj[field];\n\t\t\t\t\t\t});\n\t\t\t\t"),i.push("\n\t\t\t\t\t}\n\t\t\t\t")):i.push("\n\t\t\t\t\t"+this.makeError({type:"objectStrict",expected:'"'+t.join(", ")+'"',actual:"invalidProps.join(', ')",messages:e})+"\n\t\t\t\t"),i.push("\n\t\t\t\t}\n\t\t\t"))}return null==r.minProps&&null==r.maxProps||(r.strict?i.push("\n\t\t\t\tprops = Object.keys("+(a?"parentObj":"value")+");\n\t\t\t"):i.push("\n\t\t\t\tvar props = Object.keys("+(a?"parentObj":"value")+");\n\t\t\t\t"+(a?"field = parentField;":"")+"\n\t\t\t")),null!=r.minProps&&i.push("\n\t\t\tif (props.length < "+r.minProps+") {\n\t\t\t\t"+this.makeError({type:"objectMinProps",expected:r.minProps,actual:"props.length",messages:e})+"\n\t\t\t}\n\t\t"),null!=r.maxProps&&i.push("\n\t\t\tif (props.length > "+r.maxProps+") {\n\t\t\t\t"+this.makeError({type:"objectMaxProps",expected:r.maxProps,actual:"props.length",messages:e})+"\n\t\t\t}\n\t\t"),a?i.push("\n\t\t\treturn parentObj;\n\t\t"):i.push("\n\t\t\treturn value;\n\t\t"),{source:i.join("\n")}}function d(e){var t=e.schema;e=e.messages;var n=[];n.push("\n\t\tvar origValue = value;\n\t");var r=!1;return!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "number") {\n\t\t\t\tvalue = Number(value);\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "number" || isNaN(value) || !isFinite(value)) {\n\t\t\t'+this.makeError({type:"number",actual:"origValue",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),null!=t.min&&n.push("\n\t\t\tif (value < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"numberMin",expected:t.min,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (value > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"numberMax",expected:t.max,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.equal&&n.push("\n\t\t\tif (value !== "+t.equal+") {\n\t\t\t\t"+this.makeError({type:"numberEqual",expected:t.equal,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.notEqual&&n.push("\n\t\t\tif (value === "+t.notEqual+") {\n\t\t\t\t"+this.makeError({type:"numberNotEqual",expected:t.notEqual,actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.integer&&n.push("\n\t\t\tif (value % 1 !== 0) {\n\t\t\t\t"+this.makeError({type:"numberInteger",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.positive&&n.push("\n\t\t\tif (value <= 0) {\n\t\t\t\t"+this.makeError({type:"numberPositive",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),!0===t.negative&&n.push("\n\t\t\tif (value >= 0) {\n\t\t\t\t"+this.makeError({type:"numberNegative",actual:"origValue",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function p(e,t,n){var r=e.schema;e.messages,(e=[]).push("\n\t\tvar hasValid = false;\n\t\tvar newVal = value;\n\t\tvar checkErrors = [];\n\t\tvar errorsSize = errors.length;\n\t");for(var i=0;i<r.rules.length;i++){e.push("\n\t\t\tif (!hasValid) {\n\t\t\t\tvar _errors = [];\n\t\t");var a=this.getRuleFromSchema(r.rules[i]);e.push(this.compileRule(a,n,t,"var tmpVal = "+(n.async?"await ":"")+"context.fn[%%INDEX%%](value, field, parent, _errors, context);","tmpVal")),e.push("\n\t\t\t\tif (errors.length == errorsSize && _errors.length == 0) {\n\t\t\t\t\thasValid = true;\n\t\t\t\t\tnewVal = tmpVal;\n\t\t\t\t} else {\n\t\t\t\t\tArray.prototype.push.apply(checkErrors, [].concat(_errors, errors.splice(errorsSize)));\n\t\t\t\t}\n\t\t\t}\n\t\t")}return e.push("\n\t\tif (!hasValid) {\n\t\t\tArray.prototype.push.apply(errors, checkErrors);\n\t\t}\n\n\t\treturn newVal;\n\t"),{source:e.join("\n")}}function f(e){return e.schema,{source:'\n\t\t\tif (typeof value !== "function")\n\t\t\t\t'+this.makeError({type:"function",actual:"value",messages:e.messages})+"\n\n\t\t\treturn value;\n\t\t"}}function h(e){var t=e.schema;e=e.messages;var n=[];return n.push("\n\t\tif (value !== null && value !== undefined) {\n\t"),t.remove?n.push("\n\t\t\treturn undefined;\n\t\t"):n.push("\n\t\t\t"+this.makeError({type:"forbidden",actual:"value",messages:e})+"\n\t\t"),n.push("\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function v(e){var t=e.schema;e=e.messages;var n=[];return t.field?(t.strict?n.push('\n\t\t\t\tif (value !== parent["'+t.field+'"])\n\t\t\t'):n.push('\n\t\t\t\tif (value != parent["'+t.field+'"])\n\t\t\t'),n.push("\n\t\t\t\t"+this.makeError({type:"equalField",actual:"value",expected:JSON.stringify(t.field),messages:e})+"\n\t\t")):(t.strict?n.push("\n\t\t\t\tif (value !== "+JSON.stringify(t.value)+")\n\t\t\t"):n.push("\n\t\t\t\tif (value != "+JSON.stringify(t.value)+")\n\t\t\t"),n.push("\n\t\t\t\t"+this.makeError({type:"equalValue",actual:"value",expected:JSON.stringify(t.value),messages:e})+"\n\t\t")),n.push("\n\t\treturn value;\n\t"),{source:n.join("\n")}}function y(e){var t=e.schema;return e=e.messages,{source:"\n\t\t\tif ("+JSON.stringify(t.values||[])+".indexOf(value) === -1)\n\t\t\t\t"+this.makeError({type:"enumValue",expected:'"'+t.values.join(", ")+'"',actual:"value",messages:e})+"\n\t\t\t\n\t\t\treturn value;\n\t\t"}}function m(e){var t=e.schema;e=e.messages;var n=[],r="precise"==t.mode?C:M,i=!1;return n.push('\n\t\tif (typeof value !== "string") {\n\t\t\t'+this.makeError({type:"string",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\t"),t.empty?n.push("\n\t\t\tif (value.length === 0) return value;\n\t\t"):n.push("\n\t\t\tif (value.length === 0) {\n\t\t\t\t"+this.makeError({type:"emailEmpty",actual:"value",messages:e})+"\n\t\t\t\treturn value;\n\t\t\t}\n\t\t"),t.normalize&&(i=!0,n.push("\n\t\t\tvalue = value.trim().toLowerCase();\n\t\t")),null!=t.min&&n.push("\n\t\t\tif (value.length < "+t.min+") {\n\t\t\t\t"+this.makeError({type:"emailMin",expected:t.min,actual:"value.length",messages:e})+"\n\t\t\t}\n\t\t"),null!=t.max&&n.push("\n\t\t\tif (value.length > "+t.max+") {\n\t\t\t\t"+this.makeError({type:"emailMax",expected:t.max,actual:"value.length",messages:e})+"\n\t\t\t}\n\t\t"),n.push("\n\t\tif (!"+r.toString()+".test(value)) {\n\t\t\t"+this.makeError({type:"email",actual:"value",messages:e})+"\n\t\t}\n\n\t\treturn value;\n\t"),{sanitized:i,source:n.join("\n")}}function g(e){var t=e.schema;e=e.messages;var n=[],r=!1;return n.push("\n\t\tvar origValue = value;\n\t"),!0===t.convert&&(r=!0,n.push("\n\t\t\tif (!(value instanceof Date)) {\n\t\t\t\tvalue = new Date(value.length && !isNaN(+value) ? +value : value);\n\t\t\t}\n\t\t")),n.push("\n\t\tif (!(value instanceof Date) || isNaN(value.getTime()))\n\t\t\t"+this.makeError({type:"date",actual:"origValue",messages:e})+"\n\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function b(e){var t=e.schema;e=e.messages;var n=t.currencySymbol||null,r=t.thousandSeparator||",",i=t.decimalSeparator||".",a=t.customRegex;return t=!t.symbolOptional,t="(?=.*\\d)^(-?~1|~1-?)(([0-9]\\d{0,2}(~2\\d{3})*)|0)?(\\~3\\d{1,2})?$".replace(/~1/g,n?"\\"+n+(t?"":"?"):"").replace("~2",r).replace("~3",i),(n=[]).push("\n\t\tif (!value.match("+(a||new RegExp(t))+")) {\n\t\t\t"+this.makeError({type:"currency",actual:"value",messages:e})+"\n\t\t\treturn value;\n\t\t}\n\n\t\treturn value;\n\t"),{source:n.join("\n")}}function _(e,t,n){var r=[];return r.push("\n\t\t"+this.makeCustomValidator({fnName:"check",path:t,schema:e.schema,messages:e.messages,context:n,ruleIndex:e.index})+"\n\t\treturn value;\n\t"),{source:r.join("\n")}}function E(e,t,n){t=e.schema;var r=e.messages;e=e.index;var i=[],a=t.instanceOf.name?t.instanceOf.name:"<UnknowClass>";return n.customs[e]?n.customs[e].schema=t:n.customs[e]={schema:t},i.push("\n\t\tif (!(value instanceof context.customs["+e+"].schema.instanceOf))\n\t\t\t"+this.makeError({type:"classInstanceOf",actual:"value",expected:"'"+a+"'",messages:r})+"\n\t"),i.push("\n\t\treturn value;\n\t"),{source:i.join("\n")}}function x(e){var t=e.schema;e=e.messages;var n=[],r=!1;return n.push("\n\t\tvar origValue = value;\n\t"),!0===t.convert&&(r=!0,n.push('\n\t\t\tif (typeof value !== "boolean") {\n\t\t\t\tif (\n\t\t\t\tvalue === 1\n\t\t\t\t|| value === "true"\n\t\t\t\t|| value === "1"\n\t\t\t\t|| value === "on"\n\t\t\t\t) {\n\t\t\t\t\tvalue = true;\n\t\t\t\t} else if (\n\t\t\t\tvalue === 0\n\t\t\t\t|| value === "false"\n\t\t\t\t|| value === "0"\n\t\t\t\t|| value === "off"\n\t\t\t\t) {\n\t\t\t\t\tvalue = false;\n\t\t\t\t}\n\t\t\t}\n\t\t')),n.push('\n\t\tif (typeof value !== "boolean") {\n\t\t\t'+this.makeError({type:"boolean",actual:"origValue",messages:e})+"\n\t\t}\n\t\t\n\t\treturn value;\n\t"),{sanitized:r,source:n.join("\n")}}function O(e,t,n){var r=e.schema,i=e.messages;if((e=[]).push("\n\t\tif (!Array.isArray(value)) {\n\t\t\t"+this.makeError({type:"array",actual:"value",messages:i})+"\n\t\t\treturn value;\n\t\t}\n\n\t\tvar len = value.length;\n\t"),!1===r.empty&&e.push("\n\t\t\tif (len === 0) {\n\t\t\t\t"+this.makeError({type:"arrayEmpty",actual:"value",messages:i})+"\n\t\t\t}\n\t\t"),null!=r.min&&e.push("\n\t\t\tif (len < "+r.min+") {\n\t\t\t\t"+this.makeError({type:"arrayMin",expected:r.min,actual:"len",messages:i})+"\n\t\t\t}\n\t\t"),null!=r.max&&e.push("\n\t\t\tif (len > "+r.max+") {\n\t\t\t\t"+this.makeError({type:"arrayMax",expected:r.max,actual:"len",messages:i})+"\n\t\t\t}\n\t\t"),null!=r.length&&e.push("\n\t\t\tif (len !== "+r.length+") {\n\t\t\t\t"+this.makeError({type:"arrayLength",expected:r.length,actual:"len",messages:i})+"\n\t\t\t}\n\t\t"),null!=r.contains&&e.push("\n\t\t\tif (value.indexOf("+JSON.stringify(r.contains)+") === -1) {\n\t\t\t\t"+this.makeError({type:"arrayContains",expected:JSON.stringify(r.contains),actual:"value",messages:i})+"\n\t\t\t}\n\t\t"),!0===r.unique&&e.push("\n\t\t\tif(len > (new Set(value)).size) {\n\t\t\t\t"+this.makeError({type:"arrayUnique",expected:"Array.from(new Set(value.filter((item, index) => value.indexOf(item) !== index)))",actual:"value",messages:i})+"\n\t\t\t}\n\t\t"),null!=r.enum){var a=JSON.stringify(r.enum);e.push("\n\t\t\tfor (var i = 0; i < value.length; i++) {\n\t\t\t\tif ("+a+".indexOf(value[i]) === -1) {\n\t\t\t\t\t"+this.makeError({type:"arrayEnum",expected:'"'+r.enum.join(", ")+'"',actual:"value[i]",messages:i})+"\n\t\t\t\t}\n\t\t\t}\n\t\t")}return null!=r.items?(e.push("\n\t\t\tvar arr = value;\n\t\t\tvar parentField = field;\n\t\t\tfor (var i = 0; i < arr.length; i++) {\n\t\t\t\tvalue = arr[i];\n\t\t"),t+="[]",r=this.getRuleFromSchema(r.items),e.push(this.compileRule(r,n,t,"arr[i] = "+(n.async?"await ":"")+'context.fn[%%INDEX%%](arr[i], (parentField ? parentField : "") + "[" + i + "]", parent, errors, context)',"arr[i]")),e.push("\n\t\t\t}\n\t\t"),e.push("\n\t\treturn arr;\n\t")):e.push("\n\t\treturn value;\n\t"),{source:e.join("\n")}}function w(){var e=[];return e.push("\n\t\treturn value;\n\t"),{source:e.join("\n")}}function k(e,t,n){return e.replace(t,null==n?"":"function"==typeof n.toString?n:typeof n)}function S(e,t,n){for(var r in void 0===n&&(n={}),t){var i=t[r];(i="object"==typeof i&&!Array.isArray(i)&&null!=i&&0<Object.keys(i).length)?(e[r]=e[r]||{},S(e[r],t[r],n)):!0===n.skipIfExist&&void 0!==e[r]||(e[r]=t[r])}return e}function A(e){return e.replace(N,(function(e){switch(e){case'"':case"'":case"\\":return"\\"+e;case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029"}}))}function T(){throw Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var R={required:"The '{field}' field is required.",string:"The '{field}' field must be a string.",stringEmpty:"The '{field}' field must not be empty.",stringMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",stringMax:"The '{field}' field length must be less than or equal to {expected} characters long.",stringLength:"The '{field}' field length must be {expected} characters long.",stringPattern:"The '{field}' field fails to match the required pattern.",stringContains:"The '{field}' field must contain the '{expected}' text.",stringEnum:"The '{field}' field does not match any of the allowed values.",stringNumeric:"The '{field}' field must be a numeric string.",stringAlpha:"The '{field}' field must be an alphabetic string.",stringAlphanum:"The '{field}' field must be an alphanumeric string.",stringAlphadash:"The '{field}' field must be an alphadash string.",stringHex:"The '{field}' field must be a hex string.",stringSingleLine:"The '{field}' field must be a single line string.",stringBase64:"The '{field}' field must be a base64 string.",number:"The '{field}' field must be a number.",numberMin:"The '{field}' field must be greater than or equal to {expected}.",numberMax:"The '{field}' field must be less than or equal to {expected}.",numberEqual:"The '{field}' field must be equal to {expected}.",numberNotEqual:"The '{field}' field can't be equal to {expected}.",numberInteger:"The '{field}' field must be an integer.",numberPositive:"The '{field}' field must be a positive number.",numberNegative:"The '{field}' field must be a negative number.",array:"The '{field}' field must be an array.",arrayEmpty:"The '{field}' field must not be an empty array.",arrayMin:"The '{field}' field must contain at least {expected} items.",arrayMax:"The '{field}' field must contain less than or equal to {expected} items.",arrayLength:"The '{field}' field must contain {expected} items.",arrayContains:"The '{field}' field must contain the '{expected}' item.",arrayUnique:"The '{actual}' value in '{field}' field does not unique the '{expected}' values.",arrayEnum:"The '{actual}' value in '{field}' field does not match any of the '{expected}' values.",tuple:"The '{field}' field must be an array.",tupleEmpty:"The '{field}' field must not be an empty array.",tupleLength:"The '{field}' field must contain {expected} items.",boolean:"The '{field}' field must be a boolean.",currency:"The '{field}' must be a valid currency format",date:"The '{field}' field must be a Date.",dateMin:"The '{field}' field must be greater than or equal to {expected}.",dateMax:"The '{field}' field must be less than or equal to {expected}.",enumValue:"The '{field}' field value '{expected}' does not match any of the allowed values.",equalValue:"The '{field}' field value must be equal to '{expected}'.",equalField:"The '{field}' field value must be equal to '{expected}' field value.",forbidden:"The '{field}' field is forbidden.",function:"The '{field}' field must be a function.",email:"The '{field}' field must be a valid e-mail.",emailEmpty:"The '{field}' field must not be empty.",emailMin:"The '{field}' field length must be greater than or equal to {expected} characters long.",emailMax:"The '{field}' field length must be less than or equal to {expected} characters long.",luhn:"The '{field}' field must be a valid checksum luhn.",mac:"The '{field}' field must be a valid MAC address.",object:"The '{field}' must be an Object.",objectStrict:"The object '{field}' contains forbidden keys: '{actual}'.",objectMinProps:"The object '{field}' must contain at least {expected} properties.",objectMaxProps:"The object '{field}' must contain {expected} properties at most.",url:"The '{field}' field must be a valid URL.",urlEmpty:"The '{field}' field must not be empty.",uuid:"The '{field}' field must be a valid UUID.",uuidVersion:"The '{field}' field must be a valid UUID version provided.",classInstanceOf:"The '{field}' field must be an instance of the '{expected}' class.",objectID:"The '{field}' field must be an valid ObjectID",record:"The '{field}' must be an Object."};R.required,R.string,R.stringEmpty,R.stringMin,R.stringMax,R.stringLength,R.stringPattern,R.stringContains,R.stringEnum,R.stringNumeric,R.stringAlpha,R.stringAlphanum,R.stringAlphadash,R.stringHex,R.stringSingleLine,R.stringBase64,R.number,R.numberMin,R.numberMax,R.numberEqual,R.numberNotEqual,R.numberInteger,R.numberPositive,R.numberNegative,R.array,R.arrayEmpty,R.arrayMin,R.arrayMax,R.arrayLength,R.arrayContains,R.arrayUnique,R.arrayEnum,R.tuple,R.tupleEmpty,R.tupleLength,R.currency,R.date,R.dateMin,R.dateMax,R.enumValue,R.equalValue,R.equalField,R.forbidden,R.email,R.emailEmpty,R.emailMin,R.emailMax,R.luhn,R.mac,R.object,R.objectStrict,R.objectMinProps,R.objectMaxProps,R.url,R.urlEmpty,R.uuid,R.uuidVersion,R.classInstanceOf,R.objectID,R.record;var P,j,L,I,C=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,M=/^\S+@\S+\.\S+$/,D=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/,N=/["'\\\n\r\u2028\u2029]/g,F=/^-?[0-9]\d*(\.\d+)?$/,V=/^[a-zA-Z]+$/,B=/^[a-zA-Z0-9]+$/,J=/^[a-zA-Z0-9_-]+$/,U=/^[0-9a-fA-F]+$/,q=/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?$/,Y=/^https?:\/\/\S+/,z=/^([0-9a-f]{8}-[0-9a-f]{4}-[1-6][0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}|[0]{8}-[0]{4}-[0]{4}-[0]{4}-[0]{12})$/i,$=/^((([a-f0-9][a-f0-9]+[-]){5}|([a-f0-9][a-f0-9]+[:]){5})([a-f0-9][a-f0-9])$)|(^([a-f0-9][a-f0-9][a-f0-9][a-f0-9]+[.]){2}([a-f0-9][a-f0-9][a-f0-9][a-f0-9]))$/i;try{var H=new Function("return Object.getPrototypeOf(async function(){}).constructor")()}catch(e){}return e.prototype.validate=function(e,t){return this.compile(t)(e)},e.prototype.wrapRequiredCheckSourceCode=function(e,t,n,r){var i=[],a=!0===e.schema.optional||"forbidden"===e.schema.type,o=!0===e.schema.optional||!0===e.schema.nullable||"forbidden"===e.schema.type;return null!=e.schema.default?(a=!1,!0!==e.schema.nullable&&(o=!1),"function"==typeof e.schema.default?(n.customs[e.index]||(n.customs[e.index]={}),n.customs[e.index].defaultFn=e.schema.default,e="context.customs["+e.index+"].defaultFn.call(this, context.rules["+e.index+"].schema, field, parent, context)"):e=JSON.stringify(e.schema.default),r="\n\t\t\t\tvalue = "+e+";\n\t\t\t\t"+r+" = value;\n\t\t\t"):r=this.makeError({type:"required",actual:"value",messages:e.messages}),i.push("\n\t\t\tif (value === undefined) { "+(a?"\n// allow undefined\n":r)+" }\n\t\t\telse if (value === null) { "+(o?"\n// allow null\n":r)+" }\n\t\t\t"+(t?"else { "+t+" }":"")+"\n\t\t"),i.join("\n")},e.prototype.compile=function(e){function t(e,t){return r.data=e,t&&t.meta&&(r.meta=t.meta),a.call(n,e,r)}if(null===e||"object"!=typeof e)throw Error("Invalid schema.");var n=this,r={index:0,async:!0===e.$$async,rules:[],fn:[],customs:{},utils:{replace:k}};if(this.cache.clear(),delete e.$$async,r.async&&!H)throw Error("Asynchronous mode is not supported.");if(!0!==e.$$root)if(Array.isArray(e))e=this.getRuleFromSchema(e).schema;else{var i=Object.assign({},e);e={type:"object",strict:i.$$strict,properties:i},delete i.$$strict}i=["var errors = [];","var field;","var parent = null;","var label = "+(e.label?'"'+e.label+'"':"null")+";"],e=this.getRuleFromSchema(e),i.push(this.compileRule(e,r,null,(r.async?"await ":"")+"context.fn[%%INDEX%%](value, field, null, errors, context, label);","value")),i.push("if (errors.length) {"),i.push("\n\t\t\treturn errors.map(err => {\n\t\t\t\tif (err.message) {\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{field\\}/g, err.label || err.field);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{expected\\}/g, err.expected);\n\t\t\t\t\terr.message = context.utils.replace(err.message, /\\{actual\\}/g, err.actual);\n\t\t\t\t}\n\t\t\t\tif(!err.label) delete err.label\n\t\t\t\treturn err;\n\t\t\t});\n\t\t"),i.push("}"),i.push("return true;"),e=i.join("\n");var a=new(r.async?H:Function)("value","context",e);return this.opts.debug&&console.log(this._formatter("// Main check function\n"+a.toString())),this.cache.clear(),t.async=r.async,t},e.prototype.compileRule=function(e,t,n,r,i){var a=[],o=this.cache.get(e.schema);return o?((e=o).cycle=!0,e.cycleStack=[],a.push(this.wrapRequiredCheckSourceCode(e,"\n\t\t\t\tvar rule = context.rules["+e.index+"];\n\t\t\t\tif (rule.cycleStack.indexOf(value) === -1) {\n\t\t\t\t\trule.cycleStack.push(value);\n\t\t\t\t\t"+r.replace(/%%INDEX%%/g,e.index)+"\n\t\t\t\t\trule.cycleStack.pop(value);\n\t\t\t\t}\n\t\t\t",t,i))):(this.cache.set(e.schema,e),e.index=t.index,t.rules[t.index]=e,o=null!=n?n:"$$root",t.index++,(n=e.ruleFunction.call(this,e,n,t)).source=n.source.replace(/%%INDEX%%/g,e.index),n=new(t.async?H:Function)("value","field","parent","errors","context","label",n.source),t.fn[e.index]=n.bind(this),a.push(this.wrapRequiredCheckSourceCode(e,r.replace(/%%INDEX%%/g,e.index),t,i)),a.push(this.makeCustomValidator({vName:i,path:o,schema:e.schema,context:t,messages:e.messages,ruleIndex:e.index})),this.opts.debug&&console.log(this._formatter("// Context.fn["+e.index+"]\n"+n.toString()))),a.join("\n")},e.prototype.getRuleFromSchema=function(e){e=this.resolveType(e);var t=this.aliases[e.type];if(t&&(delete e.type,e=S(e,t,{skipIfExist:!0})),!(t=this.rules[e.type]))throw Error("Invalid '"+e.type+"' type in validator schema.");return{messages:Object.assign({},this.messages,e.messages),schema:S(e,this.defaults[e.type],{skipIfExist:!0}),ruleFunction:t}},e.prototype.parseShortHand=function(e){var t=(e=e.split("|").map((function(e){return e.trim()})))[0],n=t.endsWith("[]")?this.getRuleFromSchema({type:"array",items:t.slice(0,-2)}).schema:{type:e[0]};return e.slice(1).map((function(e){var t=e.indexOf(":");if(-1!==t){var r=e.substr(0,t).trim();"true"===(e=e.substr(t+1).trim())||"false"===e?e="true"===e:Number.isNaN(Number(e))||(e=Number(e)),n[r]=e}else e.startsWith("no-")?n[e.slice(3)]=!1:n[e]=!0})),n},e.prototype.makeError=function(e){var t=e.type,n=e.field,r=e.expected,i=e.actual,a={type:'"'+t+'"',message:'"'+e.messages[t]+'"'};return a.field=n?'"'+n+'"':"field",null!=r&&(a.expected=r),null!=i&&(a.actual=i),a.label="label","errors.push({ "+Object.keys(a).map((function(e){return e+": "+a[e]})).join(", ")+" });"},e.prototype.makeCustomValidator=function(e){var t=e.vName;void 0===t&&(t="value");var n=e.fnName;void 0===n&&(n="custom");var r=e.ruleIndex,i=e.path,a=e.schema,o=e.context,l=e.messages;e="rule"+r;var s="fnCustomErrors"+r;return"function"==typeof a[n]?(o.customs[r]?(o.customs[r].messages=l,o.customs[r].schema=a):o.customs[r]={messages:l,schema:a},this.opts.useNewCustomCheckerFunction?"\n               \t\tconst "+e+" = context.customs["+r+"];\n\t\t\t\t\tconst "+s+" = [];\n\t\t\t\t\t"+t+" = "+(o.async?"await ":"")+e+".schema."+n+".call(this, "+t+", "+s+" , "+e+'.schema, "'+i+'", parent, context);\n\t\t\t\t\tif (Array.isArray('+s+" )) {\n                  \t\t"+s+" .forEach(err => errors.push(Object.assign({ message: "+e+".messages[err.type], field }, err)));\n\t\t\t\t\t}\n\t\t\t\t":"\n\t\t\t\tconst "+e+" = context.customs["+r+"];\n\t\t\t\tconst "+(a="res_"+e)+" = "+(o.async?"await ":"")+e+".schema."+n+".call(this, "+t+", "+e+'.schema, "'+i+'", parent, context);\n\t\t\t\tif (Array.isArray('+a+")) {\n\t\t\t\t\t"+a+".forEach(err => errors.push(Object.assign({ message: "+e+".messages[err.type], field }, err)));\n\t\t\t\t}\n\t\t"):""},e.prototype.add=function(e,t){this.rules[e]=t},e.prototype.addMessage=function(e,t){this.messages[e]=t},e.prototype.alias=function(e,t){if(this.rules[e])throw Error("Alias name must not be a rule name");this.aliases[e]=t},e.prototype.plugin=function(e){if("function"!=typeof e)throw Error("Plugin fn type must be function");return e(this)},e.prototype.resolveType=function(e){var t=this;if("string"==typeof e)e=this.parseShortHand(e);else if(Array.isArray(e)){if(0===e.length)throw Error("Invalid schema.");(e={type:"multi",rules:e}).rules.map((function(e){return t.getRuleFromSchema(e)})).every((function(e){return!0===e.schema.optional}))&&(e.optional=!0),e.rules.map((function(e){return t.getRuleFromSchema(e)})).every((function(e){return!0===e.schema.nullable}))&&(e.nullable=!0)}if(e.$$type){var n=this.getRuleFromSchema(e.$$type).schema;delete e.$$type;var r,i=Object.assign({},e);for(r in e)delete e[r];S(e,n,{skipIfExist:!0}),e.props=i}return e},e.prototype.normalize=function(e){var t=this,n=this.resolveType(e);return this.aliases[n.type]&&(n=S(n,this.normalize(this.aliases[n.type]),{skipIfExists:!0})),"multi"===(n=S(n,this.defaults[n.type],{skipIfExist:!0})).type?(n.rules=n.rules.map((function(e){return t.normalize(e)})),n.optional=n.rules.every((function(e){return!0===e.optional})),n):"array"===n.type?(n.items=this.normalize(n.items),n):("object"===n.type&&n.props&&Object.entries(n.props).forEach((function(e){return n.props[e[0]]=t.normalize(e[1])})),"object"==typeof e&&(e.type?(e=this.normalize(e.type),S(n,e,{skipIfExists:!0})):Object.entries(e).forEach((function(e){return n[e[0]]=t.normalize(e[1])}))),n)},e}()},8998:(e,t,n)=>{e.exports=function e(t,n,r){function i(o,l){if(!n[o]){if(!t[o]){if(a)return a(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var a=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){const r=e("./utils"),i=function(){"use strict";const e=r.stringToArray,t=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],i=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],a=["Thousand","Million","Billion","Trillion"];const o={};t.forEach((function(e,t){o[e.toLowerCase()]=t})),n.forEach((function(e,t){o[e.toLowerCase()]=t})),i.forEach((function(e,t){const n=e.toLowerCase();o[n]=10*(t+2),o[n.substring(0,e.length-1)+"ieth"]=o[n]})),o.hundredth=100,a.forEach((function(e,t){const n=e.toLowerCase(),r=Math.pow(10,3*(t+1));o[n]=r,o[n+"th"]=r}));const l=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],s={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function u(e){for(var t=0;t<l.length;t++){const n=l[t];if(e>=n[0])return n[1]+u(e-n[0])}return""}function c(e,t){if(void 0!==e)return b(e=Math.floor(e),E(t))}const d="decimal",p="letters",f="roman",h="words",v="sequence",y="upper",m="lower",g="title";function b(r,o){let l;const s=r<0;switch(r=Math.abs(r),o.primary){case p:l=function(e,t){for(var n=[],r=t.charCodeAt(0);e>0;)n.unshift(String.fromCharCode((e-1)%26+r)),e=Math.floor((e-1)/26);return n.join("")}(r,o.case===y?"A":"a");break;case f:l=u(r),o.case===y&&(l=l.toUpperCase());break;case h:l=function(e,r){var o=function(e,r,l){var s="";if(e<=19)s=(r?" and ":"")+(l?n[e]:t[e]);else if(e<100){const t=Math.floor(e/10),n=e%10;s=(r?" and ":"")+i[t-2],n>0?s+="-"+o(n,!1,l):l&&(s=s.substring(0,s.length-1)+"ieth")}else if(e<1e3){const n=Math.floor(e/100),i=e%100;s=(r?", ":"")+t[n]+" Hundred",i>0?s+=o(i,!0,l):l&&(s+="th")}else{var u=Math.floor(Math.log10(e)/3);u>a.length&&(u=a.length);const t=Math.pow(10,3*u),n=Math.floor(e/t),i=e-n*t;s=(r?", ":"")+o(n,!1,!1)+" "+a[u-1],i>0?s+=o(i,!0,l):l&&(s+="th")}return s};return o(e,!1,r)}(r,o.ordinal),o.case===y?l=l.toUpperCase():o.case===m&&(l=l.toLowerCase());break;case d:l=""+r;var c=o.mandatoryDigits-l.length;if(c>0){var g=new Array(c+1).join("0");l=g+l}if(48!==o.zeroCode&&(l=e(l).map((e=>String.fromCodePoint(e.codePointAt(0)+o.zeroCode-48))).join("")),o.regular)for(let e=Math.floor((l.length-1)/o.groupingSeparators.position);e>0;e--){const t=l.length-e*o.groupingSeparators.position;l=l.substr(0,t)+o.groupingSeparators.character+l.substr(t)}else o.groupingSeparators.reverse().forEach((e=>{const t=l.length-e.position;l=l.substr(0,t)+e.character+l.substr(t)}));if(o.ordinal){var b={1:"st",2:"nd",3:"rd"}[l[l.length-1]];(!b||l.length>1&&"1"===l[l.length-2])&&(b="th"),l+=b}break;case v:throw{code:"D3130",value:o.token}}return s&&(l="-"+l),l}const _=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function E(t){const n={type:"integer",primary:d,case:m,ordinal:!1};let r,i;const a=t.lastIndexOf(";");switch(-1===a?r=t:(r=t.substring(0,a),i=t.substring(a+1),"o"===i[0]&&(n.ordinal=!0)),r){case"A":n.case=y;case"a":n.primary=p;break;case"I":n.case=y;case"i":n.primary=f;break;case"W":n.case=y,n.primary=h;break;case"Ww":n.case=g,n.primary=h;break;case"w":n.primary=h;break;default:{let t=null,i=0,a=0,o=[],l=0;if(e(r).map((e=>e.codePointAt(0))).reverse().forEach((e=>{let n=!1;for(let r=0;r<_.length;r++){const a=_[r];if(e>=a&&e<=a+9){if(n=!0,i++,l++,null===t)t=a;else if(a!==t)throw{code:"D3131"};break}}n||(35===e?(l++,a++):o.push({position:l,character:String.fromCodePoint(e)}))})),i>0){n.primary=d,n.zeroCode=t,n.mandatoryDigits=i,n.optionalDigits=a;const e=function(e){if(0===e.length)return 0;const t=e[0].character;for(let n=1;n<e.length;n++)if(e[n].character!==t)return 0;const n=e.map((e=>e.position)),r=function(e,t){return 0===t?e:r(t,e%t)},i=n.reduce(r);for(let e=1;e<=n.length;e++)if(-1===n.indexOf(e*i))return 0;return i}(o);e>0?(n.regular=!0,n.groupingSeparators={position:e,character:o[0].character}):(n.regular=!1,n.groupingSeparators=o)}else n.primary=v,n.token=r}}return n}const x={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function O(e){var t=[];const n={type:"datetime",parts:t},r=function(n,r){if(r>n){let i=e.substring(n,r);i=i.split("]]").join("]"),t.push({type:"literal",value:i})}};for(var i=0,a=0;a<e.length;){if("["===e.charAt(a)){if("["===e.charAt(a+1)){r(i,a),t.push({type:"literal",value:"["}),i=a+=2;continue}if(r(i,a),i=a,-1===(a=e.indexOf("]",i)))throw{code:"D3135"};let n=e.substring(i+1,a);n=n.split(/\s+/).join("");var o,l={type:"marker",component:n.charAt(0)},s=n.lastIndexOf(",");if(-1!==s){const e=n.substring(s+1),t=e.indexOf("-");let r,i;const a=function(e){return void 0===e||"*"===e?void 0:parseInt(e)};-1===t?r=e:(r=e.substring(0,t),i=e.substring(t+1));const u={min:a(r),max:a(i)};l.width=u,o=n.substring(1,s)}else o=n.substring(1);if(1===o.length)l.presentation1=o;else if(o.length>1){var u=o.charAt(o.length-1);-1!=="atco".indexOf(u)?(l.presentation2=u,"o"===u&&(l.ordinal=!0),l.presentation1=o.substring(0,o.length-1)):l.presentation1=o}else l.presentation1=x[l.component];if(void 0===l.presentation1)throw{code:"D3132",value:l.component};if("n"===l.presentation1[0])l.names=m;else if("N"===l.presentation1[0])"n"===l.presentation1[1]?l.names=g:l.names=y;else if(-1!=="YMDdFWwXxHhmsf".indexOf(l.component)){var c=l.presentation1;if(l.presentation2&&(c+=";"+l.presentation2),l.integerFormat=E(c),l.width&&void 0!==l.width.min&&l.integerFormat.mandatoryDigits<l.width.min&&(l.integerFormat.mandatoryDigits=l.width.min),-1!=="YMD".indexOf(l.component))if(l.n=-1,l.width&&void 0!==l.width.max)l.n=l.width.max,l.integerFormat.mandatoryDigits=l.n;else{var d=l.integerFormat.mandatoryDigits+l.integerFormat.optionalDigits;d>=2&&(l.n=d)}}"Z"!==l.component&&"z"!==l.component||(l.integerFormat=E(l.presentation1)),t.push(l),i=a+1}a++}return r(i,a),n}const w=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],k=["January","February","March","April","May","June","July","August","September","October","November","December"],S=864e5,A=function(e){const t=Date.UTC(e.year,e.month);var n=new Date(t).getUTCDay();return 0===n&&(n=7),n>4?t+(8-n)*S:t-(n-1)*S},T=function(e,t){return{year:e,month:t,nextMonth:function(){return 11===t?T(e+1,0):T(e,t+1)},previousMonth:function(){return 0===t?T(e-1,11):T(e,t-1)},nextYear:function(){return T(e+1,t)},previousYear:function(){return T(e-1,t)}}},R=function(e,t){return(t-e)/6048e5+1},P=(e,t)=>{let n;switch(t){case"Y":n=e.getUTCFullYear();break;case"M":n=e.getUTCMonth()+1;break;case"D":n=e.getUTCDate();break;case"d":n=(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())-Date.UTC(e.getUTCFullYear(),0))/S+1;break;case"F":n=e.getUTCDay(),0===n&&(n=7);break;case"W":{const t=T(e.getUTCFullYear(),0),r=A(t),i=Date.UTC(t.year,e.getUTCMonth(),e.getUTCDate());let a=R(r,i);if(a>52)i>=A(t.nextYear())&&(a=1);else if(a<1){const e=A(t.previousYear());a=R(e,i)}n=Math.floor(a);break}case"w":{const t=T(e.getUTCFullYear(),e.getUTCMonth()),r=A(t),i=Date.UTC(t.year,t.month,e.getUTCDate());let a=R(r,i);if(a>4)i>=A(t.nextMonth())&&(a=1);else if(a<1){const e=A(t.previousMonth());a=R(e,i)}n=Math.floor(a);break}case"X":{const t=T(e.getUTCFullYear(),0),r=A(t),i=A(t.nextYear()),a=e.getTime();n=a<r?t.year-1:a>=i?t.year+1:t.year;break}case"x":{const t=T(e.getUTCFullYear(),e.getUTCMonth()),r=A(t),i=t.nextMonth(),a=A(i),o=e.getTime();n=o<r?t.previousMonth().month+1:o>=a?i.month+1:t.month+1;break}case"H":n=e.getUTCHours();break;case"h":n=e.getUTCHours(),n%=12,0===n&&(n=12);break;case"P":n=e.getUTCHours()>=12?"pm":"am";break;case"m":n=e.getUTCMinutes();break;case"s":n=e.getUTCSeconds();break;case"f":n=e.getUTCMilliseconds();break;case"Z":case"z":break;case"C":case"E":n="ISO"}return n};let j=null;function L(e,t,n){var r=0,i=0;if(void 0!==n){const e=parseInt(n);r=Math.floor(e/100),i=e%100}let a;void 0===t?(null===j&&(j=O("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),a=j):a=O(t);const o=new Date(e+60*(60*r+i)*1e3);let l="";return a.parts.forEach((function(e){"literal"===e.type?l+=e.value:l+=function(e,t){var n=P(e,t.component);if(-1!=="YMDdFWwXxHhms".indexOf(t.component))if("Y"===t.component&&-1!==t.n&&(n%=Math.pow(10,t.n)),t.names){if("M"===t.component||"x"===t.component)n=k[n-1];else{if("F"!==t.component)throw{code:"D3133",value:t.component};n=w[n]}t.names===y?n=n.toUpperCase():t.names===m&&(n=n.toLowerCase()),t.width&&n.length>t.width.max&&(n=n.substring(0,t.width.max))}else n=b(n,t.integerFormat);else if("f"===t.component)n=b(n,t.integerFormat);else if("Z"===t.component||"z"===t.component){const e=100*r+i;if(t.integerFormat.regular)n=b(e,t.integerFormat);else{const a=t.integerFormat.mandatoryDigits;if(1===a||2===a)n=b(r,t.integerFormat),0!==i&&(n+=":"+c(i,"00"));else{if(3!==a&&4!==a)throw{code:"D3134",value:a};n=b(e,t.integerFormat)}}e>=0&&(n="+"+n),"z"===t.component&&(n="GMT"+n),0===e&&"t"===t.presentation2&&(n="Z")}return n}(o,e)})),l}function I(e){var t={};if("datetime"===e.type)t.type="datetime",t.parts=e.parts.map((function(e){var t={};if("literal"===e.type)t.regex=e.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if("Z"===e.component||"z"===e.component){let n;Array.isArray(e.integerFormat.groupingSeparators)||(n=e.integerFormat.groupingSeparators),t.regex="","z"===e.component&&(t.regex="GMT"),t.regex+="[-+][0-9]+",n&&(t.regex+=n.character+"[0-9]+"),t.parse=function(t){"z"===e.component&&(t=t.substring(3));let r=0,i=0;return n?(r=Number.parseInt(t.substring(0,t.indexOf(n.character))),i=Number.parseInt(t.substring(t.indexOf(n.character)+1))):t.length-1<=2?r=Number.parseInt(t):(r=Number.parseInt(t.substring(0,3)),i=Number.parseInt(t.substring(3))),60*r+i}}else if(e.integerFormat)e.integerFormat.n=e.n,t=I(e.integerFormat);else{t.regex="[a-zA-Z]+";var n={};if("M"===e.component||"x"===e.component)k.forEach((function(t,r){e.width&&e.width.max?n[t.substring(0,e.width.max)]=r+1:n[t]=r+1}));else if("F"===e.component)w.forEach((function(t,r){r>0&&(e.width&&e.width.max?n[t.substring(0,e.width.max)]=r:n[t]=r)}));else{if("P"!==e.component)throw{code:"D3133",value:e.component};n={am:0,AM:0,pm:1,PM:1}}t.parse=function(e){return n[e]}}return t.component=e.component,t}));else{t.type="integer";const n=e.case===y;let r;switch(r=e.n&&e.n>0?0===e.optionalDigits?`{${e.n}}`:`{${e.n-e.optionalDigits},${e.n}}`:"+",e.primary){case p:t.regex=n?"[A-Z]+":"[a-z]+",t.parse=function(e){return function(e,t){for(var n=t.charCodeAt(0),r=0,i=0;i<e.length;i++)r+=(e.charCodeAt(e.length-i-1)-n+1)*Math.pow(26,i);return r}(e,n?"A":"a")};break;case f:t.regex=n?"[MDCLXVI]+":"[mdclxvi]+",t.parse=function(e){return function(e){for(var t=0,n=1,r=e.length-1;r>=0;r--){const i=e[r],a=s[i];a<n?t-=a:(n=a,t+=a)}return t}(n?e:e.toUpperCase())};break;case h:t.regex="(?:"+Object.keys(o).concat("and","[\\-, ]").join("|")+")+",t.parse=function(e){return function(e){const t=e.split(/,\s|\sand\s|[\s\\-]/).map((e=>o[e]));let n=[0];return t.forEach((e=>{if(e<100){let t=n.pop();t>=1e3&&(n.push(t),t=0),n.push(t+e)}else n.push(n.pop()*e)})),n.reduce(((e,t)=>e+t),0)}(e.toLowerCase())};break;case d:t.regex=`[0-9]${r}`,e.ordinal&&(t.regex+="(?:th|st|nd|rd)"),t.parse=function(t){let n=t;return e.ordinal&&(n=t.substring(0,t.length-2)),e.regular?n=n.split(",").join(""):e.groupingSeparators.forEach((e=>{n=n.split(e.character).join("")})),48!==e.zeroCode&&(n=n.split("").map((t=>String.fromCodePoint(t.codePointAt(0)-e.zeroCode+48))).join("")),parseInt(n)};break;case v:throw{code:"D3130",value:e.token}}}return t}function C(e,t){const n=I(O(t)),r="^"+n.parts.map((e=>"("+e.regex+")")).join("")+"$";var i=new RegExp(r,"i").exec(e);if(null!==i){const e=161,t=130,r=84,o=72,l=23,s=47,u={};for(let e=1;e<i.length;e++){const t=n.parts[e-1];t.parse&&(u[t.component]=t.parse(i[e]))}if(0===Object.getOwnPropertyNames(u).length)return;let c=0;const d=e=>{c<<=1,c+=e?1:0},p=e=>!(~e&c||!(e&c));"YXMxWwdD".split("").forEach((e=>d(u[e])));const f=!p(e)&&p(t),h=p(r),v=!h&&p(o);c=0,"PHhmsf".split("").forEach((e=>d(u[e])));const y=!p(l)&&p(s),m=(f?"YD":h?"XxwF":v?"XWF":"YMD")+(y?"Phmsf":"Hmsf"),g=this.environment.timestamp;let b=!1,_=!1;if(m.split("").forEach((e=>{if(void 0===u[e])b?(u[e]=-1!=="MDd".indexOf(e)?1:0,_=!0):u[e]=P(g,e);else if(b=!0,_)throw{code:"D3136"}})),u.M>0?u.M-=1:u.M=0,f){const e=Date.UTC(u.Y,0),t=1e3*(u.d-1)*60*60*24,n=new Date(e+t);u.M=n.getUTCMonth(),u.D=n.getUTCDate()}if(h)throw{code:"D3136"};if(v)throw{code:"D3136"};y&&(u.H=12===u.h?0:u.h,1===u.P&&(u.H+=12));var a=Date.UTC(u.Y,u.M,u.D,u.H,u.m,u.s,u.f);return(u.Z||u.z)&&(a-=60*(u.Z||u.z)*1e3),a}}var M=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");return{formatInteger:c,parseInteger:function(e,t){if(void 0!==e)return I(E(t)).parse(e)},fromMillis:function(e,t,n){if(void 0!==e)return L.call(this,e,t,n)},toMillis:function(e,t){if(void 0!==e){if(void 0===t){if(!M.test(e))throw{stack:(new Error).stack,code:"D3110",value:e};return Date.parse(e)}return C.call(this,e,t)}}}}();t.exports=i},{"./utils":6}],2:[function(e,t,r){(function(n){(function(){var r=e("./utils");const i=(()=>{"use strict";var e=r.isNumeric,t=r.isArrayOfStrings,i=r.isArrayOfNumbers,a=r.createSequence,o=r.isSequence,l=r.isFunction,s=r.isLambda,u=r.isIterable,c=r.getFunctionArity,d=r.isDeepEqual,p=r.stringToArray;function f(e,t,n){if(void 0!==e){var r=p(e),i=r.length;if(i+t<0&&(t=0),void 0!==n){if(n<=0)return"";var a=t>=0?t+n:i+t+n;return r.slice(t,a).join("")}return r.slice(t).join("")}}function h(e){if(void 0!==e)return p(e).length}function*v(e,t){var n=e.apply(this,[t]);if(u(n)&&(n=yield*n),n&&"number"!=typeof n.start&&"number"!==n.end&&!Array.isArray(n.groups)&&!l(n.next))throw{code:"T1010",stack:(new Error).stack};return n}function y(e,t){var n;if(void 0!==e){if(t){var r=e.toString().split("e");e=+(r[0]+"e"+(r[1]?+r[1]+t:t))}var i=(n=Math.round(e))-e;return.5===Math.abs(i)&&1===Math.abs(n%2)&&(n-=1),t&&(r=n.toString().split("e"),n=+(r[0]+"e"+(r[1]?+r[1]-t:-t))),Object.is(n,-0)&&(n=0),n}}function m(t){if(void 0!==t){var n=!1;return Array.isArray(t)?1===t.length?n=m(t[0]):t.length>1&&(n=t.filter((function(e){return m(e)})).length>0):"string"==typeof t?t.length>0&&(n=!0):e(t)?0!==t&&(n=!0):null!==t&&"object"==typeof t?Object.keys(t).length>0&&(n=!0):"boolean"==typeof t&&!0===t&&(n=!0),n}}function g(e,t,n,r){var i=[t],a=c(e);return a>=2&&i.push(n),a>=3&&i.push(r),i}function b(e,t){return void 0===e?t:void 0===t?e:(Array.isArray(e)||(e=a(e)),Array.isArray(t)||(t=[t]),e.concat(t))}return{sum:function(e){if(void 0!==e){var t=0;return e.forEach((function(e){t+=e})),t}},count:function(e){return void 0===e?0:e.length},max:function(e){if(void 0!==e&&0!==e.length)return Math.max.apply(Math,e)},min:function(e){if(void 0!==e&&0!==e.length)return Math.min.apply(Math,e)},average:function(e){if(void 0!==e&&0!==e.length){var t=0;return e.forEach((function(e){t+=e})),t/e.length}},string:function(t,n=!1){if(void 0!==t){var r;if("string"==typeof t)r=t;else if(l(t))r="";else{if("number"==typeof t&&!isFinite(t))throw{code:"D3001",value:t,stack:(new Error).stack};var i=n?2:0;Array.isArray(t)&&t.outerWrapper&&(t=t[0]),r=JSON.stringify(t,(function(t,n){return null!=n&&n.toPrecision&&e(n)?Number(n.toPrecision(15)):n&&l(n)?"":n}),i)}return r}},substring:f,substringBefore:function(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(0,n):e}},substringAfter:function(e,t){if(void 0!==e){var n=e.indexOf(t);return n>-1?e.substr(n+t.length):e}},lowercase:function(e){if(void 0!==e)return e.toLowerCase()},uppercase:function(e){if(void 0!==e)return e.toUpperCase()},length:h,trim:function(e){if(void 0!==e){var t=e.replace(/[ \t\n\r]+/gm," ");return" "===t.charAt(0)&&(t=t.substring(1))," "===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}},pad:function(e,t,n){if(void 0!==e){var r;void 0!==n&&0!==n.length||(n=" ");var i=Math.abs(t)-h(e);if(i>0){var a=new Array(i+1).join(n);n.length>1&&(a=f(a,0,i)),r=t>0?e+a:a+e}else r=e;return r}},match:function*(e,t,n){if(void 0!==e){if(n<0)throw{stack:(new Error).stack,value:n,code:"D3040",index:3};var r=a();if(void 0===n||n>0){var i=0,o=yield*v(t,e);if(void 0!==o)for(;void 0!==o&&(void 0===n||i<n);)r.push({match:o.match,index:o.start,groups:o.groups}),o=yield*v(o.next),i++}return r}},contains:function*(e,t){if(void 0!==e)return"string"==typeof t?-1!==e.indexOf(t):void 0!==(yield*v(t,e))},replace:function*(e,t,n,r){if(void 0!==e){var i;if(""===t)throw{code:"D3010",stack:(new Error).stack,value:t,index:2};if(r<0)throw{code:"D3011",stack:(new Error).stack,value:r,index:4};i="string"==typeof n?function(e){for(var t="",r=0,i=n.indexOf("$",r);-1!==i&&r<n.length;){t+=n.substring(r,i),r=i+1;var a=n.charAt(r);if("$"===a)t+="$",r++;else if("0"===a)t+=e.match,r++;else{var o;if(o=0===e.groups.length?1:Math.floor(Math.log(e.groups.length)*Math.LOG10E)+1,i=parseInt(n.substring(r,r+o),10),o>1&&i>e.groups.length&&(i=parseInt(n.substring(r,r+o-1),10)),isNaN(i))t+="$";else{if(e.groups.length>0){var l=e.groups[i-1];void 0!==l&&(t+=l)}r+=i.toString().length}}i=n.indexOf("$",r)}return t+n.substring(r)}:n;var a="",o=0;if(void 0===r||r>0){var l=0;if("string"==typeof t){for(var s=e.indexOf(t,o);-1!==s&&(void 0===r||l<r);)a+=e.substring(o,s),a+=n,o=s+t.length,l++,s=e.indexOf(t,o);a+=e.substring(o)}else{var c=yield*v(t,e);if(void 0!==c){for(;void 0!==c&&(void 0===r||l<r);){a+=e.substring(o,c.start);var d=i.apply(this,[c]);if(u(d)&&(d=yield*d),"string"!=typeof d)throw{code:"D3012",stack:(new Error).stack,value:d};a+=d,o=c.start+c.match.length,l++,c=yield*v(c.next)}a+=e.substring(o)}else a=e}}else a=e;return a}},split:function*(e,t,n){if(void 0!==e){if(n<0)throw{code:"D3020",stack:(new Error).stack,value:n,index:3};var r=[];if(void 0===n||n>0)if("string"==typeof t)r=e.split(t,n);else{var i=0,a=yield*v(t,e);if(void 0!==a){for(var o=0;void 0!==a&&(void 0===n||i<n);)r.push(e.substring(o,a.start)),o=a.end,a=yield*v(a.next),i++;(void 0===n||i<n)&&r.push(e.substring(o))}else r.push(e)}return r}},join:function(e,t){if(void 0!==e)return void 0===t&&(t=""),e.join(t)},formatNumber:function(e,t,n){if(void 0!==e){var r={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"‰","zero-digit":"0",digit:"#","pattern-separator":";"};void 0!==n&&Object.keys(n).forEach((function(e){r[e]=n[e]}));for(var i=[],a=r["zero-digit"].charCodeAt(0),o=a;o<a+10;o++)i.push(String.fromCharCode(o));var l=i.concat([r["decimal-separator"],r["exponent-separator"],r["grouping-separator"],r.digit,r["pattern-separator"]]),s=t.split(r["pattern-separator"]);if(s.length>2)throw{code:"D3080",stack:(new Error).stack};var u=s.map((function(e){var t,n,i,a,o=function(){for(var t,n=0;n<e.length;n++)if(t=e.charAt(n),-1!==l.indexOf(t)&&t!==r["exponent-separator"])return e.substring(0,n)}(),s=function(){for(var t,n=e.length-1;n>=0;n--)if(t=e.charAt(n),-1!==l.indexOf(t)&&t!==r["exponent-separator"])return e.substring(n+1)}(),u=e.substring(o.length,e.length-s.length),c=e.indexOf(r["exponent-separator"],o.length);-1===c||c>e.length-s.length?(t=u,n=void 0):(t=u.substring(0,c),n=u.substring(c+1));var d=t.indexOf(r["decimal-separator"]);return-1===d?(i=t,a=s):(i=t.substring(0,d),a=t.substring(d+1)),{prefix:o,suffix:s,activePart:u,mantissaPart:t,exponentPart:n,integerPart:i,fractionalPart:a,subpicture:e}}));u.forEach((function(e){var t,n,a=e.subpicture,o=a.indexOf(r["decimal-separator"]);o!==a.lastIndexOf(r["decimal-separator"])&&(t="D3081"),a.indexOf(r.percent)!==a.lastIndexOf(r.percent)&&(t="D3082"),a.indexOf(r["per-mille"])!==a.lastIndexOf(r["per-mille"])&&(t="D3083"),-1!==a.indexOf(r.percent)&&-1!==a.indexOf(r["per-mille"])&&(t="D3084");var s=!1;for(n=0;n<e.mantissaPart.length;n++){var u=e.mantissaPart.charAt(n);if(-1!==i.indexOf(u)||u===r.digit){s=!0;break}}s||(t="D3085"),-1!==e.activePart.split("").map((function(e){return-1===l.indexOf(e)?"p":"a"})).join("").indexOf("p")&&(t="D3086"),-1!==o?a.charAt(o-1)!==r["grouping-separator"]&&a.charAt(o+1)!==r["grouping-separator"]||(t="D3087"):e.integerPart.charAt(e.integerPart.length-1)===r["grouping-separator"]&&(t="D3088"),-1!==a.indexOf(r["grouping-separator"]+r["grouping-separator"])&&(t="D3089");var c=e.integerPart.indexOf(r.digit);-1!==c&&e.integerPart.substring(0,c).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3090"),-1!==(c=e.fractionalPart.lastIndexOf(r.digit))&&e.fractionalPart.substring(c).split("").filter((function(e){return i.indexOf(e)>-1})).length>0&&(t="D3091");var d="string"==typeof e.exponentPart;if(d&&e.exponentPart.length>0&&(-1!==a.indexOf(r.percent)||-1!==a.indexOf(r["per-mille"]))&&(t="D3092"),d&&(0===e.exponentPart.length||e.exponentPart.split("").filter((function(e){return-1===i.indexOf(e)})).length>0)&&(t="D3093"),t)throw{code:t,stack:(new Error).stack}}));var c,d,p,f,h=u.map((function(e){var t=function(t,n){for(var a=[],o=t.indexOf(r["grouping-separator"]);-1!==o;){var l=(n?t.substring(0,o):t.substring(o)).split("").filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length;a.push(l),o=e.integerPart.indexOf(r["grouping-separator"],o+1)}return a},n=t(e.integerPart),a=function(e){if(0===e.length)return 0;for(var t=function(e,n){return 0===n?e:t(n,e%n)},n=e.reduce(t),r=1;r<=e.length;r++)if(-1===e.indexOf(r*n))return 0;return n}(n),o=t(e.fractionalPart,!0),l=e.integerPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length,s=l,u=e.fractionalPart.split(""),c=u.filter((function(e){return-1!==i.indexOf(e)})).length,d=u.filter((function(e){return-1!==i.indexOf(e)||e===r.digit})).length,p="string"==typeof e.exponentPart;0===l&&0===d&&(p?(c=1,d=1):l=1),p&&0===l&&-1!==e.integerPart.indexOf(r.digit)&&(l=1),0===l&&0===c&&(c=1);var f=0;return p&&(f=e.exponentPart.split("").filter((function(e){return-1!==i.indexOf(e)})).length),{integerPartGroupingPositions:n,regularGrouping:a,minimumIntegerPartSize:l,scalingFactor:s,prefix:e.prefix,fractionalPartGroupingPositions:o,minimumFactionalPartSize:c,maximumFactionalPartSize:d,minimumExponentSize:f,suffix:e.suffix,picture:e.subpicture}})),v=r["minus-sign"],m=r["zero-digit"],g=r["decimal-separator"],b=r["grouping-separator"];if(1===h.length&&(h.push(JSON.parse(JSON.stringify(h[0]))),h[1].prefix=v+h[1].prefix),d=-1!==(c=e>=0?h[0]:h[1]).picture.indexOf(r.percent)?100*e:-1!==c.picture.indexOf(r["per-mille"])?1e3*e:e,0===c.minimumExponentSize)p=d;else{var _=Math.pow(10,c.scalingFactor),E=Math.pow(10,c.scalingFactor-1);for(p=d,f=0;p<E;)p*=10,f-=1;for(;p>_;)p/=10,f+=1}var x=function(e,t){var n=Math.abs(e).toFixed(t);return"0"!==m&&(n=n.split("").map((function(e){return e>="0"&&e<="9"?i[e.charCodeAt(0)-48]:e})).join("")),n},O=x(y(p,c.maximumFactionalPartSize),c.maximumFactionalPartSize),w=O.indexOf(".");for(-1===w?O+=g:O=O.replace(".",g);O.charAt(0)===m;)O=O.substring(1);for(;O.charAt(O.length-1)===m;)O=O.substring(0,O.length-1);w=O.indexOf(g);var k=c.minimumIntegerPartSize-w,S=c.minimumFactionalPartSize-(O.length-w-1);if(O=(k>0?new Array(k+1).join(m):"")+O,O+=S>0?new Array(S+1).join(m):"",w=O.indexOf(g),c.regularGrouping>0)for(var A=Math.floor((w-1)/c.regularGrouping),T=1;T<=A;T++)O=[O.slice(0,w-T*c.regularGrouping),b,O.slice(w-T*c.regularGrouping)].join("");else c.integerPartGroupingPositions.forEach((function(e){O=[O.slice(0,w-e),b,O.slice(w-e)].join(""),w++}));if(w=O.indexOf(g),c.fractionalPartGroupingPositions.forEach((function(e){O=[O.slice(0,e+w+1),b,O.slice(e+w+1)].join("")})),w=O.indexOf(g),-1!==c.picture.indexOf(g)&&w!==O.length-1||(O=O.substring(0,O.length-1)),void 0!==f){var R=x(f,0);(k=c.minimumExponentSize-R.length)>0&&(R=new Array(k+1).join(m)+R),O=O+r["exponent-separator"]+(f<0?v:"")+R}return O=c.prefix+O+c.suffix}},formatBase:function(e,t){if(void 0!==e){if(e=y(e),(t=void 0===t?10:y(t))<2||t>36)throw{code:"D3100",stack:(new Error).stack,value:t};return e.toString(t)}},number:function(e){var t;if(void 0!==e){if("number"==typeof e)t=e;else if("string"==typeof e&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(e)&&!isNaN(parseFloat(e))&&isFinite(e))t=parseFloat(e);else if(!0===e)t=1;else{if(!1!==e)throw{code:"D3030",value:e,stack:(new Error).stack,index:1};t=0}return t}},floor:function(e){if(void 0!==e)return Math.floor(e)},ceil:function(e){if(void 0!==e)return Math.ceil(e)},round:y,abs:function(e){if(void 0!==e)return Math.abs(e)},sqrt:function(e){if(void 0!==e){if(e<0)throw{stack:(new Error).stack,code:"D3060",index:1,value:e};return Math.sqrt(e)}},power:function(e,t){var n;if(void 0!==e){if(n=Math.pow(e,t),!isFinite(n))throw{stack:(new Error).stack,code:"D3061",index:1,value:e,exp:t};return n}},random:function(){return Math.random()},boolean:m,not:function(e){if(void 0!==e)return!m(e)},map:function*(e,t){if(void 0!==e){for(var n=a(),r=0;r<e.length;r++){var i=g(t,e[r],r,e),o=yield*t.apply(this,i);void 0!==o&&n.push(o)}return n}},zip:function(){for(var e=[],t=Array.prototype.slice.call(arguments),n=Math.min.apply(Math,t.map((function(e){return Array.isArray(e)?e.length:0}))),r=0;r<n;r++){var i=t.map((e=>e[r]));e.push(i)}return e},filter:function*(e,t){if(void 0!==e){for(var n=a(),r=0;r<e.length;r++){var i=e[r],o=g(t,i,r,e);m(yield*t.apply(this,o))&&n.push(i)}return n}},single:function*(e,t){if(void 0!==e){for(var n,r=!1,i=0;i<e.length;i++){var a=e[i],o=!0;if(void 0!==t){var l=g(t,a,i,e);o=m(yield*t.apply(this,l))}if(o){if(r)throw{stack:(new Error).stack,code:"D3138",index:i};n=a,r=!0}}if(!r)throw{stack:(new Error).stack,code:"D3139"};return n}},foldLeft:function*(e,t,n){if(void 0!==e){var r,i,a=c(t);if(a<2)throw{stack:(new Error).stack,code:"D3050",index:1};for(void 0===n&&e.length>0?(r=e[0],i=1):(r=n,i=0);i<e.length;){var o=[r,e[i]];a>=3&&o.push(i),a>=4&&o.push(e),r=yield*t.apply(this,o),i++}return r}},sift:function*(e,t){var n={};for(var r in e){var i=e[r],a=g(t,i,r,e);m(yield*t.apply(this,a))&&(n[r]=i)}return 0===Object.keys(n).length&&(n=void 0),n},keys:function e(t){var n=a();if(Array.isArray(t)){var r={};t.forEach((function(t){e(t).forEach((function(e){r[e]=!0}))})),n=e(r)}else null===t||"object"!=typeof t||s(t)||Object.keys(t).forEach((e=>n.push(e)));return n},lookup:function e(t,n){var r;if(Array.isArray(t)){r=a();for(var i=0;i<t.length;i++){var o=e(t[i],n);void 0!==o&&(Array.isArray(o)?o.forEach((e=>r.push(e))):r.push(o))}}else null!==t&&"object"==typeof t&&(r=t[n]);return r},append:b,exists:function(e){return void 0!==e},spread:function e(t){var n=a();if(Array.isArray(t))t.forEach((function(t){n=b(n,e(t))}));else if(null===t||"object"!=typeof t||s(t))n=t;else for(var r in t){var i={};i[r]=t[r],n.push(i)}return n},merge:function(e){if(void 0!==e){var t={};return e.forEach((function(e){for(var n in e)t[n]=e[n]})),t}},reverse:function(e){if(void 0!==e){if(e.length<=1)return e;for(var t=e.length,n=new Array(t),r=0;r<t;r++)n[t-r-1]=e[r];return n}},each:function*(e,t){var n=a();for(var r in e){var i=g(t,e[r],r,e),o=yield*t.apply(this,i);void 0!==o&&n.push(o)}return n},error:function(e){throw{code:"D3137",stack:(new Error).stack,message:e||"$error() function evaluated"}},assert:function(e,t){if(!e)throw{code:"D3141",stack:(new Error).stack,message:t||"$assert() statement failed"}},type:function(t){if(void 0!==t)return null===t?"null":e(t)?"number":"string"==typeof t?"string":"boolean"==typeof t?"boolean":Array.isArray(t)?"array":l(t)?"function":"object"},sort:function*(e,n){if(void 0!==e){if(e.length<=1)return e;var r;if(void 0===n){if(!i(e)&&!t(e))throw{stack:(new Error).stack,code:"D3070",index:1};r=function*(e,t){return e>t}}else r=n;var a=function*(e){if(!Array.isArray(e)||e.length<=1)return e;var t=Math.floor(e.length/2),n=e.slice(0,t),i=e.slice(t);return n=yield*a(n),i=yield*a(i),yield*function*(e,t){var n=function*(e,t,i){0===t.length?Array.prototype.push.apply(e,i):0===i.length?Array.prototype.push.apply(e,t):(yield*r(t[0],i[0]))?(e.push(i[0]),yield*n(e,t,i.slice(1))):(e.push(t[0]),yield*n(e,t.slice(1),i))},i=[];return yield*n(i,e,t),i}(n,i)};return yield*a(e)}},shuffle:function(e){if(void 0!==e){if(e.length<=1)return e;for(var t=new Array(e.length),n=0;n<e.length;n++){var r=Math.floor(Math.random()*(n+1));n!==r&&(t[n]=t[r]),t[r]=e[n]}return t}},distinct:function(e){if(void 0!==e){if(!Array.isArray(e)||e.length<=1)return e;for(var t=o(e)?a():[],n=0;n<e.length;n++){for(var r=e[n],i=!1,l=0;l<t.length;l++)if(d(r,t[l])){i=!0;break}i||t.push(r)}return t}},base64encode:function(e){if(void 0!==e){var t="undefined"!=typeof window?window.btoa:function(e){return new n.Buffer.from(e,"binary").toString("base64")};return t(e)}},base64decode:function(e){if(void 0!==e){var t="undefined"!=typeof window?window.atob:function(e){return new n.Buffer.from(e,"base64").toString("binary")};return t(e)}},encodeUrlComponent:function(e){if(void 0!==e){var t;try{t=encodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrlComponent"}}return t}},encodeUrl:function(e){if(void 0!==e){var t;try{t=encodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"encodeUrl"}}return t}},decodeUrlComponent:function(e){if(void 0!==e){var t;try{t=decodeURIComponent(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrlComponent"}}return t}},decodeUrl:function(e){if(void 0!==e){var t;try{t=decodeURI(e)}catch(t){throw{code:"D3140",stack:(new Error).stack,value:e,functionName:"decodeUrl"}}return t}}}})();t.exports=i}).call(this)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":6}],3:[function(e,t,n){var r=e("./datetime"),i=e("./functions"),a=e("./utils"),o=e("./parser"),l=e("./signature"),s=function(){"use strict";var e=a.isNumeric,t=a.isArrayOfStrings,n=a.isArrayOfNumbers,s=a.createSequence,u=a.isSequence,c=a.isFunction,d=a.isLambda,p=a.isIterable,f=a.getFunctionArity,h=a.isDeepEqual,v=D(null);function*y(n,r,a){var o,l=a.lookup("__evaluate_entry");switch(l&&l(n,r,a),n.type){case"path":o=yield*function*(e,t,n){var r,i;r=Array.isArray(t)&&"variable"!==e.steps[0].type?t:s(t);for(var a=!1,o=void 0,l=0;l<e.steps.length;l++){var u=e.steps[l];if(u.tuple&&(a=!0),0===l&&u.consarray?i=yield*y(u,r,n):a?o=yield*_(u,r,o,n):i=yield*g(u,r,n,l===e.steps.length-1),!a&&(void 0===i||0===i.length))break;void 0===u.focus&&(r=i)}if(a)if(e.tuple)i=o;else for(i=s(),l=0;l<o.length;l++)i.push(o[l]["@"]);return e.keepSingletonArray&&(Array.isArray(i)&&i.cons&&!i.sequence&&(i=s(i)),i.keepSingleton=!0),e.hasOwnProperty("group")&&(i=yield*k(e.group,a?o:i,n)),i}(n,r,a);break;case"binary":o=yield*function*(t,n,r){var a,o=yield*y(t.lhs,n,r),l=t.value,s=function*(){return yield*y(t.rhs,n,r)};if("and"===l||"or"===l)try{return yield*function*(e,t,n){var r,i=w(e);switch(n){case"and":r=i&&w(yield*t());break;case"or":r=i||w(yield*t())}return r}(o,s,l)}catch(e){throw e.position=t.position,e.token=l,e}var u=yield*s();try{switch(l){case"+":case"-":case"*":case"/":case"%":a=function(t,n,r){var i;if(void 0!==t&&!e(t))throw{code:"T2001",stack:(new Error).stack,value:t};if(void 0!==n&&!e(n))throw{code:"T2002",stack:(new Error).stack,value:n};if(void 0===t||void 0===n)return i;switch(r){case"+":i=t+n;break;case"-":i=t-n;break;case"*":i=t*n;break;case"/":i=t/n;break;case"%":i=t%n}return i}(o,u,l);break;case"=":case"!=":a=function(e,t,n){var r;if(void 0===e||void 0===t)return!1;switch(n){case"=":r=h(e,t);break;case"!=":r=!h(e,t)}return r}(o,u,l);break;case"<":case"<=":case">":case">=":a=function(e,t,n){var r,i=typeof e,a=typeof t;if("undefined"!==i&&"string"!==i&&"number"!==i||"undefined"!==a&&"string"!==a&&"number"!==a)throw{code:"T2010",stack:(new Error).stack,value:"string"!==i&&"number"!==i?e:t};if("undefined"!==i&&"undefined"!==a){if(i!==a)throw{code:"T2009",stack:(new Error).stack,value:e,value2:t};switch(n){case"<":r=e<t;break;case"<=":r=e<=t;break;case">":r=e>t;break;case">=":r=e>=t}return r}}(o,u,l);break;case"&":a=function(e,t){var n="",r="";return void 0!==e&&(n=i.string(e)),void 0!==t&&(r=i.string(t)),n.concat(r)}(o,u);break;case"..":a=function(e,t){var n;if(void 0!==e&&!Number.isInteger(e))throw{code:"T2003",stack:(new Error).stack,value:e};if(void 0!==t&&!Number.isInteger(t))throw{code:"T2004",stack:(new Error).stack,value:t};if(void 0===e||void 0===t)return n;if(e>t)return n;var r=t-e+1;if(r>1e7)throw{code:"D2014",stack:(new Error).stack,value:r};n=new Array(r);for(var i=e,a=0;i<=t;i++,a++)n[a]=i;return n.sequence=!0,n}(o,u);break;case"in":a=function(e,t){var n=!1;if(void 0===e||void 0===t)return!1;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++)if(t[r]===e){n=!0;break}return n}(o,u)}}catch(e){throw e.position=t.position,e.token=l,e}return a}(n,r,a);break;case"unary":o=yield*function*(t,n,r){var a;switch(t.value){case"-":if(void 0===(a=yield*y(t.expression,n,r)))a=void 0;else{if(!e(a))throw{code:"D1002",stack:(new Error).stack,position:t.position,token:t.value,value:a};a=-a}break;case"[":a=[];for(var o=0;o<t.expressions.length;o++){var l=t.expressions[o],s=yield*y(l,n,r);void 0!==s&&("["===l.value?a.push(s):a=i.append(a,s))}t.consarray&&Object.defineProperty(a,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":a=yield*k(t,n,r)}return a}(n,r,a);break;case"name":o=function(e,t,n){return i.lookup(t,e.value)}(n,r);break;case"string":case"number":case"value":o=function(e){return e.value}(n);break;case"wildcard":o=function(e,t){var n=s();return Array.isArray(t)&&t.outerWrapper&&t.length>0&&(t=t[0]),null!==t&&"object"==typeof t&&Object.keys(t).forEach((function(e){var r=t[e];Array.isArray(r)?(r=x(r),n=i.append(n,r)):n.push(r)})),n}(0,r);break;case"descendant":o=function(e,t){var n,r=s();return void 0!==t&&(O(t,r),n=1===r.length?r[0]:r),n}(0,r);break;case"parent":o=a.lookup(n.slot.label);break;case"condition":o=yield*function*(e,t,n){var r,a=yield*y(e.condition,t,n);return i.boolean(a)?r=yield*y(e.then,t,n):void 0!==e.else&&(r=yield*y(e.else,t,n)),r}(n,r,a);break;case"block":o=yield*function*(e,t,n){for(var r,i=D(n),a=0;a<e.expressions.length;a++)r=yield*y(e.expressions[a],t,i);return r}(n,r,a);break;case"bind":o=yield*function*(e,t,n){var r=yield*y(e.rhs,t,n);return n.bind(e.lhs.value,r),r}(n,r,a);break;case"regex":o=function(e){var t=new V.RegexEngine(e.value),n=function(r,i){var a;t.lastIndex=i||0;var o=t.exec(r);if(null!==o){if(a={match:o[0],start:o.index,end:o.index+o[0].length,groups:[]},o.length>1)for(var l=1;l<o.length;l++)a.groups.push(o[l]);a.next=function(){if(!(t.lastIndex>=r.length)){var i=n(r,t.lastIndex);if(i&&""===i.match)throw{code:"D1004",stack:(new Error).stack,position:e.position,value:e.value.source};return i}}}return a};return n}(n);break;case"function":o=yield*R(n,r,a);break;case"variable":o=function(e,t,n){return""===e.value?t&&t.outerWrapper?t[0]:t:n.lookup(e.value)}(n,r,a);break;case"lambda":o=function(e,t,n){var r={_jsonata_lambda:!0,input:t,environment:n,arguments:e.arguments,signature:e.signature,body:e.body};return!0===e.thunk&&(r.thunk=!0),r.apply=function*(e,n){return yield*P(r,n,t,e.environment)},r}(n,r,a);break;case"partial":o=yield*function*(e,t,n){for(var r,i=[],a=0;a<e.arguments.length;a++){var o=e.arguments[a];"operator"===o.type&&"?"===o.value?i.push(o):i.push(yield*y(o,t,n))}var l=yield*y(e.procedure,t,n);if(void 0===l&&"path"===e.procedure.type&&n.lookup(e.procedure.steps[0].value))throw{code:"T1007",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};if(d(l))r=L(l,i);else if(l&&!0===l._jsonata_function)r=I(l.implementation,i);else{if("function"!=typeof l)throw{code:"T1008",stack:(new Error).stack,position:e.position,token:"path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value};r=I(l,i)}return r}(n,r,a);break;case"apply":o=yield*function*(e,t,n){var r,i=yield*y(e.lhs,t,n);if("function"===e.rhs.type)r=yield*R(e.rhs,t,n,{context:i});else{var a=yield*y(e.rhs,t,n);if(!c(a))throw{code:"T2006",stack:(new Error).stack,position:e.position,value:a};if(c(i)){var o=yield*y(T,null,n);r=yield*P(o,[i,a],null,n)}else r=yield*P(a,[i],null,n)}return r}(n,r,a);break;case"transform":o=function(e,n,r){return M((function*(n){if(void 0!==n){var i=r.lookup("clone");if(!c(i))throw{code:"T2013",stack:(new Error).stack,position:e.position};var a=yield*P(i,[n],null,r),o=yield*y(e.pattern,a,r);if(void 0!==o){Array.isArray(o)||(o=[o]);for(var l=0;l<o.length;l++){var s=o[l],u=yield*y(e.update,s,r),d=typeof u;if("undefined"!==d){if("object"!==d||null===u||Array.isArray(u))throw{code:"T2011",stack:(new Error).stack,position:e.update.position,value:u};for(var p in u)s[p]=u[p]}if(void 0!==e.delete){var f=yield*y(e.delete,s,r);if(void 0!==f){var h=f;if(Array.isArray(f)||(f=[f]),!t(f))throw{code:"T2012",stack:(new Error).stack,position:e.delete.position,value:h};for(var v=0;v<f.length;v++)"object"==typeof s&&null!==s&&delete s[f[v]]}}}}return a}}),"<(oa):o>")}(n,0,a)}if(!a.async||null!=o&&"function"==typeof o.then||(o=Promise.resolve(o)),a.async&&"function"==typeof o.then&&n.nextFunction&&"function"==typeof o[n.nextFunction]||(o=yield o),Object.prototype.hasOwnProperty.call(n,"predicate"))for(var p=0;p<n.predicate.length;p++)o=yield*E(n.predicate[p].expr,o,a);"path"!==n.type&&Object.prototype.hasOwnProperty.call(n,"group")&&(o=yield*k(n.group,o,a));var f=a.lookup("__evaluate_exit");return f&&f(n,r,a,o),o&&u(o)&&!o.tupleStream&&(n.keepArray&&(o.keepSingleton=!0),0===o.length?o=void 0:1===o.length&&(o=o.keepSingleton?o:o[0])),o}function m(e,t){var n=D(e);for(const e in t)n.bind(e,t[e]);return n}function*g(e,t,n,r){var i;if("sort"===e.type)return i=yield*A(e,t,n),e.stages&&(i=yield*b(e.stages,i,n)),i;i=s();for(var a=0;a<t.length;a++){var o=yield*y(e,t[a],n);if(e.stages)for(var l=0;l<e.stages.length;l++)o=yield*E(e.stages[l].expr,o,n);void 0!==o&&i.push(o)}var c=s();return r&&1===i.length&&Array.isArray(i[0])&&!u(i[0])?c=i[0]:i.forEach((function(e){!Array.isArray(e)||e.cons?c.push(e):e.forEach((e=>c.push(e)))})),c}function*b(e,t,n){for(var r=t,i=0;i<e.length;i++){var a=e[i];switch(a.type){case"filter":r=yield*E(a.expr,r,n);break;case"index":for(var o=0;o<r.length;o++)r[o][a.value]=o}}return r}function*_(e,t,n,r){var i;if("sort"===e.type){if(n)i=yield*A(e,n,r);else{var a=yield*A(e,t,r);(i=s()).tupleStream=!0;for(var o=0;o<a.length;o++){var l={"@":a[o]};l[e.index]=o,i.push(l)}}return e.stages&&(i=yield*b(e.stages,i,r)),i}(i=s()).tupleStream=!0;var u=r;void 0===n&&(n=t.map((e=>({"@":e}))));for(var c=0;c<n.length;c++){u=m(r,n[c]);var d=yield*y(e,n[c]["@"],u);if(void 0!==d){Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++)l={},Object.assign(l,n[c]),d.tupleStream?Object.assign(l,d[p]):(e.focus?(l[e.focus]=d[p],l["@"]=n[c]["@"]):l["@"]=d[p],e.index&&(l[e.index]=p),e.ancestor&&(l[e.ancestor.label]=n[c]["@"])),i.push(l)}}return e.stages&&(i=yield*b(e.stages,i,r)),i}function*E(t,r,a){var o=s();if(r&&r.tupleStream&&(o.tupleStream=!0),Array.isArray(r)||(r=s(r)),"number"===t.type){var l=Math.floor(t.value);l<0&&(l=r.length+l),void 0!==(u=r[l])&&(Array.isArray(u)?o=u:o.push(u))}else for(l=0;l<r.length;l++){var u,c=u=r[l],d=a;r.tupleStream&&(c=u["@"],d=m(a,u));var p=yield*y(t,c,d);e(p)&&(p=[p]),n(p)?p.forEach((function(e){var t=Math.floor(e);t<0&&(t=r.length+t),t===l&&o.push(u)})):i.boolean(p)&&o.push(u)}return o}function x(e,t){return void 0===t&&(t=[]),Array.isArray(e)?e.forEach((function(e){x(e,t)})):t.push(e),t}function O(e,t){Array.isArray(e)||t.push(e),Array.isArray(e)?e.forEach((function(e){O(e,t)})):null!==e&&"object"==typeof e&&Object.keys(e).forEach((function(n){O(e[n],t)}))}function w(e){var t=i.boolean(e);return void 0!==t&&t}function*k(e,t,n){var r={},a={},o=!(!t||!t.tupleStream);Array.isArray(t)||(t=s(t)),0===t.length&&t.push(void 0);for(var l=0;l<t.length;l++)for(var u=t[l],c=o?m(n,u):n,d=0;d<e.lhs.length;d++){var p=e.lhs[d],f=yield*y(p[0],o?u["@"]:u,c);if("string"!=typeof f&&void 0!==f)throw{code:"T1003",stack:(new Error).stack,position:e.position,value:f};if(void 0!==f){var h={data:u,exprIndex:d};if(a.hasOwnProperty(f)){if(a[f].exprIndex!==d)throw{code:"D1009",stack:(new Error).stack,position:e.position,value:f};a[f].data=i.append(a[f].data,u)}else a[f]=h}}for(f in a){var v=(h=a[f]).data;if(c=n,o){var g=S(h.data);v=g["@"],delete g["@"],c=m(n,g)}var b=yield*y(e.lhs[h.exprIndex][1],v,c);void 0!==b&&(r[f]=b)}return r}function S(e){if(!Array.isArray(e))return e;var t={};Object.assign(t,e[0]);for(var n=1;n<e.length;n++)for(const r in e[n])t[r]=i.append(t[r],e[n][r]);return t}function*A(e,t,n){var r=t,a=!!t.tupleStream,o={environment:n,input:t};return yield*i.sort.apply(o,[r,function*(t,r){for(var i=0,o=0;0===i&&o<e.terms.length;o++){var l=e.terms[o],s=t,u=n;a&&(s=t["@"],u=m(n,t));var c=yield*y(l.expression,s,u);s=r,u=n,a&&(s=r["@"],u=m(n,r));var d=yield*y(l.expression,s,u),p=typeof c,f=typeof d;if("undefined"!==p)if("undefined"!==f){if("string"!==p&&"number"!==p||"string"!==f&&"number"!==f)throw{code:"T2008",stack:(new Error).stack,position:e.position,value:"string"!==p&&"number"!==p?c:d};if(p!==f)throw{code:"T2007",stack:(new Error).stack,position:e.position,value:c,value2:d};c!==d&&(i=c<d?-1:1,!0===l.descending&&(i=-i))}else i=-1;else i="undefined"===f?0:1}return 1===i}])}var T=o("function($f, $g) { function($x){ $g($f($x)) } }");function*R(e,t,n,r){var i,a=yield*y(e.procedure,t,n);if(void 0===a&&"path"===e.procedure.type&&n.lookup(e.procedure.steps[0].value))throw{code:"T1005",stack:(new Error).stack,position:e.position,token:e.procedure.steps[0].value};var o=[];void 0!==r&&o.push(r.context);for(var l=0;l<e.arguments.length;l++){const r=yield*y(e.arguments[l],t,n);if(c(r)){const e=function*(...e){return yield*P(r,e,null,n)};e.arity=f(r),o.push(e)}else o.push(r)}var s="path"===e.procedure.type?e.procedure.steps[0].value:e.procedure.value;try{"object"==typeof a&&(a.token=s,a.position=e.position),i=yield*P(a,o,t,n)}catch(t){throw t.position||(t.position=e.position),t.token||(t.token=s),t}return i}function*P(e,t,n,r){var i;for(i=yield*j(e,t,n,r);d(i)&&!0===i.thunk;){var a=yield*y(i.body.procedure,i.input,i.environment);"variable"===i.body.procedure.type&&(a.token=i.body.procedure.value),a.position=i.body.procedure.position;for(var o=[],l=0;l<i.body.arguments.length;l++)o.push(yield*y(i.body.arguments[l],i.input,i.environment));i=yield*j(a,o,n,r)}return i}function*j(e,t,n,r){var i;try{var a=t;if(e&&(a=function(e,t,n){return void 0===e?t:e.validate(t,n)}(e.signature,t,n)),d(e))i=yield*function*(e,t){var n=D(e.environment);return e.arguments.forEach((function(e,r){n.bind(e.value,t[r])})),"function"==typeof e.body?yield*function*(e,t){var n=C(e).map((function(e){return t.lookup(e.trim())})),r={environment:t},i=e.apply(r,n);return p(i)&&(i=yield*i),i}(e.body,n):yield*y(e.body,e.input,n)}(e,a);else if(e&&!0===e._jsonata_function){var o={environment:r,input:n};i=e.implementation.apply(o,a),p(i)&&(i=yield*i)}else{if("function"!=typeof e)throw{code:"T1006",stack:(new Error).stack};i=e.apply(n,a),p(i)&&(i=yield*i)}}catch(t){throw e&&(void 0===t.token&&void 0!==e.token&&(t.token=e.token),t.position=e.position),t}return i}function L(e,t){var n=D(e.environment),r=[];return e.arguments.forEach((function(e,i){var a=t[i];a&&"operator"===a.type&&"?"===a.value?r.push(e):n.bind(e.value,a)})),{_jsonata_lambda:!0,input:e.input,environment:n,arguments:r,body:e.body}}function I(e,t){var n=C(e),r="function("+(n=n.map((function(e){return"$"+e.trim()}))).join(", ")+"){ _ }",i=o(r);return i.body=e,L(i,t)}function C(e){var t=e.toString();return/\(([^)]*)\)/.exec(t)[1].split(",")}function M(e,t){var n={_jsonata_function:!0,implementation:e};return void 0!==t&&(n.signature=l(t)),n}function D(e){var t={};return{bind:function(e,n){t[e]=n},lookup:function(n){var r;return t.hasOwnProperty(n)?r=t[n]:e&&(r=e.lookup(n)),r},timestamp:e?e.timestamp:null,async:!!e&&e.async,global:e?e.global:{ancestry:[null]}}}v.bind("sum",M(i.sum,"<a<n>:n>")),v.bind("count",M(i.count,"<a:n>")),v.bind("max",M(i.max,"<a<n>:n>")),v.bind("min",M(i.min,"<a<n>:n>")),v.bind("average",M(i.average,"<a<n>:n>")),v.bind("string",M(i.string,"<x-b?:s>")),v.bind("substring",M(i.substring,"<s-nn?:s>")),v.bind("substringBefore",M(i.substringBefore,"<s-s:s>")),v.bind("substringAfter",M(i.substringAfter,"<s-s:s>")),v.bind("lowercase",M(i.lowercase,"<s-:s>")),v.bind("uppercase",M(i.uppercase,"<s-:s>")),v.bind("length",M(i.length,"<s-:n>")),v.bind("trim",M(i.trim,"<s-:s>")),v.bind("pad",M(i.pad,"<s-ns?:s>")),v.bind("match",M(i.match,"<s-f<s:o>n?:a<o>>")),v.bind("contains",M(i.contains,"<s-(sf):b>")),v.bind("replace",M(i.replace,"<s-(sf)(sf)n?:s>")),v.bind("split",M(i.split,"<s-(sf)n?:a<s>>")),v.bind("join",M(i.join,"<a<s>s?:s>")),v.bind("formatNumber",M(i.formatNumber,"<n-so?:s>")),v.bind("formatBase",M(i.formatBase,"<n-n?:s>")),v.bind("formatInteger",M(r.formatInteger,"<n-s:s>")),v.bind("parseInteger",M(r.parseInteger,"<s-s:n>")),v.bind("number",M(i.number,"<(nsb)-:n>")),v.bind("floor",M(i.floor,"<n-:n>")),v.bind("ceil",M(i.ceil,"<n-:n>")),v.bind("round",M(i.round,"<n-n?:n>")),v.bind("abs",M(i.abs,"<n-:n>")),v.bind("sqrt",M(i.sqrt,"<n-:n>")),v.bind("power",M(i.power,"<n-n:n>")),v.bind("random",M(i.random,"<:n>")),v.bind("boolean",M(i.boolean,"<x-:b>")),v.bind("not",M(i.not,"<x-:b>")),v.bind("map",M(i.map,"<af>")),v.bind("zip",M(i.zip,"<a+>")),v.bind("filter",M(i.filter,"<af>")),v.bind("single",M(i.single,"<af?>")),v.bind("reduce",M(i.foldLeft,"<afj?:j>")),v.bind("sift",M(i.sift,"<o-f?:o>")),v.bind("keys",M(i.keys,"<x-:a<s>>")),v.bind("lookup",M(i.lookup,"<x-s:x>")),v.bind("append",M(i.append,"<xx:a>")),v.bind("exists",M(i.exists,"<x:b>")),v.bind("spread",M(i.spread,"<x-:a<o>>")),v.bind("merge",M(i.merge,"<a<o>:o>")),v.bind("reverse",M(i.reverse,"<a:a>")),v.bind("each",M(i.each,"<o-f:a>")),v.bind("error",M(i.error,"<s?:x>")),v.bind("assert",M(i.assert,"<bs?:x>")),v.bind("type",M(i.type,"<x:s>")),v.bind("sort",M(i.sort,"<af?:a>")),v.bind("shuffle",M(i.shuffle,"<a:a>")),v.bind("distinct",M(i.distinct,"<x:x>")),v.bind("base64encode",M(i.base64encode,"<s-:s>")),v.bind("base64decode",M(i.base64decode,"<s-:s>")),v.bind("encodeUrlComponent",M(i.encodeUrlComponent,"<s-:s>")),v.bind("encodeUrl",M(i.encodeUrl,"<s-:s>")),v.bind("decodeUrlComponent",M(i.decodeUrlComponent,"<s-:s>")),v.bind("decodeUrl",M(i.decodeUrl,"<s-:s>")),v.bind("eval",M((function*(e,t){if(void 0!==e){var n=this.input;void 0!==t&&(n=t,Array.isArray(n)&&!u(n)&&((n=s(n)).outerWrapper=!0));try{var r=o(e,!1)}catch(e){throw F(e),{stack:(new Error).stack,code:"D3120",value:e.message,error:e}}try{var i=yield*y(r,n,this.environment)}catch(e){throw F(e),{stack:(new Error).stack,code:"D3121",value:e.message,error:e}}return i}}),"<sx?:x>")),v.bind("toMillis",M(r.toMillis,"<s-s?:n>")),v.bind("fromMillis",M(r.fromMillis,"<n-s?s?:s>")),v.bind("clone",M((function(e){if(void 0!==e)return JSON.parse(i.string(e))}),"<(oa)-:o>"));var N={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function F(e){var t=N[e.code];if(void 0!==t){var n=t.replace(/\{\{\{([^}]+)}}}/g,(function(){return e[arguments[1]]}));n=n.replace(/\{\{([^}]+)}}/g,(function(){return JSON.stringify(e[arguments[1]])})),e.message=n}}function V(e,t){var n,i;try{n=o(e,t&&t.recover),i=n.errors,delete n.errors}catch(e){throw F(e),e}var a=D(v),l=new Date;return a.bind("now",M((function(e,t){return r.fromMillis(l.getTime(),e,t)}),"<s?s?:s>")),a.bind("millis",M((function(){return l.getTime()}),"<:n>")),t&&t.RegexEngine?V.RegexEngine=t.RegexEngine:V.RegexEngine=RegExp,{evaluate:function(e,t,r){if(void 0!==i){var o={code:"S0500",position:0};throw F(o),o}var c,d,p;if(void 0!==t)for(var f in c=D(a),t)c.bind(f,t[f]);else c=a;if(c.bind("$",e),l=new Date,c.timestamp=l,Array.isArray(e)&&!u(e)&&((e=s(e)).outerWrapper=!0),"function"==typeof r){c.async=!0;var h=function(e){F(e),r(e,null)},v=function(e){(d=p.next(e)).done?r(null,d.value):d.value.then(v).catch(h)};p=y(n,e,c),(d=p.next()).value.then(v).catch(h)}else try{for(p=y(n,e,c),d=p.next();!d.done;)d=p.next(d.value);return d.value}catch(o){throw F(o),o}},assign:function(e,t){a.bind(e,t)},registerFunction:function(e,t,n){var r=M(t,n);a.bind(e,r)},ast:function(){return n},errors:function(){return i}}}return V.parser=o,V}();t.exports=s},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(e,t,n){var r=e("./signature");const i=(()=>{"use strict";var e={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},t={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},n=function(n){var r=0,i=n.length,a=function(e,t){return{type:e,value:t,position:r}},o=function(l){if(r>=i)return null;for(var s=n.charAt(r);r<i&&" \t\n\r\v".indexOf(s)>-1;)r++,s=n.charAt(r);if("/"===s&&"*"===n.charAt(r+1)){var u=r;for(r+=2,s=n.charAt(r);"*"!==s||"/"!==n.charAt(r+1);)if(s=n.charAt(++r),r>=i)throw{code:"S0106",stack:(new Error).stack,position:u};return r+=2,s=n.charAt(r),o(l)}if(!0!==l&&"/"===s)return r++,a("regex",function(){for(var e,t,a=r,o=0;r<i;){var l=n.charAt(r);if("/"===l&&"\\"!==n.charAt(r-1)&&0===o){if(""===(e=n.substring(a,r)))throw{code:"S0301",stack:(new Error).stack,position:r};for(r++,l=n.charAt(r),a=r;"i"===l||"m"===l;)r++,l=n.charAt(r);return t=n.substring(a,r)+"g",new RegExp(e,t)}"("!==l&&"["!==l&&"{"!==l||"\\"===n.charAt(r-1)||o++,")"!==l&&"]"!==l&&"}"!==l||"\\"===n.charAt(r-1)||o--,r++}throw{code:"S0302",stack:(new Error).stack,position:r}}());if("."===s&&"."===n.charAt(r+1))return r+=2,a("operator","..");if(":"===s&&"="===n.charAt(r+1))return r+=2,a("operator",":=");if("!"===s&&"="===n.charAt(r+1))return r+=2,a("operator","!=");if(">"===s&&"="===n.charAt(r+1))return r+=2,a("operator",">=");if("<"===s&&"="===n.charAt(r+1))return r+=2,a("operator","<=");if("*"===s&&"*"===n.charAt(r+1))return r+=2,a("operator","**");if("~"===s&&">"===n.charAt(r+1))return r+=2,a("operator","~>");if(Object.prototype.hasOwnProperty.call(e,s))return r++,a("operator",s);if('"'===s||"'"===s){var c=s;r++;for(var d="";r<i;){if("\\"===(s=n.charAt(r)))if(r++,s=n.charAt(r),Object.prototype.hasOwnProperty.call(t,s))d+=t[s];else{if("u"!==s)throw{code:"S0103",stack:(new Error).stack,position:r,token:s};var p=n.substr(r+1,4);if(!/^[0-9a-fA-F]+$/.test(p))throw{code:"S0104",stack:(new Error).stack,position:r};var f=parseInt(p,16);d+=String.fromCharCode(f),r+=4}else{if(s===c)return r++,a("string",d);d+=s}r++}throw{code:"S0101",stack:(new Error).stack,position:r}}var h,v=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/.exec(n.substring(r));if(null!==v){var y=parseFloat(v[0]);if(!isNaN(y)&&isFinite(y))return r+=v[0].length,a("number",y);throw{code:"S0102",stack:(new Error).stack,position:r,token:v[0]}}if("`"===s){r++;var m=n.indexOf("`",r);if(-1!==m)return h=n.substring(r,m),r=m+1,a("name",h);throw r=i,{code:"S0105",stack:(new Error).stack,position:r}}for(var g,b=r;;)if(g=n.charAt(b),b===i||" \t\n\r\v".indexOf(g)>-1||Object.prototype.hasOwnProperty.call(e,g)){if("$"===n.charAt(r))return h=n.substring(r+1,b),r=b,a("variable",h);switch(h=n.substring(r,b),r=b,h){case"or":case"in":case"and":return a("operator",h);case"true":return a("value",!0);case"false":return a("value",!1);case"null":return a("value",null);default:return r===i&&""===h?null:a("name",h)}}else b++};return o};return function(t,i){var a,o,l={},s=[],u=function(){var e=[];"(end)"!==a.id&&e.push({type:a.type,value:a.value,position:a.position});for(var t=o();null!==t;)e.push(t),t=o();return e},c={nud:function(){var e={code:"S0211",token:this.value,position:this.position};if(i)return e.remaining=u(),e.type="error",s.push(e),e;throw e.stack=(new Error).stack,e}},d=function(e,t){var n=l[e];return t=t||0,n?t>=n.lbp&&(n.lbp=t):((n=Object.create(c)).id=n.value=e,n.lbp=t,l[e]=n),n},p=function(e){if(i){e.remaining=u(),s.push(e);var t=l["(error)"];return(a=Object.create(t)).error=e,a.type="(error)",a}throw e.stack=(new Error).stack,e},f=function(e,n){if(e&&a.id!==e){var r={code:"(end)"===a.id?"S0203":"S0202",position:a.position,token:a.value,value:e};return p(r)}var i=o(n);if(null===i)return(a=l["(end)"]).position=t.length,a;var s,u=i.value,c=i.type;switch(c){case"name":case"variable":s=l["(name)"];break;case"operator":if(!(s=l[u]))return p({code:"S0204",stack:(new Error).stack,position:i.position,token:u});break;case"string":case"number":case"value":s=l["(literal)"];break;case"regex":c="regex",s=l["(regex)"];break;default:return p({code:"S0205",stack:(new Error).stack,position:i.position,token:u})}return(a=Object.create(s)).value=u,a.type=c,a.position=i.position,a},h=function(e){var t,n=a;for(f(null,!0),t=n.nud();e<a.lbp;)n=a,f(),t=n.led(t);return t},v=function(e){d(e,0).nud=function(){return this}},y=function(t,n,r){var i=n||e[t],a=d(t,i);return a.led=r||function(e){return this.lhs=e,this.rhs=h(i),this.type="binary",this},a},m=function(e,t,n){var r=d(e,t);return r.led=n,r},g=function(e,t){var n=d(e);return n.nud=t||function(){return this.expression=h(70),this.type="unary",this},n};v("(end)"),v("(name)"),v("(literal)"),v("(regex)"),d(":"),d(";"),d(","),d(")"),d("]"),d("}"),d(".."),y("."),y("+"),y("-"),y("*"),y("/"),y("%"),y("="),y("<"),y(">"),y("!="),y("<="),y(">="),y("&"),y("and"),y("or"),y("in"),v("and"),v("or"),v("in"),g("-"),y("~>"),m("(error)",10,(function(e){return this.lhs=e,this.error=a.error,this.remaining=u(),this.type="error",this})),g("*",(function(){return this.type="wildcard",this})),g("**",(function(){return this.type="descendant",this})),g("%",(function(){return this.type="parent",this})),y("(",e["("],(function(e){if(this.procedure=e,this.type="function",this.arguments=[],")"!==a.id)for(;"operator"===a.type&&"?"===a.id?(this.type="partial",this.arguments.push(a),f("?")):this.arguments.push(h(0)),","===a.id;)f(",");if(f(")",!0),"name"===e.type&&("function"===e.value||"λ"===e.value)){if(this.arguments.forEach((function(e,t){if("variable"!==e.type)return p({code:"S0208",stack:(new Error).stack,position:e.position,token:e.value,value:t+1})})),this.type="lambda","<"===a.id){for(var t=a.position,n=1,i="<";n>0&&"{"!==a.id&&"(end)"!==a.id;){var o=f();">"===o.id?n--:"<"===o.id&&n++,i+=o.value}f(">");try{this.signature=r(i)}catch(e){return e.position=t+e.offset,p(e)}}f("{"),this.body=h(0),f("}")}return this})),g("(",(function(){for(var e=[];")"!==a.id&&(e.push(h(0)),";"===a.id);)f(";");return f(")",!0),this.type="block",this.expressions=e,this})),g("[",(function(){var e=[];if("]"!==a.id)for(;;){var t=h(0);if(".."===a.id){var n={type:"binary",value:"..",position:a.position,lhs:t};f(".."),n.rhs=h(0),t=n}if(e.push(t),","!==a.id)break;f(",")}return f("]",!0),this.expressions=e,this.type="unary",this})),y("[",e["["],(function(t){if("]"===a.id){for(var n=t;n&&"binary"===n.type&&"["===n.value;)n=n.lhs;return n.keepArray=!0,f("]"),t}return this.lhs=t,this.rhs=h(e["]"]),this.type="binary",f("]",!0),this})),y("^",e["^"],(function(e){f("(");for(var t=[];;){var n={descending:!1};if("<"===a.id?f("<"):">"===a.id&&(n.descending=!0,f(">")),n.expression=h(0),t.push(n),","!==a.id)break;f(",")}return f(")"),this.lhs=e,this.rhs=t,this.type="binary",this}));var b=function(e){var t=[];if("}"!==a.id)for(;;){var n=h(0);f(":");var r=h(0);if(t.push([n,r]),","!==a.id)break;f(",")}return f("}",!0),void 0===e?(this.lhs=t,this.type="unary"):(this.lhs=e,this.rhs=t,this.type="binary"),this};g("{",b),y("{",e["{"],b),m(":=",e[":="],(function(t){return"variable"!==t.type?p({code:"S0212",stack:(new Error).stack,position:t.position,token:t.value}):(this.lhs=t,this.rhs=h(e[":="]-1),this.type="binary",this)})),y("@",e["@"],(function(t){return this.lhs=t,this.rhs=h(e["@"]),"variable"!==this.rhs.type?p({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)})),y("#",e["#"],(function(t){return this.lhs=t,this.rhs=h(e["#"]),"variable"!==this.rhs.type?p({code:"S0214",stack:(new Error).stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)})),y("?",e["?"],(function(e){return this.type="condition",this.condition=e,this.then=h(0),":"===a.id&&(f(":"),this.else=h(0)),this})),g("|",(function(){return this.type="transform",this.pattern=h(0),f("|"),this.update=h(0),","===a.id&&(f(","),this.delete=h(0)),f("|"),this}));var _=function(e){var t;if("function"!==e.type||e.predicate)if("condition"===e.type)e.then=_(e.then),void 0!==e.else&&(e.else=_(e.else)),t=e;else if("block"===e.type){var n=e.expressions.length;n>0&&(e.expressions[n-1]=_(e.expressions[n-1])),t=e}else t=e;else{var r={type:"lambda",thunk:!0,arguments:[],position:e.position};r.body=e,t=r}return t},E=0,x=0,O=[],w=function(e,t){switch(e.type){case"name":case"wildcard":t.level--,0===t.level&&(void 0===e.ancestor||(O[t.index].slot.label=e.ancestor.label),e.ancestor=t,e.tuple=!0);break;case"parent":t.level++;break;case"block":e.expressions.length>0&&(e.tuple=!0,t=w(e.expressions[e.expressions.length-1],t));break;case"path":e.tuple=!0;var n=e.steps.length-1;for(t=w(e.steps[n--],t);t.level>0&&n>=0;)t=w(e.steps[n--],t);break;default:throw{code:"S0217",token:e.type,position:e.position}}return t},k=function(e,t){if(void 0!==t.seekingParent||"parent"===t.type){var n=void 0!==t.seekingParent?t.seekingParent:[];"parent"===t.type&&n.push(t.slot),void 0===e.seekingParent?e.seekingParent=n:Array.prototype.push.apply(e.seekingParent,n)}},S=function(e){var t=e.steps.length-1,n=e.steps[t],r=void 0!==n.seekingParent?n.seekingParent:[];"parent"===n.type&&r.push(n.slot);for(var i=0;i<r.length;i++){var a=r[i];for(t=e.steps.length-2;a.level>0;){if(t<0){void 0===e.seekingParent?e.seekingParent=[a]:e.seekingParent.push(a);break}for(var o=e.steps[t--];t>=0&&o.focus&&e.steps[t].focus;)o=e.steps[t--];a=w(o,a)}}},A=function(e){var t;switch(e.type){case"binary":switch(e.value){case".":var n=A(e.lhs);t="path"===n.type?n:{type:"path",steps:[n]},"parent"===n.type&&(t.seekingParent=[n.slot]);var r=A(e.rhs);"function"===r.type&&"path"===r.procedure.type&&1===r.procedure.steps.length&&"name"===r.procedure.steps[0].type&&"function"===t.steps[t.steps.length-1].type&&(t.steps[t.steps.length-1].nextFunction=r.procedure.steps[0].value),"path"===r.type?Array.prototype.push.apply(t.steps,r.steps):(void 0!==r.predicate&&(r.stages=r.predicate,delete r.predicate),t.steps.push(r)),t.steps.filter((function(e){if("number"===e.type||"value"===e.type)throw{code:"S0213",stack:(new Error).stack,position:e.position,value:e.value};return"string"===e.type})).forEach((function(e){e.type="name"})),t.steps.filter((function(e){return!0===e.keepArray})).length>0&&(t.keepSingletonArray=!0);var a=t.steps[0];"unary"===a.type&&"["===a.value&&(a.consarray=!0);var o=t.steps[t.steps.length-1];"unary"===o.type&&"["===o.value&&(o.consarray=!0),S(t);break;case"[":var l=t=A(e.lhs),u="predicate";if("path"===t.type&&(l=t.steps[t.steps.length-1],u="stages"),void 0!==l.group)throw{code:"S0209",stack:(new Error).stack,position:e.position};void 0===l[u]&&(l[u]=[]);var c=A(e.rhs);void 0!==c.seekingParent&&(c.seekingParent.forEach((e=>{1===e.level?w(l,e):e.level--})),k(l,c)),l[u].push({type:"filter",expr:c,position:e.position});break;case"{":if(void 0!==(t=A(e.lhs)).group)throw{code:"S0210",stack:(new Error).stack,position:e.position};t.group={lhs:e.rhs.map((function(e){return[A(e[0]),A(e[1])]})),position:e.position};break;case"^":"path"!==(t=A(e.lhs)).type&&(t={type:"path",steps:[t]});var d={type:"sort",position:e.position};d.terms=e.rhs.map((function(e){var t=A(e.expression);return k(d,t),{descending:e.descending,expression:t}})),t.steps.push(d),S(t);break;case":=":(t={type:"bind",value:e.value,position:e.position}).lhs=A(e.lhs),t.rhs=A(e.rhs),k(t,t.rhs);break;case"@":if(t=A(e.lhs),l=t,"path"===t.type&&(l=t.steps[t.steps.length-1]),void 0!==l.stages||void 0!==l.predicate)throw{code:"S0215",stack:(new Error).stack,position:e.position};if("sort"===l.type)throw{code:"S0216",stack:(new Error).stack,position:e.position};e.keepArray&&(l.keepArray=!0),l.focus=e.rhs.value,l.tuple=!0;break;case"#":t=A(e.lhs),l=t,"path"===t.type?l=t.steps[t.steps.length-1]:(t={type:"path",steps:[t]},void 0!==l.predicate&&(l.stages=l.predicate,delete l.predicate)),void 0===l.stages?l.index=e.rhs.value:l.stages.push({type:"index",value:e.rhs.value,position:e.position}),l.tuple=!0;break;case"~>":(t={type:"apply",value:e.value,position:e.position}).lhs=A(e.lhs),t.rhs=A(e.rhs);break;default:(t={type:e.type,value:e.value,position:e.position}).lhs=A(e.lhs),t.rhs=A(e.rhs),k(t,t.lhs),k(t,t.rhs)}break;case"unary":t={type:e.type,value:e.value,position:e.position},"["===e.value?t.expressions=e.expressions.map((function(e){var n=A(e);return k(t,n),n})):"{"===e.value?t.lhs=e.lhs.map((function(e){var n=A(e[0]);k(t,n);var r=A(e[1]);return k(t,r),[n,r]})):(t.expression=A(e.expression),"-"===e.value&&"number"===t.expression.type?(t=t.expression).value=-t.value:k(t,t.expression));break;case"function":case"partial":(t={type:e.type,name:e.name,value:e.value,position:e.position}).arguments=e.arguments.map((function(e){var n=A(e);return k(t,n),n})),t.procedure=A(e.procedure);break;case"lambda":t={type:e.type,arguments:e.arguments,signature:e.signature,position:e.position};var p=A(e.body);t.body=_(p);break;case"condition":(t={type:e.type,position:e.position}).condition=A(e.condition),k(t,t.condition),t.then=A(e.then),k(t,t.then),void 0!==e.else&&(t.else=A(e.else),k(t,t.else));break;case"transform":(t={type:e.type,position:e.position}).pattern=A(e.pattern),t.update=A(e.update),void 0!==e.delete&&(t.delete=A(e.delete));break;case"block":(t={type:e.type,position:e.position}).expressions=e.expressions.map((function(e){var n=A(e);return k(t,n),(n.consarray||"path"===n.type&&n.steps[0].consarray)&&(t.consarray=!0),n}));break;case"name":t={type:"path",steps:[e]},e.keepArray&&(t.keepSingletonArray=!0);break;case"parent":t={type:"parent",slot:{label:"!"+E++,level:1,index:x++}},O.push(t);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":t=e;break;case"operator":if("and"===e.value||"or"===e.value||"in"===e.value)e.type="name",t=A(e);else{if("?"!==e.value)throw{code:"S0201",stack:(new Error).stack,position:e.position,token:e.value};t=e}break;case"error":t=e,e.lhs&&(t=A(e.lhs));break;default:var f="S0206";"(end)"===e.id&&(f="S0207");var h={code:f,position:e.position,token:e.value};if(i)return s.push(h),{type:"error",error:h};throw h.stack=(new Error).stack,h}return e.keepArray&&(t.keepArray=!0),t};o=n(t),f();var T=h(0);if("(end)"!==a.id){var R={code:"S0201",position:a.position,token:a.value};p(R)}if("parent"===(T=A(T)).type||void 0!==T.seekingParent)throw{code:"S0217",token:T.type,position:T.position};return s.length>0&&(T.errors=s),T}})();t.exports=i},{"./signature":5}],5:[function(e,t,n){var r=e("./utils");const i=(()=>{"use strict";var e={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};return function(t){for(var n=1,i=[],a={},o=a;n<t.length;){var l=t.charAt(n);if(":"===l)break;var s=function(){i.push(a),o=a,a={}},u=function(e,t,n,r){for(var i=1,a=t;a<e.length;)if(a++,(l=e.charAt(a))===r){if(0==--i)break}else l===n&&i++;return a};switch(l){case"s":case"n":case"b":case"l":case"o":a.regex="["+l+"m]",a.type=l,s();break;case"a":a.regex="[asnblfom]",a.type=l,a.array=!0,s();break;case"f":a.regex="f",a.type=l,s();break;case"j":a.regex="[asnblom]",a.type=l,s();break;case"x":a.regex="[asnblfom]",a.type=l,s();break;case"-":o.context=!0,o.contextRegex=new RegExp(o.regex),o.regex+="?";break;case"?":case"+":o.regex+=l;break;case"(":var c=u(t,n,"(",")"),d=t.substring(n+1,c);if(-1!==d.indexOf("<"))throw{code:"S0402",stack:(new Error).stack,value:d,offset:n};a.regex="["+d+"m]",a.type="("+d+")",n=c,s();break;case"<":if("a"!==o.type&&"f"!==o.type)throw{code:"S0401",stack:(new Error).stack,value:o.type,offset:n};var p=u(t,n,"<",">");o.subtype=t.substring(n+1,p),n=p}n++}var f="^"+i.map((function(e){return"("+e.regex+")"})).join("")+"$",h=new RegExp(f),v=function(e){var t;if(r.isFunction(e))t="f";else switch(typeof e){case"string":t="s";break;case"number":t="n";break;case"boolean":t="b";break;case"object":t=null===e?"l":Array.isArray(e)?"a":"o";break;default:t="m"}return t};return{definition:t,validate:function(t,n){var r="";t.forEach((function(e){r+=v(e)}));var a=h.exec(r);if(a){var o=[],l=0;return i.forEach((function(r,i){var s=t[l],u=a[i+1];if(""===u)if(r.context&&r.contextRegex){var c=v(n);if(!r.contextRegex.test(c))throw{code:"T0411",stack:(new Error).stack,value:n,index:l+1};o.push(n)}else o.push(s),l++;else u.split("").forEach((function(n){if("a"===r.type){if("m"===n)s=void 0;else{s=t[l];var i=!0;if(void 0!==r.subtype)if("a"!==n&&u!==r.subtype)i=!1;else if("a"===n&&s.length>0){var a=v(s[0]);i=a===r.subtype.charAt(0)&&0===s.filter((function(e){return v(e)!==a})).length}if(!i)throw{code:"T0412",stack:(new Error).stack,value:s,index:l+1,type:e[r.subtype]};"a"!==n&&(s=[s])}o.push(s),l++}else o.push(s),l++}))})),o}!function(e,t){for(var n="^",r=0,a=0;a<i.length;a++){n+=i[a].regex;var o=t.match(n);if(null===o)throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1};r=o[0].length}throw{code:"T0410",stack:(new Error).stack,value:e[r],index:r+1}}(t,r)}}}})();t.exports=i},{"./utils":6}],6:[function(e,t,n){const r=(()=>{"use strict";function e(e){var t=!1;if("number"==typeof e&&(t=!isNaN(e))&&!isFinite(e))throw{code:"D1001",value:e,stack:(new Error).stack};return t}var t=("function"==typeof Symbol?Symbol:{}).iterator||"@@iterator";return{isNumeric:e,isArrayOfStrings:function(e){var t=!1;return Array.isArray(e)&&(t=0===e.filter((function(e){return"string"!=typeof e})).length),t},isArrayOfNumbers:function(t){var n=!1;return Array.isArray(t)&&(n=0===t.filter((function(t){return!e(t)})).length),n},createSequence:function(){var e=[];return e.sequence=!0,1===arguments.length&&e.push(arguments[0]),e},isSequence:function(e){return!0===e.sequence&&Array.isArray(e)},isFunction:function(e){return e&&(!0===e._jsonata_function||!0===e._jsonata_lambda)||"function"==typeof e},isLambda:function(e){return e&&!0===e._jsonata_lambda},isIterable:function(e){return"object"==typeof e&&null!==e&&t in e&&"next"in e&&"function"==typeof e.next},getFunctionArity:function(e){return"number"==typeof e.arity?e.arity:"function"==typeof e.implementation?e.implementation.length:"number"==typeof e.length?e.length:e.arguments.length},isDeepEqual:function e(t,n){if(t===n)return!0;if("object"==typeof t&&"object"==typeof n&&null!==t&&null!==n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}var i=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(n);if(i.length!==a.length)return!1;for(i=i.sort(),a=a.sort(),r=0;r<i.length;r++)if(i[r]!==a[r])return!1;for(r=0;r<i.length;r++){var o=i[r];if(!e(t[o],n[o]))return!1}return!0}return!1},stringToArray:function(e){var t=[];for(let n of e)t.push(n);return t}}})();t.exports=r},{}]},{},[3])(3)},2694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8273)),l=/(\{[\d|\w]+\})/,s=/(\$ref\{[\w|.]+\})/,u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"function"==typeof n&&(n={customLanguageInterface:n}),this._opts=i({},{customLanguageInterface:o.getInterfaceLanguage,pseudo:!1,pseudoMultipleLanguages:!1,logsEnabled:!0},n),this._interfaceLanguage=this._opts.customLanguageInterface(),this._language=this._interfaceLanguage,this.setContent(t)}return a(e,[{key:"setContent",value:function(e){var t=this,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(Object.keys(e),1)[0];this._defaultLanguage=n,this._defaultLanguageFirstLevelKeys=[],this._props=e,o.validateTranslationKeys(Object.keys(e[this._defaultLanguage])),Object.keys(this._props[this._defaultLanguage]).forEach((function(e){"string"==typeof t._props[t._defaultLanguage][e]&&t._defaultLanguageFirstLevelKeys.push(e)})),this.setLanguage(this._interfaceLanguage),this._opts.pseudo&&this._pseudoAllValues(this._props)}},{key:"_pseudoAllValues",value:function(e){var t=this;Object.keys(e).forEach((function(n){if("object"===r(e[n]))t._pseudoAllValues(e[n]);else if("string"==typeof e[n]){if(0===e[n].indexOf("[")&&e[n].lastIndexOf("]")===e[n].length-1)return;for(var i=e[n].split(" "),a=0;a<i.length;a+=1)if(i[a].match(l));else if(i[a].match(s));else{var u=i[a].length;t._opts.pseudoMultipleLanguages&&(u=parseInt(1.4*u,10)),i[a]=o.randomPseudo(u)}e[n]="["+i.join(" ")+"]"}}))}},{key:"setLanguage",value:function(e){var t=this,n=o.getBestMatchingLanguage(e,this._props),r=Object.keys(this._props)[0];if(this._language=n,this._props[n]){for(var a=0;a<this._defaultLanguageFirstLevelKeys.length;a+=1)delete this[this._defaultLanguageFirstLevelKeys[a]];var l=i({},this._props[this._language]);Object.keys(l).forEach((function(e){t[e]=l[e]})),r!==this._language&&(l=this._props[r],this._fallbackValues(l,this))}}},{key:"_fallbackValues",value:function(e,t){var n=this;Object.keys(e).forEach((function(r){Object.prototype.hasOwnProperty.call(e,r)&&!t[r]&&""!==t[r]?(t[r]=e[r],n._opts.logsEnabled&&console.log("🚧 👷 key '"+r+"' not found in localizedStrings for language "+n._language+" 🚧")):"string"!=typeof t[r]&&n._fallbackValues(e[r],t[r])}))}},{key:"getLanguage",value:function(){return this._language}},{key:"getInterfaceLanguage",value:function(){return this._interfaceLanguage}},{key:"getAvailableLanguages",value:function(){var e=this;return this._availableLanguages||(this._availableLanguages=[],Object.keys(this._props).forEach((function(t){e._availableLanguages.push(t)}))),this._availableLanguages}},{key:"formatString",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e||"";"string"==typeof a&&(a=this.getString(e,null,!0)||a);var o=a.split(s).filter((function(e){return!!e})).map((function(n){if(n.match(s)){var r=n.slice(5,-1);return t.getString(r)||(t._opts.logsEnabled&&console.log("No Localization ref found for '"+n+"' in string '"+e+"'"),"$ref(id:"+r+")")}return n})).join("");return o.split(l).filter((function(e){return!!e})).map((function(e){if(e.match(l)){var t=e.slice(1,-1),n=r[t];if(void 0===n){var i=r[0][t];if(void 0===i)return n;n=i}return n}return e})).join("")}},{key:"getString",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var r=this._props[t||this._language],i=e.split("."),a=0;a<i.length;a+=1){if(void 0===r[i[a]])throw Error(i[a]);r=r[i[a]]}return r}catch(r){!n&&this._opts.logsEnabled&&console.log("No localization found for key '"+e+"' and language '"+t+"', failed on "+r.message)}return null}},{key:"getContent",value:function(){return this._props}}]),e}();t.default=u},8273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterfaceLanguage=function(){var e="en-US";if("undefined"==typeof navigator)return e;var t=navigator;if(t){if(t.language)return t.language;if(t.languages&&t.languages[0])return t.languages[0];if(t.userLanguage)return t.userLanguage;if(t.browserLanguage)return t.browserLanguage}return e},t.getBestMatchingLanguage=function(e,t){if(t[e])return e;var n=e.indexOf("-"),r=n>=0?e.substring(0,n):e;return t[r]?r:Object.keys(t)[0]},t.validateTranslationKeys=function(e){var t=["_interfaceLanguage","_language","_defaultLanguage","_defaultLanguageFirstLevelKeys","_props"];e.forEach((function(e){if(-1!==t.indexOf(e))throw new Error(e+" cannot be used as a key. It is a reserved word.")}))},t.randomPseudo=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r+=1)t+=n.charAt(Math.floor(Math.random()*n.length));return t}},1989:(e,t,n)=>{var r=n(1789),i=n(401),a=n(7667),o=n(1327),l=n(1866);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},8407:(e,t,n)=>{var r=n(7040),i=n(4125),a=n(2117),o=n(7518),l=n(4705);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},7071:(e,t,n)=>{var r=n(852)(n(5639),"Map");e.exports=r},3369:(e,t,n)=>{var r=n(4785),i=n(1285),a=n(6e3),o=n(9916),l=n(5265);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=i,s.prototype.get=a,s.prototype.has=o,s.prototype.set=l,e.exports=s},8525:(e,t,n)=>{var r=n(852)(n(5639),"Set");e.exports=r},8668:(e,t,n)=>{var r=n(3369),i=n(619),a=n(2385);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},2705:(e,t,n)=>{var r=n(5639).Symbol;e.exports=r},7443:(e,t,n)=>{var r=n(2118);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},9932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8470:(e,t,n)=>{var r=n(7813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1848:e=>{e.exports=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}},7786:(e,t,n)=>{var r=n(1811),i=n(327);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},4239:(e,t,n)=>{var r=n(2705),i=n(9607),a=n(2333),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},2118:(e,t,n)=>{var r=n(1848),i=n(2722),a=n(2351);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,i,n)}},2722:e=>{e.exports=function(e){return e!=e}},8458:(e,t,n)=>{var r=n(3560),i=n(5346),a=n(3218),o=n(346),l=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,c=s.toString,d=u.hasOwnProperty,p=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?p:l).test(o(e))}},531:(e,t,n)=>{var r=n(2705),i=n(9932),a=n(1469),o=n(3448),l=r?r.prototype:void 0,s=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},5652:(e,t,n)=>{var r=n(8668),i=n(7443),a=n(1196),o=n(4757),l=n(3593),s=n(1814);e.exports=function(e,t,n){var u=-1,c=i,d=e.length,p=!0,f=[],h=f;if(n)p=!1,c=a;else if(d>=200){var v=t?null:l(e);if(v)return s(v);p=!1,c=o,h=new r}else h=t?[]:f;e:for(;++u<d;){var y=e[u],m=t?t(y):y;if(y=n||0!==y?y:0,p&&m==m){for(var g=h.length;g--;)if(h[g]===m)continue e;t&&h.push(m),f.push(y)}else c(h,m,n)||(h!==f&&h.push(m),f.push(y))}return f}},4757:e=>{e.exports=function(e,t){return e.has(t)}},1811:(e,t,n)=>{var r=n(1469),i=n(5403),a=n(5514),o=n(9833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},4429:(e,t,n)=>{var r=n(5639)["__core-js_shared__"];e.exports=r},3593:(e,t,n)=>{var r=n(8525),i=n(308),a=n(1814),o=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=o},1957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},5050:(e,t,n)=>{var r=n(7019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},852:(e,t,n)=>{var r=n(8458),i=n(7801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},9607:(e,t,n)=>{var r=n(2705),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=o.call(e);return r&&(t?e[l]=n:delete e[l]),i}},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,n)=>{var r=n(4536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},1327:(e,t,n)=>{var r=n(4536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},1866:(e,t,n)=>{var r=n(4536);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},5403:(e,t,n)=>{var r=n(1469),i=n(3448),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,n)=>{var r,i=n(4429),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,n)=>{var r=n(8470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},2117:(e,t,n)=>{var r=n(8470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7518:(e,t,n)=>{var r=n(8470);e.exports=function(e){return r(this.__data__,e)>-1}},4705:(e,t,n)=>{var r=n(8470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4785:(e,t,n)=>{var r=n(1989),i=n(8407),a=n(7071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},1285:(e,t,n)=>{var r=n(5050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).get(e)}},9916:(e,t,n)=>{var r=n(5050);e.exports=function(e){return r(this,e).has(e)}},5265:(e,t,n)=>{var r=n(5050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4523:(e,t,n)=>{var r=n(8306);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},4536:(e,t,n)=>{var r=n(852)(Object,"create");e.exports=r},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5639:(e,t,n)=>{var r=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},2351:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},5514:(e,t,n)=>{var r=n(4523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},327:(e,t,n)=>{var r=n(3448);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7361:(e,t,n)=>{var r=n(7786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},1469:e=>{var t=Array.isArray;e.exports=t},3560:(e,t,n)=>{var r=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,n)=>{var r=n(4239),i=n(7005);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},8306:(e,t,n)=>{var r=n(3369);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},308:e=>{e.exports=function(){}},9833:(e,t,n)=>{var r=n(531);e.exports=function(e){return null==e?"":r(e)}},4908:(e,t,n)=>{var r=n(5652);e.exports=function(e){return e&&e.length?r(e):[]}},466:function(e){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}var a=RegExp.prototype.test;var o=/\S/;function l(e){return!function(e,t){return a.call(e,t)}(o,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,c=/\s+/,d=/\s*=/,p=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function v(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},h.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},v.prototype.push=function(e){return new v(e,this)},v.prototype.lookup=function(e){var t,r,a,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var l,s,u,c=this,d=!1;c;){if(e.indexOf(".")>0)for(l=c.view,s=e.split("."),u=0;null!=l&&u<s.length;)u===s.length-1&&(d=i(l,s[u])||(r=l,a=s[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(a))),l=l[s[u++]];else l=c.view[e],d=i(c.view,e);if(d){t=l;break}c=c.parent}o[e]=t}return n(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,n){var i=this.templateCache,a=e+":"+(n||m.tags).join(":"),o=void 0!==i,s=o?i.get(a):void 0;return null==s&&(s=function(e,n){if(!e)return[];var i,a,o,s=!1,v=[],y=[],g=[],b=!1,_=!1,E="",x=0;function O(){if(b&&!_)for(;g.length;)delete y[g.pop()];else g=[];b=!1,_=!1}function w(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);i=new RegExp(r(e[0])+"\\s*"),a=new RegExp("\\s*"+r(e[1])),o=new RegExp("\\s*"+r("}"+e[1]))}w(n||m.tags);for(var k,S,A,T,R,P,j=new h(e);!j.eos();){if(k=j.pos,A=j.scanUntil(i))for(var L=0,I=A.length;L<I;++L)l(T=A.charAt(L))?(g.push(y.length),E+=T):(_=!0,s=!0,E+=" "),y.push(["text",T,k,k+1]),k+=1,"\n"===T&&(O(),E="",x=0,s=!1);if(!j.scan(i))break;if(b=!0,S=j.scan(f)||"name",j.scan(u),"="===S?(A=j.scanUntil(d),j.scan(d),j.scanUntil(a)):"{"===S?(A=j.scanUntil(o),j.scan(p),j.scanUntil(a),S="&"):A=j.scanUntil(a),!j.scan(a))throw new Error("Unclosed tag at "+j.pos);if(R=">"==S?[S,A,k,j.pos,E,x,s]:[S,A,k,j.pos],x++,y.push(R),"#"===S||"^"===S)v.push(R);else if("/"===S){if(!(P=v.pop()))throw new Error('Unopened section "'+A+'" at '+k);if(P[1]!==A)throw new Error('Unclosed section "'+P[1]+'" at '+k)}else"name"===S||"{"===S||"&"===S?_=!0:"="===S&&w(A)}if(O(),P=v.pop())throw new Error('Unclosed section "'+P[1]+'" at '+j.pos);return function(e){for(var t,n=[],r=n,i=[],a=0,o=e.length;a<o;++a)switch((t=e[a])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,a=e.length;i<a;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(y))}(e,n),o&&i.set(a,s)),s},y.prototype.render=function(e,t,n,r){var i=this.getConfigTags(r),a=this.parse(e,i),o=t instanceof v?t:new v(t,void 0);return this.renderTokens(a,o,n,e,r)},y.prototype.renderTokens=function(e,t,n,r,i){for(var a,o,l,s="",u=0,c=e.length;u<c;++u)l=void 0,"#"===(o=(a=e[u])[0])?l=this.renderSection(a,t,n,r,i):"^"===o?l=this.renderInverted(a,t,n,r,i):">"===o?l=this.renderPartial(a,t,n,i):"&"===o?l=this.unescapedValue(a,t):"name"===o?l=this.escapedValue(a,t,i):"text"===o&&(l=this.rawValue(a)),void 0!==l&&(s+=l);return s},y.prototype.renderSection=function(e,r,i,a,o){var l=this,s="",u=r.lookup(e[1]);if(u){if(t(u))for(var c=0,d=u.length;c<d;++c)s+=this.renderTokens(e[4],r.push(u[c]),i,a,o);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)s+=this.renderTokens(e[4],r.push(u),i,a,o);else if(n(u)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(u=u.call(r.view,a.slice(e[3],e[5]),(function(e){return l.render(e,r,i,o)})))&&(s+=u)}else s+=this.renderTokens(e[4],r,i,a,o);return s}},y.prototype.renderInverted=function(e,n,r,i,a){var o=n.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],n,r,i,a)},y.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=r+i[a]);return i.join("\n")},y.prototype.renderPartial=function(e,t,r,i){if(r){var a=this.getConfigTags(i),o=n(r)?r(e[1]):r[e[1]];if(null!=o){var l=e[6],s=e[5],u=e[4],c=o;0==s&&u&&(c=this.indentPartial(o,u,l));var d=this.parse(c,a);return this.renderTokens(d,t,r,c,i)}}},y.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},y.prototype.escapedValue=function(e,t,n){var r=this.getConfigEscape(n)||m.escape,i=t.lookup(e[1]);if(null!=i)return"number"==typeof i&&r===m.escape?String(i):r(i)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){g.templateCache=e},get templateCache(){return g.templateCache}},g=new y;return m.clearCache=function(){return g.clearCache()},m.parse=function(e,t){return g.parse(e,t)},m.render=function(e,n,r,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)'));var a;return g.render(e,n,r,i)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},m.Scanner=h,m.Context=v,m.Writer=y,m}()},2903:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=o(n(6689)),a=o(n(2694));function o(e){return e&&e.__esModule?e:{default:e}}var l=/(\{[\d|\w]+\})/;a.default.prototype.formatString=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o=!1,s=(e||"").split(l).filter((function(e){return!!e})).map((function(e,t){if(e.match(l)){var a=e.slice(1,-1),s=n[a];if(null==s){var u=n[0][a];if(void 0===u)return s;s=u}return i.default.isValidElement(s)?(o=!0,i.default.Children.toArray(s).map((function(e){return r({},e,{key:t.toString()})}))):s}return e}));return o?s:s.join("")},t.default=a.default},875:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=875,e.exports=t},6689:e=>{"use strict";e.exports=require("react")},4704:e=>{"use strict";e.exports=JSON.parse('{"validate.required":"The \'{field}\' field is required.","validate.string":"The \'{field}\' field must be a string.","validate.stringEmpty":"The \'{field}\' field must not be empty.","validate.stringMin":"The \'{field}\' field length must be greater than or equal to {expected} characters long.","validate.stringMax":"The \'{field}\' field length must be less than or equal to {expected} characters long.","validate.stringLength":"The \'{field}\' field length must be {expected} characters long.","validate.stringPattern":"The \'{field}\' field fails to match the required pattern.","validate.stringContains":"The \'{field}\' field must contain the \'{expected}\' text.","validate.stringEnum":"The \'{field}\' field does not match any of the allowed values.","validate.stringNumeric":"The \'{field}\' field must be a numeric string.","validate.stringAlpha":"The \'{field}\' field must be an alphabetic string.","validate.stringAlphanum":"The \'{field}\' field must be an alphanumeric string.","validate.stringAlphadash":"The \'{field}\' field must be an alphadash string.","validate.stringHex":"The \'{field}\' field must be a hex string.","validate.stringSingleLine":"The \'{field}\' field must be a single line string.","validate.stringBase64":"The \'{field}\' field must be a base64 string.","validate.number":"The \'{field}\' field must be a number.","validate.numberMin":"The \'{field}\' field must be greater than or equal to {expected}.","validate.numberMax":"The \'{field}\' field must be less than or equal to {expected}.","validate.numberEqual":"The \'{field}\' field must be equal to {expected}.","validate.numberNotEqual":"The \'{field}\' field can\'t be equal to {expected}.","validate.numberInteger":"The \'{field}\' field must be an integer.","validate.numberPositive":"The \'{field}\' field must be a positive number.","validate.numberNegative":"The \'{field}\' field must be a negative number.","validate.array":"The \'{field}\' field must be an array.","validate.arrayEmpty":"The \'{field}\' field must not be an empty array.","validate.arrayMin":"The \'{field}\' field must contain at least {expected} items.","validate.arrayMax":"The \'{field}\' field must contain less than or equal to {expected} items.","validate.arrayLength":"The \'{field}\' field must contain {expected} items.","validate.arrayContains":"The \'{field}\' field must contain the \'{expected}\' item.","validate.arrayUnique":"The \'{actual}\' value in \'{field}\' field does not unique the \'{expected}\' values.","validate.arrayEnum":"The \'{actual}\' value in \'{field}\' field does not match any of the \'{expected}\' values.","validate.tuple":"The \'{field}\' field must be an array.","validate.tupleEmpty":"The \'{field}\' field must not be an empty array.","validate.tupleLength":"The \'{field}\' field must contain {expected} items.","validate.boolean":"The \'{field}\' field must be a boolean.","validate.currency":"The \'{field}\' must be a valid currency format","validate.date":"The \'{field}\' field must be a Date.","validate.dateMin":"The \'{field}\' field must be greater than or equal to {expected}.","validate.dateMax":"The \'{field}\' field must be less than or equal to {expected}.","validate.enumValue":"The \'{field}\' field value \'{expected}\' does not match any of the allowed values.","validate.equalValue":"The \'{field}\' field value must be equal to \'{expected}\'.","validate.equalField":"The \'{field}\' field value must be equal to \'{expected}\' field value.","validate.forbidden":"The \'{field}\' field is forbidden.","validate.function":"The \'{field}\' field must be a function.","validate.email":"The \'{field}\' field must be a valid e-mail.","validate.emailEmpty":"The \'{field}\' field must not be empty.","validate.emailMin":"The \'{field}\' field length must be greater than or equal to {expected} characters long.","validate.emailMax":"The \'{field}\' field length must be less than or equal to {expected} characters long.","validate.luhn":"The \'{field}\' field must be a valid checksum luhn.","validate.mac":"The \'{field}\' field must be a valid MAC address.","validate.object":"The \'{field}\' must be an Object.","validate.objectStrict":"The object \'{field}\' contains forbidden keys: \'{actual}\'.","validate.objectMinProps":"The object \'{field}\' must contain at least {expected} properties.","validate.objectMaxProps":"The object \'{field}\' must contain {expected} properties at most.","validate.url":"The \'{field}\' field must be a valid URL.","validate.urlEmpty":"The \'{field}\' field must not be empty.","validate.uuid":"The \'{field}\' field must be a valid UUID.","validate.uuidVersion":"The \'{field}\' field must be a valid UUID version provided.","validate.classInstanceOf":"The \'{field}\' field must be an instance of the \'{expected}\' class.","validate.objectID":"The \'{field}\' field must be an valid ObjectID","validate.record":"The \'{field}\' must be an Object."}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";var e=r,t=n(5318);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"APP_SLUG_BLACKLIST",{enumerable:!0,get:function(){return a.APP_SLUG_BLACKLIST}}),Object.defineProperty(e,"PAGE_SLUG_BLACKLIST",{enumerable:!0,get:function(){return a.PAGE_SLUG_BLACKLIST}}),Object.defineProperty(e,"SUBDOMAIN_BLACKLIST",{enumerable:!0,get:function(){return a.SUBDOMAIN_BLACKLIST}}),e.default=void 0;var i=t(n(1209)),a=n(8061),o=i.default;e.default=o})(),module.exports=r})();